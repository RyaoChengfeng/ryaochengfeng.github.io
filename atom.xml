<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Ryao&#39;s Blog</title>
  
  <subtitle>——I DWELL IN POSSBILITY——</subtitle>
  <link href="https://blog.ryaoknw.site/atom.xml" rel="self"/>
  
  <link href="https://blog.ryaoknw.site/"/>
  <updated>2024-02-12T05:30:06.501Z</updated>
  <id>https://blog.ryaoknw.site/</id>
  
  <author>
    <name>Ryao</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>少年将与少女相遇</title>
    <link href="https://blog.ryaoknw.site/2024/2/1c9ae9065bcf/"/>
    <id>https://blog.ryaoknw.site/2024/2/1c9ae9065bcf/</id>
    <published>2024-02-12T05:27:28.000Z</published>
    <updated>2024-02-12T05:30:06.501Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉，您输入的密码错误，请检查后重新输入。" data-whm="抱歉, 当前文章不能被校验, 不过您还是可以看看解密后的内容。">  <script id="hbeData" type="hbeData" data-hmacdigest="542b37282d7aaa517b8ed25313ec36dbd1d3b3886212b9813cb8a545ad383a9e">b31a3c005e390e6298fb84e56f9754d4d035080edbbe507be8f89cbde040f2527cd7dac1f468f284ff91e7fa959082cee1ded3741808f4eef3d4b1978ddf35e4ffff87f985ed8fb54fcc1b92744c8de3825031145ff68f511c3350cf4d059e8017d32e6b1de7667f77582f8870655274ac6e0643242fc85e58f9adf9b53d5f3821d1c5dfecdfbfeedf953681df48dbd9b83c5bb83979d917d07a74a342813c87fefbba9bbe4bf3cda8fc8530b4fb47be3e3210d0e88da0fc4855ebbdd841f1d04ce7b03d181e9788e9ab6921f80a5f69f1253ef8c3108b043866a7cb264ce117e48b0d4f49f1f9dbb58119106cca1e1fb0504cc78e95d9be7abd319a82870c32fef33e7a17b335089ae2710d83ed0431206873e88f4da58eeb66fce64e224fb7b6cc400451c03e47cfdd37aaa2daac2e1393ea54400f26cf9ccdc23dfb15d7659eec2690a6cfddaddd9cafd00a855018f6eb0cb68f9ce1bcdcf8e5aa40591670a53732aa77ecf9cb28de4758b02e46a87c6567dc6c9d5d21b92a9c0ab1e6f81f92636c9063479b33a28209af02998ad73af9a14ad5a98b5daa6c11e961405c3e3331ac952856ef8235e5f43fea1705d4fa2302548811feebfc56a72a673bc1f01f6fbfd6e6c448e6012e29da725d48307b9b60bc0025fe9ea3f2ee9cadd47e977a0c4b28fa16eaed494a2c36d4b7bfee2e2cffaeb792ffae5675b7e4c645b274300c830c5e80d00b190331cac243fe77303eaa460f884541e165b68d7ecb8ca9e764edf9a5fb9baa21428c5f694c77b1ec9406b33a57c2472173b5f1719881d4c2bc937d43d1f388ed07d9d653a3156b47bc38ac58fefa016f4761b23c3cf5e51578586786aad5e899a88f3e1cbcdd86daba25352fd64ebf8c30b23d9a1fda5cda5e6c8f26f6661a8f1ac19ba23d8e1f09c681c273390c2e212744b3bd9d9ff9e40caaca8ed44622688c80689ab834e349f731a85b12bfb509382319553817553d7f70d1285cd51f0df281400251b40fdd18c53315912442e3f45269adfd6672fcef61dd7bf1bbac8496e05490ee6f1765a4bc1641eaa8bccf73d76893eb33e4058b2cc3d9890183240a2656f6cac742f79a5bf80c27a5c16a8e899d1cd6a9945b24f7894bb4ca3853013ec4b8189001b6161c6db3bdb8f0fb2af9ab15e2ae3ab0e93ecca26be7e150ddcce0e9bffe1ff42308e8a6fa114a251b66d1c993ddf0f705180d4000be76cc17b69798bc6af6396af8a2ce654a8dd4841895dddba63861afab01ae85cd9e11add46ca7c872273ea401a0047e88b500007b821e686706efc47d939a48cac45cf26566a33360b03d32c6ee3d224f61cdd5e03e0117808d7636adaff092be20b50f2ff638796158106e8d8036fa8a2fc1c2139636d13d91086ed4b672db006b0d1a559261fb2c209fd1d4cb1a9da55cea93513907ad39cb78b5d7010895d3c6f8647013ce1896e51c4c7e1464e4c23d828e541259e0b73fd8674d1593c4e976f77a0669f42ad098ef4ba51afb2e6a6c1fbd324bdbe9978eeab06171cf2f4e1e7dea9ca5bb5f50c6e65beca40b3c074b899c8db3dfc53d3c3e2a82e93fbbde22a8e987a2d35e90ee72ddb0151098806e12179fe80e35df07382a876b1cfa0056396fa08fb3b4b4dc57d8dc2b95d6728b110cffb5f73fc5a97b64dc590b15fb9cd64e351a31c4451993b87d11c9b164a8754ade0b299f2053dd30cb5b29ade2671c54b61303cab29e3150a4a882e9dfe493a6e2887c7ca42d915f4db2f9fba236b80c0f53ea8c5cb0e8cff924c9a3d526bc41775a0054cdf7fb550792d369389c8439cd3ff305537590b696fd1617c62a82c3574d0a2fd1c250bd9da90e5b27ab79d745602d29f3b47e82b2839755ed061698140007afc7ad0b81b67b67535e438cc61d2efdede4dab9c92f4f18eba2b183e4d7bdae1fd60272faac2edaa18e0fdf3aa515ce180f911f61b061ca2a55d6d76f4ba9ea404f212255c432d4d9a1dbac7180878b6afea229e54f07e55ac62047027cbc09a7e3f1e0cc11dc5d8de078d072a58aa1f27cc2720b3bdb47625b2a0bce2ac09338f0139d21ce3c3f8cf6456f176fc08abd1a191e1af479d29b95ad002b352aa214432e4770116b075291e587d1d7eb079d70c192fe88e9a492280176cfbc4f70113e28242693da9fe98d5eb9697e346882965101fdf3cd879b9019db5c1da4d1e47f9c374f1c179abf8a8a9685d08f9151c5e7a661d8b6db59eda8287eaee5fef807dd04e5fd8612cd5a09a2fe118414c5e37bd91a419fcc0a3f5b70da9a83a45d3ea688c68fd234653ea453c0fbaead92f958f7f829ae5a34fd7dfcda18225479dc581bfc96168601db150317e201de3973857a6dbbca8205b300c66e76e7b59c3d95b00f61813852fff16b0b22f116d34aaf47caaceafb6d303765ededf27ceaed903928809b6f8c9f6719f12cbc92652f22787dfe3a51db67ab9b186d5f5d15c984013ba6798daaa677960499b0a2e0f91ffb09159a42e1c4a98ae4344b86cb6e3c5d2cfca3e0b6a2b003364872efbb0036730851c57e33d95b00eee13174e30f427bf4e6918a99f2d614b1d8e596bf39f6a8a63a38ee585e258519ffa4a157be046eea6e975132a978f80c0d406663c524bb742a93c1792eed2e3ede3b3da4e72d17c6ed1cfa27b57e73dabc4221adbd136ebf415e9ed9116532c1617af012cb301c5f1fbebd2d9fafd9ed37c7c66e54e4904bfdd1112de125fb4bfc4037059badc43daa44cb9553a975d923b031472d62952329955e5fc37d240c5151453dca4304af2be3487c68559a1ca8a6dd20103c97545f13162cb5c81dbfc870bdb2512b3e80de016929c1a7edd81dfcf57ec084f1b13926d2f75946f13bd2958a6e0ec49b4b12e592ada81fd03e77a68333b97449dc489df8fdb5e34e047de2ffd776d81d7d4f68431dac7d5def800166481d7091df28a3fddcb541e841049c03aced17dacf5d3294c32853066668c4bb1aaaabb30fdc25c38826a9b890ca2979b7d006209d79845321c40e2c59a04304c1f47f0d80e44b69641eebfdd45699caab1a5c9b65592836517a97f5e2de843516fa86e0ad1b250c6da87ff91064cf7189216284a7186127a8cad8ded5ccd34958bcefa981154e37f578d1cf9fea645fc360b3aa42e8faddc0782fc0068d790695a49303dd05ff7e833e71301be2b235494c596dfcfda2739937d5bbdf67fb6abf95927f866a7ada570d5687512adb29f1b56dbe267a99883b20f04e1af40c54974925be1458e560547138d014adea8e1c66b30281588ea809a19ec1beed7031d90455bd8f83d72b2d71c5da41e7f279bc06a8c83da882d7d8d0c917e81aec2a81ce7ac62de00fd68b32708bd4566b816742742cd7f5a1ee37d2ed259fd83e0d81824d22a65d3cc5cf2be9fbaccdb4f7cfa2d963724ed5fd237bdcb6dfb8b3e1ac35496e566ec139e4dcd1b7c6d151baedb538c17c86f8b16322f116b31bf8583a22f8690cd70bc0e95b3b8f86894bd03d95467680f07e93f8acfcf5c73438c8f913f389efaaef772cc827c1b3e6760bd11cf2302e0bf438f48fc1cc3977f96485e4d3a3cc743c9f34b993a50ec45971c7119077be33ea7e59659abaf793fa893c3a049c6a82f4b7cda8a099cf8eb3d979c2de6f74595af3dbe3bc89befe0444b0a879a84a5f397c66b8b62efbd6326533254e591efb46ff57930f5039a7635c02698e866bed5cb81e06d045f99991a24875414ec509be95e9bdce5a4421acc97a1287677db1de96558a0e6bfaa073cb248bb630fb6f027a5de67d70eb1a24c2b37d30565f0e12098dd1fa58b6228e590cf02b6b6d920553070f13a28ab1e41ac95e59a55f2c003d87d3117b9d7d088a48d4265148c86c6aa55c1ee4b6f6ba77f87e04f36937401bd2866ae320c3a4a66ab4734a4362399e21eadeaa800d174612ff748e9f980939f985c2d40a98edaf074535c8330f2d597ee825a58394624eb95ec541aa6bd1db2e92b60ed3dc0696b27cdc93e5b0628b2c58311c5867fbe72ad427e323b45ba0bb8c8800d3616f6d82f26c0907ea1acaaae6840d20cbe9c685911652fee04e16038a4c9e0dce50f9a431df471ab32bb36d10d98aa294e98b458283555eb5014e977eb625ac1946e3b90e51e05046c67b2f1726e0f3bb88270f9ad80c5fcd1597736156462b84f3d21a17ad700fa8af19646fbc826f0e624e41e6fe9698e215c248b7d8ff18e6aa9dfe48178c1d0e0e7200996c3a53477becc04aabb73d0804d63e0d7d15b7d9b906b2e9ea9d79cd52d91fe5b557d682a47ca2928e2a5d21bc207c0cdedcb6eb9476efe1df7bf5f338a652c3034a5c5c73577da929bede0c76ae5f6bdd3e871f7dd21d116ff87cb8b2ef9f034cc67feb1a76b6822a98877caecaf6ec13daa5e6896fb456e7a9ea1f619ddd768d057696130a6fea52bdacb22f02a4f0ab3dc1b6305ae2644a374acbc6be3f3f5cd57da49712c7c7448f5d5ec6704e3fd44447fb828fe1c7bd9cc210ce660344fd7a6ad5d7257e48530ac701b1b4fd77cb01a2c76d520582070fb0a0ea1d6e4a7f4052cafb8815c064b1a6142c4f5416f831022ff89f00c2282fa607794de3a1f56e30729a1ce226820634ab8c36f476afce0381b0622281f9937eadb9439b42fd168abf00e1253a3ac8a35ec1f6cbc54ad8aba052e5822da8fc090915906a6752b027eb767aae08c5b26b7d70b6bef9e0ad5e915a036d595d672690bdfd8dac9805d68f9158f09709a7217a1ca87a9f3768189873cb940bccbf1779b1ba601f817effe14e019271ca509b1eff08c5cad0c848fe3af4376f0aa2977b2ea2e739c5fda172b893bc72c38ca33c03b6ec535394e6c6de02531ad84ec2654e5a8818c04499e2478a3c734436507d26e5e4ce76ce867b5be58cbe6e4c0552b5837f94ebdc577eb78b4d2205bf1fac31916b6714deb0781f1c9c7ca7b2c5075cac2e110a23ef3455f6aa33ffa14afc48165fd5f3e09c062d3308e324dac335831caed2356618384d090dea5e0bd1c9d0d4d2d4dd18626acab8e2a47e00ad796378c7c4bbf76ba6565c8ac952d78d60d75fcb88af0ebf0784fbd293a8c790153292aa378b2a7b20bcadb19b22c7c816ac2c2656869466676d4ba9737c7653ab32da8ce5cee35117d09f6461e77c0fbff306bb8df8dab71df643f829adb5543ace9cf5eaf61cabee0fb5c911521a5761ca7fa33162ac158b00e09ec15a76524ce3a4a85597b78afe1ba821d577e24b7ddf9be985553f80187d9e6ebf23b7e1cd04066fb42837e20b116b3e4ccc8c5c4c8d823027ead25894c6953205f3efe83d76244121139840bb49509d1b93ac2b1f0f034ebaa6cac5f6ff8afb668e14eefc6189af7ce66cd70437d2ce52ed19cb2a8bf3eb833e2c84ea9af591048550c722605b61c2369303d6808d09bc12dd68a85f10745c2b790ba1107d020d281934b092e112f520c8085f9e0591bb9c5ff7101d7aa5bbafd7a0bef1d4c211a17f48b9dbaf67c26dfa209c94910620baa4bd1f3bea3b4f3afddf9185fad3e303d191b58ca16c0870c9f055764ec5aca7cc434004b6a740c4f61874e6cdeff464e46a0154f123651bacfebcfbaa733327289f40b1e04008532de7d6701bd06ae697c178e8754042511dc801c5c56afcb4b0a54944b4072711bfc3730465602eff8c4c08c48a7928192be752e771f42cdab4a27bec5bc31c565df0260d9ec29b01277dca58310d1a976cbbe6d83d775c62d281a10468ad3aee95e4e21c68fb15eed01eb1927b65fe7950f773915b15ed6d517efefa7cfd708c6f0a20839dc15ef7f41a262ff337cfb2f5f75c3327a40f2cb4cefb5537ffc672d2073c061e200b1c64176ee3ea0bfa1e0cb2b93b3c6789b21fa1516d84ee1ca204748dadee707ddcd59d5922be2318da9da835fee66c75601103f5531bef15c51351c5b33e81b01cfe96df866a2997ce8a29869a6c9f78313149b2c1e579e7e1a0806c3dcb39f1da98fc5a017659a26391a69efcb9fa58a56c67aeef5809d3b36b5febf33000b9472754adc44f3cfaee96b6c01a57fee593c7c27410e10d161f1317bb85bc264f1f2d4886a7284026e940bda6618e41374065d342188b8f6aa385096c1d317f5c084c2706885522c43dc9cebbc27d75336dcbdda519011c958a75d57a242f399e6a843578435571e3e3650c91d1a2c31b4a6a0d5ca373a61a357cbeeb9bfbf6ca2459f91b5b3ee9442e10ed29d8de85f2312ca053dd01bfe007ab391246885790eae22d75f579984495ef9ef5f0ae330ffd60cca1e7ec6da293c1d1247eb83982549b8412a1f32702efe4b93a3c9266da9d92365cbc7ee13e323a89f86775447eda45a5781fde3d0ce76d88410ddc3c3e3b49c302bded0911156fa0fbe29812c8dd36e6403a1531564cacbce780816ee27b3e8b0a31d648424f79a4a019ea1014b5d2a7d8e46cd99ae79e2844946c92fec3641a08fd79e7019b9284c4071811783f58121f65e38f3ae1cc740caf322cb5952ec1e8cb99fa1110d76f2df215d858f4666fa7a28fbc3c81b9ea4f4389dbe931d9f92d69748de91a70f1828bcce36147a2d6c60f132a7262e998d91c58e82a6fed4d1f21a6b9ac8c2e4b28c2dca393910a5711d11a833d96dde3ab858061eefd8924459ea485e1515731cd76fd50e5d4ad46fce0c4ef86c1c6bb4eb96e0bd14fdcc038e40662748cd0c7652a1f219bdb6a082b932d309e63e05d502f0113af5a2ea2310a8aaa2cbd0df1fa1ef626f67d06b9078aa14c27f0ef9657c9adc018e8141e0e9eb3ba3b7c7efd9c4342ead80656ca40ff65e8845bf9c860209ec0a7477878aa444fdc04619ab22334633c1ef4209a21e7b598c30f774534e6cc60215caea384d350692eb79cebe71a774c695528a5cfc01cb3b7b321199a9fc074a421537a039df225ed291da0c59a4723cecd460bdf468a2ccac968964fe1492c746134457b6e10888bc19743384fee908ffa91f8ddcbfcd8ee423ed79266f1f254cd3eea9156a576bf4c11f039ea9c690629e508ef97b54d44373b1162e39f24febfc3a191fb84a86351086ed02a7f9b5252a63a0641bc0a931a16775bb6981884dd38ec0b1a2e255f19084e8ab00a329d3f7bc32822809220e5e4a9f64134c8d8de676c7b29acc9aacf652c563549c57d20d1e2edcce303e096500c5e96dc6f2ca840b762e34273456cd3909b2b7c5baa509e86b91338e6ec462e486a342800e083af265e6abb2fd2b4da37853c26ea8cb2aed99ac96e52ad71abaab4a2ec46c840aa37cdcf01eff74d7e77ce8875eee245984eb3562e1152a61136f04a494b367227ca26d8c005dd616d42b770bd28ad261fe5b2b2af14586e2eb1a30ff91d2ac01121a8f9829dd52282852b482ad1d4b2825271393de693fbb47c349bff5991d935794d325a228bff88b0254d72fc9ced0604d483864164926260c9be42a9ea6993fa4a4a8fe4ab3fc942db956eba46cc0b289276d5f50846645434ddab48fbe9002ffd432d86eed69adc0a0d3317c428dfcdb1f4b5b32368c38df73cf2d37497c93d5ed303153cff4ed180387cfed43d52ad5f6d326fdbe3d2d38a00b14786e9c032dfdcd24348102f608454f006845e2e595c86564efa79a19a33aab54720c5c1ee342c2852a8aa9621c63ea94bf9e2f64e168f876384e5d381e1332a02123fd340c93800686cb1835d0d05566c1ff3b7e387a768439d0f39c23255b0a11215121f520a272cce175e791f755bcef92c491a9d1795f0c69e0e560992b0095b86660580d6c24bc040e132448b31bd0390259f6708902ddb432df1a5d42993652e983526d89df292b062bdf1bc7d08e922e885f7889009a8d1b9f8dd2059c257f8d5c38df1e01e8a97fcd348e3a1de894af38c12de0be5954764e841093e63d00c0945edb33c12529739bda5f44f3f98104b53462ed8aeb771b7cd8bbe65f30e11cf8d1b1beb4c45cbbccb850e74ca7c0be95f24a5e38a0abf5fd8434b2c2a2a2e1865ac7e087348f071fd6829fa44c8ee62201966e7dff63d5660c3194231c884c1cd92e4fc8ca33f014a1a9f22d48dc230a7c71193f0f56b2997023d4de9d59516df53030e79af9fa731bdcbc93ac8a51ed9305a14bda93c7708a0f229520a153b34318d81c4425bbee91aa549c3b8f677fe70c92c1e9a2ba6e13023200b147d512d8a6bd5afc633b44cbc44bbde579ab65dd6959c6522b335650282a8b38e12635bfb93e1fe135e43fd5891692034f0c3eaa11f06e38e2be8ce51509af6e41250c50119e5540a4f53ff2d0624b807d8a658910a3562f5b292824841e504c9bb43e7de9d92a163115a2b5e9ba77a543f387c26bb7bd3284e33ce3bbab3d51203082af8fc4c64533d23fddc57f4ecc9ac1f5ae0fb70d21de43443af7b4f8eb595c3f3878ff2b934b9d81819a36b7e85ad70bdb5c47460e9654e90a4fc205078cb03370ed7f80a89932e9c0821331c54cfcd2e026c350bcb471934025c6f5511dbfb9de5133c7514c8778ed93ae8b598a9eff27acfae70a6c4fcc3b21ce358aae930027f69a16070dd363398f0a7f3b1002c5b417bbb2bf799b0f2d9a0e9ffebc702fa2cad83cde9dd551eed95fb6008e24fa98f8f42948447a3f757eb8cb2d16873dab5f8178584ed2f9698baa743052195752995c639b56528cbdcc70980e8e9705c12f5a17dc9bd013ba675c6eb0322fd97ffe54ec1efadef54ab4887c8cc7aed54be8d49d4c39338723c07f5bbc44e1c683c3f32d0ea8227da68ce0ae75ab666de020a9a4f9f3dc05da2d832f9f988497f5010c0b444ae744c04d07514f387ad89f97f93ee90e1ad992eca53eb1b3c722f35d4b76274ae2c89f09b8db51b72a450e2a807f9730258d7cdf3e16b9f9c174c4f95e634b221e9d14ed33f4a30760890200a46b662b1d9d173e1f9a17981e28b954f6f04b1546a8bb1609c8182d35e2fb95cb57b716bc7fd32e030b733e07c864cb057273a8ff8c101c6549c3219fd26ec8b206cf10e9d0db13b4bd85aaa144e7f360fc31a2f8d19045aa9ac14d11718e9894a13d97c10346f8a1a21aa1a959f54c12ddecbfe7d3647adcfe230432eea0281c186a12262ec44ba7d7edcd9e5ca5cc63d95458fe8023a1bd73da699509eebb1645b307b5a6ba031d362aa727272f5ff24229fed8def41e150c2c866f1c9308bf548f9af982a8a1720b3815197a97aca19b4b58cc97fe1444aeb142cb9eca6aff8dae264aa9499c8f62907949eff7e688151e03c74572a51830b5d1444c9a55382ec9dcd62a8af3e47464fd7a6d817d2cd82b42099a64994544d6f97bf875b9cec148bee2c7e1342baa11860d81437c7e1dc6c2fccebcd65669c44bd8edc08f5e07c379ff644439022b1a3204185ad43017326fdca48aa75cd011f2692b7a322988e7c651ea2800b0d3288f43df6078367f000e3c6ba63c769b55e3a869f86d8a9ce5f8df46baa5ac8a6e0624a5353fe89b55787d7481414ef7af0ae3f45faf0e43c32463fd9a07bbf1f66d8da22553dadb4de1206f6b0c0554959666e452692b1a306c6eae46bee4fc19ffa066b4d7fd4e3a991ff9098a827c2f9bfe71befab4fd3d32b6d633ccda151ccc765aad89fd912fb1a4838ef672b9243641780ecb013b06580f2198e6131df93dd500ec5ccf57af48288678db39ad1584da6e68784f4e42d13e199894f543209f20726abb114433afbccb606578b2f506d63086ed7896e5539cd5b468b4cc19f21b6dd6c83c97a35e11b4592b3e6e545fa45430a2e25b3e43517db305a61d1994e5819421c68d9511c97230df9e896c96813eac7cf1b7cc17eb7b3e3439aaad9146ffb6206181f94dcef63a1b7680ae8b5d2870307aa84ed887cd00f43c14c868b81cc17c21365660205fd5637bba7dc6bf4712a6777b66ffc7b9d53445b7f8520a457c76cca872175fbf4323f47888d6eed52aa4eeb96b1e29304a96f477ee6cfd2c30480813b2d4f6f42779b1fa5375a47d2da01c65e195bf0f1b0cb625d6885018e2b0e0e6dacae6e7d601e37f49a1abc287ee7df565172ce3adad142a0b5b48119df6ceefdb7fd96a018606700044d36e08ead544de2f57d9cf2dcb9b6dd9efe410094ebc90fd0158ac58fbb27a32e48a4a0354e617dc252baca9e1ad40a24dc11fe19a7a4852c527a73ff4de1798f3e9e258c111f117167c104337c5415182deb91e17f7d279c93b47c8a7510dbf596153c9bde2f6a19394812031c97cebd336f51f6e80ca66438d8b5794e498ccd370c96c2d7a61d2f96c783e2db1f4d466c936016f790e24af32e7bd218d9f606f6312ab8e37fa8f5643d49472e2d9670754e06fbd681a775bc286e02a96283f4fbe75afdf6cfdaa3fca8949d30e7ee5a3a4600696774afc07d6c677bc217c58c651e0103c68993bb1716a497cdf27163f99b3051ae161ff9628a4ecbf0b47accbc4e914da091263de3070e6dcfc6c7e0a0b9a03b631436d7d5c7f687e901d442d0473ee1f77d33d7acd7a67bf3632f2be9bf8e4793209d89c57d7349814f0f8dd06955b6f8cffaf9bbac8ff07bf5e1b55f1af5cd775036c48d93a7b8cc6ab2b41d4d199af44bec3a3961c36b26b058e1057f55ad3eb3cbda20c640d7a063b5c6278922876430e14a8d05de294903d56fbc1b60d9f70c8a8c91b91938e264fdbefbd03c7b061cccc08eb3c05478b7c3770b76f856b72e17391afa34901fd23b969ec58bebf1a858679722ce2bb28b7a10499a340e09618e8e596eccbc9de6fe86150f4279036b6328a08ea32c97037b29de54a53b8048e6ba8ab18b7a6a82a83e3541176c4567629a2eed0ec04001590bfa34b2ca9c8e2bf6a816a2d1c1d27ab0668852facc29bebd11bde4f1763b989c13f05a9a99720af54a5305548ad48243c5a82b2229aa14835d29a40f3728b37ed6c6fa9a3a65dd11f19abad6f8b70791512b9cf866ca992d6694598d79e48a974367fcb9ae1fb6253cd684f11411fda214b55e83e292851de2a780049891c538bf7d168513caf0d007a7474e920312b5f286e78f9d9bf27e530834d9c93997583ec595ad28b86b7860c295b3469336b85e6f18ae84809e9bcc35af727a8cd7baee829ac011d5e550f701eb1ecd3d4386267a7c53981b8de14626e3579582e5dd980017d0f3f2d26dad9d9a84490176e9eccc64730012cef8d457514129ef9cf1e1760f67f14e5ac71996ddd2e2fa9e3118a4605ce7aeebaa44744cfe19891527bc45b99d774899b93e264e763e55039e30f784590e6b81364863aaca4d2d3e9b541c0f8953fd6c5cdbd0bdc764311588f49767bc75be216994aa89f00108d02d7618a8fcb5bb376ac46a52494af3a3c2d1bd8761edc0a225f3270cdac4ce8e68838940859c0a73fda2c7a20097321ae3810074e90669e3022fb113ac1e620b4ef54e51d563354285db278e4e704e80c2cdeba9864997cf972a0c33fefb1c5fcc9c6049c5e62c902180ac701ad54ff7933185509316ce941ebfe53743b722c0cbc723884af3e14d743d134980f8b79702a0233c924b86a7d96e063d1916d2624b393ebfde6bbad6ea7457cdfce942b173de391109961b74df3343169ac589ce02814747066d869149e9690982a6613a5bd0582b42b66dd50939ac187f067d4a16085db13c9bee3453c20de9103dd28374551c57974441330fdf58b21f2183e07bced622aa8e82d7a3dc8ada069c2a44d223591d54d5aee74924ae027aa0c2206fd8ce91ec182b6f29604b221562d80c1fe712a343bbf176d546686dbbdf9ab13949b85f630434bdfd5551f546ba9b5b431a046029a0cdaed7d5593f4be61bfcc6e4fbc6eb25dc7c983a32e90b15c95a8094d6cba72dfce235a1b80b8ee641f0be3a1d2bed0d55357ebde9a27511cd55054e7ee1848b95373c075ae357ba4e56fbce8152d2ac87941ff53fd2654cd6bd7749ebca1e4f6e9a31cddb3ed0c89432888c895c6d67c342a2e45fe7c69e44a33df6ea6f8f08662e3d4e9ece3978faa14aa246d102c3e1f716f9a7ae108d1a1136e559b2beaf8908c885344a60d270c7f9f5543fc9a01090f1cd9d45b280f4247ba16feb33253f858e26dff96ac7d5b53f708ec242970b2055f7ceac55b2cc0571db9dab5ffe76ecc5b7eb4b82b04755825a76ffdaf5563ab540545c181ff7c7b0eb6c5474649420176f901289d1168e5fb8a4cda90d1c318f8077344858c2a037c0c3f22c5bcf8aac0bd54cb61f5cedac8d333ac5fa71dd57146483cf498e2cbd49a1aa5a715469540400b0546f32dd78963043bca41be0d490659e179be18e2b8de3d42fe8ce7399ceaa209e6d2a5f0c426fa40b3e36a50447b5e489d704f266a7a73ca9ae7a121beb7c837c0889370cfb8dd7dbcaaa7a7e8f0f48738c2aeb1abdadd949d5fef31b97ceef7783630d551ed070d7a958f147d35bc8a9346335b69a52e2d31b19460c4abd4b450dc172e95313895642d26e29e5e8dd537a3c60348f56e3039613ab24dc701ac45e7b37c9e78cf81dfc6be9ac8d37d82a4e25c38e2518fc20d0cfbec8be302af306f777f0ad4049307e8588cfa30936c924047eac1d1050724ae73191dd99b9243557ca49c9e00aa6b6ad5e3de8c2e2001e7b4bccab09fa32c6a3a261cfeaae86a30272a36777106a8910881416edc950532cfb53e53c7e0833a0dda17e53f0bafcb6c7d5fbf3b37c291c5b04874dff73d51e5e23be5ac056e4435eeb1b3dfe3e77132ddc88f7f92ace9d976de645599924d9e62171ed11a68656bcc339ecce078b8503aa60e1d1aca8778739c1b557156a3919aa66821dfbbeff1c69b4f755d9ef05e7f4fedef6a1ce31f1bba52d00027b20872aef55c650a2be4e136a2d002c73c92900f1ff620f7eb45d5ec12a5c369879c75b6865464ea3e65e516c08c72062d45aed510090f736987ba1121a30b439d899290b28d6a29b3741f43c39ff55948ebbee010014a0859718f63b4beb0c704d5c1ccbd50e5d185298d26c9953e4fb113f7382737ad82a66da34a5ee7e1160063e0361e1dbf46f8e8269694c41952dfd741a6e7af4b0af9846cc3cee2211419637b86a9acd4ba4f1e94669bc8519ef27bd10e831135efac801fbbbdebbb4e4db34e1001d0cacc930f46f2538e59c3160814afde08057a98abcba34c3694511430be8c3d93e21c9728f48ede91032412dc6c9f2c8c501852a2a80385589a1b7e55cafc7be7f00ec5cb8d1b59169e44925bcd1dac2fbd1039a50789d0c52a5dad312316f2d2cbc0d8fd8929965b7d462c6b3133f825979413cebae3c4321583b4f767f090d8ef71ddff6662e9058edff3d6d68e8dca0745e42b4fc629edafc773fd264ae220acdea09240db2b83b4a859582cd62aea2b60e4bbe70fbe756bbace38b13dafc2431a539ee5752387e933de715514c8c4a7e5ce9006ee85e35e7ad0240be308a4484836bc24e8199baa5f86f56a1bcd099cef530ecadc86549ce78c0e267278f1a6488e6017a666289f15955321d938cc4324b1e7a5b9292efa4012f40e0366a91c8623ce110b44f07f70a1a3be4536c01982e9c8705f5995b2f2e2c9c6b4115a5a2ccbb41d1cc71dea64a5f7997384bbe3e737eeca31152812db2dd37a2784e23580ae7fcbf9ef4ab5200e8306830d449e97a4d4f0dd4139205f1d906eac2a84818d0e51decd935bd9a68f648cb2de6bc75831dedf32d82584546f4617dd4478204fb0bbd301034c837b15ed7c7054a4a25ab16e3c958878846ebc9d283575fc7181adc7f1b2c8682fd8780e432a6383d9031bd3a14995679502f1b08a3d43a6123589c956d3f5839e3f3cbb2e464bd711fa8a59001af7d505f682d45a5e840afefa4440fcc764c893a6d4ef8a1f06d04af1721ad374ab6de3832d4d83c35df7a515c3f53a22195a61c7262ec264fafeb607bbc70d6686335372cd0c57df593111f3c57f979824d177cee765c292a6ea0f6b94303f37122369208c11bc5944039b410e417979ae63fceab73a56a32f78fe868bd9730363470b0f71e1f7b9eb42948adcc3c3656bf6c448bd4409388fba29016ed72b425ec9ee3de68ef4c5d2c3c6deadf60228f20d17a8a52b5b54fb8698ec4a4d57915fc4343f2ff777b9cc60f38c6d65664786bc08f9f3ac1b31f654b55c4292ad11439d97bfea43e81bf9b1ef081bd70bbb11560404d63485fb9212ad1dc4d217d5505e533cb61a3924a4b553478678a30b08272ee5c2d461e05ada524ccc4dc52e249454a02e579bb70fe1ba4cfffd9a1292b6b18545d25472d9258afe7847145d3a5e4f8e267d15cadb195560552d8b219cfb4a1586893c51820c8bb5b1b777e26e8bd50fcde6c8f0311fb442866aa79311774ffd70993c83434e6953f24556241ee2c170838628d2d29a4938ce5cdd0261e15d79731d9199c4d9145f68dae26f76c0fd024f345cbb6f6b2f9cdef9fa502f7de5c4f7ee150a9e5ae3636608a140d7f9ffe34f98c5f43b7ab98cb9d04749a8690477f086293f1f83d0b4323859ee64802dd2fad979d95e8b00cf1637689d624ff7b18ed8fe5dbe170784e9c74d4ea77eaac05fdac0ab754d1cf5fab7b9478c50fa597ed41045820ee764554c57d0ba97c53f8cb8d45e707419fdccdca29a7544453f8a6042c99fa50114dbffe3556645a8d510b71f5e3e2bd474c3ea533262385bb8ef1d86ff2bfd943af8c6529803756757df974e477c10b4d67f861a87b05b0a59d4d4f157bc564982b90659d7c7e1afd48678217b71208d3583aa50dbe6e7717449b6a677e4b7edd5a2b23bf69f700b705236baf14bf738fb62755c25cfe15b1577a289dcf5170ce869af285996a849ded779bf311226ab9c32c22aa2498261d133bfd17c3fc7713647724f85555615e67d9c5b8dc0275ee1f90c0931a397f10d5d7d93b29b879a7dedfa01ae07097738b60295bfee1e3b8262d9409a1636137556d5f247fca68f27031d2bb9e93c1744a252b77e0d6e5356efa7ab26a4deafa72f3336e8046f3e1b367afb18a04187634839ad28f8aea3fdd6ee66d6967939b5a8b6bf31628a4688c6671ad73bbb2d2a3164dd3ee8e58fe87429bccc53002f8dd5e6b30cd52f91e335f0fbd7a0aa4b2e73c076ff5ca46067cde0546256795e5080a6b7a61a87a4b57508c8cc2b9975d5648dbdf723c1649554654b1bdde26f3a246ef5f26f248efa25bb94c11bd9de4d5d68e37e421b9d62ddd875915d8a6eefe1e0de52fbeffc6866775c1649e756575b091b76f4a6cb3ea5ef62d475c7c054fec42051066dbe39fa284ae743f88b18d3458798e261bf9d79d76475c4a5279cc749624a1368338cc84fe569f2e04ed2a8f18d3e0c413e36d2e2c40ffa30f4208bdb2ce5cafe038e54d178f9e980595640b404140ebae83ed0de7452c74fa0bbf9bfa7e4d90f32786030726cdabf08d3af18a9940c02f1e5901e27b4306ab7f5d8624ebb6cf9c70ed54eb714b42f26856a507a8894b2ea88f96f7f5b169b20ead2645913ee97ff4fcc77bf40f83b8319657f146187881dc2982df546241a1c6536236ab42431e7784d71eac6db480550b928ef1e545ca21c0c761eade8606cc96eb738970464181ad85967795714849bd5f33493977fbe8472bef70ae09c4faebd994b6733ce2b9bcfc0652cb5511893051d012ab179215ff7c30e5fb2df967457a0a5191096c9903c6494723e3dec3f777205866f7bb01b3a26331046016c3e7d5436bed7553b662258943e4c8512b0023a5b3ba6f0f64709eedd542fa0d65dddae0e5df1d7456a0f477c163ac09194d75f08c7211581a6c5dcc473f71eb67e720c312bfbf8d883b937b40a8a598d0c6e5be6c40a5b7da31267a240bdc968d6f29eea584d744d580757d11c68182b286b3cca12b5490333ce2ca0bbafe546d4bcb20d53797b7a7db5fb0c96ff08a37a1d4b8d45ac13e0bf70abec1287dafda1d9888f444199da9573409aad7c250abce09ee3320380a164d9c3a0f8cf0773c5c074a54bb914c40a1ecc68ce9bfc50f76e1c9072e9715c3a25a43ffc087bacf876c7f9a9767d152760c5525c271ca5c5c0cb5aaf3f4f291332943760262bdcda51ab98c2b0544a4544acab12c745c5fcfcbc35a039a90cb2559190338a25b22ee6e84e380f7eaac5806fd223440637535da459b7e0206cb489fe565362c341eaa684bc0cfb47f955f19cb610cf042487fa2c86a7a887e7fbc92f3694e4281a3c1925f35028e9a106cbcfc58049b733c1bef5627a8ed01f3afcc75133f62ced991c09d75a1e50cbd7498d0f9878020d834b052d1a1822b48fc2df8cc734460d21749acece6df698746c9427388b048e6e6daa895709af1fb712e88fa1d9ffe5bb0799049a65d303de429e683c96effda39cb47932d00ea7a078eb3cbb58ee7196ae3150f294634e3a4824ad6ee29957c32e8beea5cec7131242f64c4fb44d2eade24b0c20ec6eb63727fce210350cf6a6b1ef24fae7830a5d8c0a3bacadd20dd710338160e42a2a16d812c25080b5a7f083e46dc9cee34d2ae08d48a9fd77217aef37d7b90658da9d891aa069dfebdfc371c8a618ef8124a0fb2bcc37676abd067c0dbee34ff8af42cd9d98f8f12ff229d24d4dece1bf6abf863f91af6ea1068ce9518cad80f629192edec81e4b8406c9584544525a03f2120bee7a5b89a15b1d5b7c6019ad0d7401b72f195c7d8847375061b9af042b6159532a24ea4212e4bc5af08794fd12a7fa15fbe22093acc0b05632e11fcf4d7fe6e040d166486352358730cf234fff3b0e60eb4b425fcb9c4f1b184428da42dc86e6ccc65f278e55e36d514b0609e2eb1422b2d311d88269a5d72645999be88ebc6931e2ff1fecce5e51cfc7e0a34f7a1d602742b18bec3a5b6dae7c8401bf616306fdfaf6dc5296f0c16d06a6af0ecbd9a1eecfd75b2c4d13d57b038a3cb416d4efbb89fae338fa00504854f3954eebdd2c2ecabdf575b8bc5a2371d0f23c12a75db47c7822a6b1c7b89eccc1637bb010d835edfd3e5314d1a218747be4724136278a5839a30b753aa052f5adf7909279c009255a6fca539a9a3debfb7230cd41651bb635e294b9a9808181100c5623425b1868a63a37edec430d74b2da7f5b3b0388a27a3e7e41a6d0b3f08d4db05b453e765a747efa2054b21f2ab6952db1e1d932647582d32513e17d8a598dc97e8a0cffa7ecf0844b4821b257a9e6bf7bf66007dab06860dd34e04301ecf07c5259b0f7b82d1142169e6825b74c3fbd5239643a450d834d0eaf10a7ca1fc53bf36b7e69a7e180e08a7cca8676d69daf950b5b25a4e76240b488d3c5b939fed0e3360b76ba42c7985b382ff66a4cbf22e93117dda185599ff5c8bf478ea7b828aa70c7fd594d6b93a6f9a8d6671b6fe771024323139162f0ed38fe6ed1c953eebe3a372bf759429a1b2cab81b5df9b731a9a0b1ff1fc05f6bc6875707dabe8353e72c653ae7355ddad8798e320979da82e2e8560ecd828160b47a97fc47a18db6b404ee615397996e3884ebc53c44c619d13279ad21adaca9c2295915fadb1fec3115c99b3afb1b09204b54d1cc3099ad21f36d45171fe041359d1e3cd9cf8801134a54821ff81ade9414c94d81a9cc9b61fce65ce9f9c7fa65cb86cb8fbfd3a8237e2d598daf7de909a18b8fbda4b6873ec66c91333281039aba081c8de9fd973fb4a1d96c61425a61bcec2748d3aee6c35c6baf3af6443fc4d9fc755a051ee9e8320191bf3ad4c12a3ef89b0b32a905a245be61b30ce04863175835ed877a934eb14d7bca31e8de55cbd9c74db4fe43eba03c3bd88ed5a5030ecd9d6673cc556ca917ad335970bfb985abdc0085d244de7ac32bd2b720accc007b946a21910554a03e459e14c69f4f8f26a8267d900c4b7b0b873cd0add1a0ccb76f700d77dafa46b94a589129ee33b30288035d26095779e80c876407a59e6703c4ef047569c33064a671710280e766292387dfb17ab6827b8df67f7989aa3192d7bfa380e44bcd9f7f86456ad6141a6df1cab1412a39117d2308ef422bb7ce6cb0cb66407acc822d33d8e0d0d4c7f7c79b6c7002a3411435da2c0a562346b6a2033e4cd65e0c0a01c76fe428200553f41911db28c219d658698c7aa9df407d3bcee6dbccfaceb7a5155308ff9a66be336548bf65d40caebf1807b8609ef59219b80574348d7320472a1dbc370e6192366e162543e1c0ea17ff1a9258a4c375b3333d365bb67343e3b247ed0f53786c41fa80ef02eaec7e9bdc861adbee03ed67541f2e40ad82a4325709e83c2b10e023b43a38e7c2afee8fb7b7ff1ef93b9e60cf30135c7d303313f2524ad277a24ccfee56332f84a695f0978bb361ea46ca38c3cf934917030274654ac5a91dcfcdc0d381fbfd5d1224498681099ddd33990026ad6c0a418858c705fc00d161e82fe4da1c35c526c95578148ddce9f36c2dbf0e4185f578e545fa7bfc25988232371c00c3105b24f3677da73f3e09169f52e36f54ee6ce2bcd2dc5d10d1fbf2a8ec1371283f789878c7a40ec2ed299924d5117c4339ccc30409d86cb0eae4c59132525e0735099afbbc4e74392872185b2063db4c8e3102e7058682ebb790a6b1ae798f47a05dedf8b77769ea883904a253d1f9b9abdadbaebdc2f106467388506d83151532ada6dba5edc8c16693f63fe024658a0b3fa95adbc7d73f24292f341e1284eede62e0be032fee42943197eb79b85bb310b45a02ebf8910363f9c229bc4815ef61418e3316c69f0d2b88e982f1b99de49a93dcfb2f07d355ad94323f2bea3b55761d43997156fd471dcda38e2fcdd83a6b7014e71671d8bfeb17781400b55eead0d74301293f2e5e14a34627274db2afcc520bdfe7f001ad963e0d43093493d880e36c0632357d3ac4111aac77fb8b6317070cbac13bfb3c01e7a4b179ce069f534218935fd6349ed1615d4e1aafb807eaf60f945de58ce22677782a6fcf621041a404d4c9af8f075a11440b9c694db33e945dc05c6942b1266df2528b5ad64b0fff88919bc943c5feceae2b4d6f396344bf940230c933547e48ad7d9bc42c117e1eb964031d8bea9a201d3db6df94efeb901bdc6620ec7d64d0e416d004196181c0708cb951afbfe9f08b851eb9967c7bc6cea9fe17898b6e380fe080ccf670f3f4eaffe7481e5d64d356a6973efb5f210459f9225b5ae4524bd6d1befa4a36d5d366af865fad6e4939391ec14f98960531c62b1105bc1094b1e8538dde5d03fceebdbe61472c2ade1d201bcd96724a87b694b0e7b3bf1b1b5919f8111348588c66fbd5cd4c8633df1d9c4436541a4af273d60588a161ec73e08d82b9f156eb399adac84c6e730660b7ebc44d53008398fedc317d63f42844e3dc80b15d13f5ddf065783a2782870e00a67da0fc60da8e3cf4c9c20eaadcd99788b0740d16b20a32431cf3609e5346802fc58b3a771595e6797ba6316ed238934b27d87a89129c933d2e9e13c952a23ac9bd2014d298e011601badd19c71f48f97c680a132f4d5167e8fbb4c90db047b5abe544316e9945f26a397f6ba404aeea1dbd35056c045ca694852c5c0f65ff8ff2b7bf40b7b6d7fa8c6559cc4e4d8cd4a23e8ce59579ba442526ba0b6c20c752e6f6c04ecb9bc68291a1d51082b77a30b21f89213ffc1642315a56d504f5d100faf2e88b327def62413bae9c2e941991881e5cf63a87d88e9a59669ffe076262a0452b0b5a65ae056a3fc4229242b026f5502aa5a624b7ddaec213e43626c49b47b63c9b1a9d596357c8a5a08cd5ff428a04395c8871b50f2fa4ce813ba9903e2df9180a9f50806eda5881f106c392b5965e6212f822b5e66f5327ca9ee4ffee019fd364e7cbd74526bc53cd9081208b09b7fb1c8db1d401414978c73c5b609a4a411971e897fc20d8f8dcee69f5edd4bdb69e5fceed50875de503cb14616dce1eb750d1eff39ddc0f200a9f0ab47b4d97bf58f74422510e2039ee1dd51d45a18d6583dcf02d4ea4f5db07a5b4c90b48a1e3ae853fcd44e43511aa6ee6f933924428992de48caff4435e0d061d34c6d102f3420886204850236ad39d52f791fdb8700e040fbe3e969741ebde576bd0b90014dc9ce36708f51925a4bacf589af4687d0be80adff58a014b030dd096fa6235cbf42e5729d825f2e0cd7e71a8e9a258c07c3eb3b709b543d977dcc18c7d2fc0d2ba95bf363c9c04b4548c0b569b50821d45cb7128d4792c82ff5ddf7cec79db183a0e16b3230ffca39c2cc6bd3cae22a4aa5bcb130beecb0949fad5fe10f0f86624e5ea6a722a94f8857cce5d7d010c691b344148693046a1d63bc3a7d3885c26b39a70babf9a137aa84dcd26348e10c0b76fd7a951273c2213a4a8e568002807dc8d7b2143ecafb271111c539fbb030a321ea924957e2a64e3b05f61a544acd9a42c9699d2203aa862b7e6a5898e468d7bbea06bc9d0b964a76eb57c9164c668d519fd6b89e9e8592ca041b58a2db6258ba9faec97cc403c23d075bbc18f30312e1796b6edcf99d375513cf4d795ad190d7f85f507e530fa4152bbf85caf4c2eeffcf14a1133d330680a3e0ffb8b2ca90faa0a85cca3fee436546d1831790cfd0f823244111a6898193b0fb509abf33aa6de3a06b5ff9e73bc220e851c9ea1a44fb2e1bee7451e3c05095fbaf48701851f606ee4e86eb70cc68f8007666981e50fbd8b0ad2a38b01ced77db08996ceaf6295928f902082a9559f435ea36e8142692976c824df5854f524bde1d49cb10449e23d561cf46e894e87b8cf13f52c59264931ab340202e9969d75848341dc505e2cea9563654558b708d0608bb8ba12d0f7a61f7ad7d956814ef1840b014ae9c24c217c0838d410e124ef9ca7028f0602cf176dc80d6fdf510502ccdf291f0ccc2cbc9d637dfe303ef178861c0a23d3834752f5885d20ce654ba7622b7c5c6c952aa027199805f60685201110374e9cc6c08ada45e9c187e06fca4ba2fe7b2b31e611277722406438f486956af4510407675370c30d8dfdcc715dfdfaf5533aad95d99489e6d7599d0b06694d5e9f0eeae771b97b3c2c28cb72435a58196ad9fecddc3541368ded0823b3919a2e540b02495a6b6022a232c928faeeb268ab1855af10f3e2413f76698ea0bea0950ab47caa86e</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Password is required.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">[ENCRYPTED]今日、海を見た。もう怖くない。</summary>
    
    
    
    <category term="未分类" scheme="https://blog.ryaoknw.site/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/"/>
    
    
    <category term="杂谈" scheme="https://blog.ryaoknw.site/tags/%E6%9D%82%E8%B0%88/"/>
    
    <category term="private" scheme="https://blog.ryaoknw.site/tags/private/"/>
    
  </entry>
  
  <entry>
    <title>Raft论文学习</title>
    <link href="https://blog.ryaoknw.site/2023/10/2aa6034d3967/"/>
    <id>https://blog.ryaoknw.site/2023/10/2aa6034d3967/</id>
    <published>2023-10-26T15:23:05.000Z</published>
    <updated>2023-10-30T05:52:26.422Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Raft共识算法"><a href="#Raft共识算法" class="headerlink" title="Raft共识算法"></a>Raft共识算法</h1><p>为了想点好玩的毕设，重温了raft，以及看了个视频</p><h2 id="复制状态机"><a href="#复制状态机" class="headerlink" title="复制状态机"></a>复制状态机</h2><p>replicated state mechine</p><p>相同的初始状态+相同的输入&#x3D;相同的结束状态</p><p>leader将command通过封装到log entry中，将这些log entries复制到所有的follower节点，然后按照相同的顺序应用其中的command,得到相同的结束状态。</p><p>使用共识算法，就是为了实现复制状态机，各节点间通过共识算法来保证命令序列的一致，从而保持状态的一致。</p><h2 id="状态简化"><a href="#状态简化" class="headerlink" title="状态简化"></a>状态简化</h2><p>状态：leader,follower,candidate</p><p>相比起paxos,raft只需要关系状态的转换，而不是考虑状态的共存和相互影响</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018151718685.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018151718685.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018151718685"></p><p>时间被分割为任意长度的任期（term），任期用连续的整数标记</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018151842771.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018151842771.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018151842771"></p><h2 id="领导者选举"><a href="#领导者选举" class="headerlink" title="领导者选举"></a>领导者选举</h2><ul><li><p>心跳机制</p><p>如果存在leader,它会向所有follower周期性的发送心跳，如果follower在一段时间内没有收到心跳，它会认为系统中没有可用的leader，然后开始选举。</p><blockquote><p>领导人周期性的向所有跟随者发送心跳包（即不包含日志项内容的附加条目（AppendEntries） RPCs）来维持自己的权威</p></blockquote></li><li><p>选举机制</p><p>开始一个选举后，follower先增加自己的任期号，然后切换到candidate状态，然后投票给自己，并并行地对其他节点发送投票请求（RequestVote RPC）</p><p>选举会有三种结果</p><ol><li><p>获得了超过半数（N&#x2F;2+1）的票数，成为leader并开始发送heartbeat</p></li><li><p>其他节点赢得选举：收到一个leader的心跳，如果新leader的任期号不小于自己当前的任期号，就从candidate回到follower状态</p><p>由于leader先收到了超过半数的选票，可以某种程度上证明它是「更优」的节点。</p><blockquote><p>在等待投票的时候，候选人可能会从其他的服务器接收到声明它是领导人的附加条目（AppendEntries）RPC。如果这个领导人的任期号（包含在此次的 RPC中）不小于候选人当前的任期号，那么候选人会承认领导人合法并回到跟随者状态。 如果此次 RPC 中的任期号比自己小，那么候选人就会拒绝这次的 RPC 并且继续保持候选人状态。</p></blockquote></li><li><p>没有获胜者：每个candidate在自己的随机选举超时时间后增加任期号并开始新的一轮投票</p><p>为什么没有获胜者？：比如多个follower同时成为candidate，得票过于分散，没有任何一个candidate得票超过半数</p><blockquote><p>一个服务器最多会对一个任期号投出一张选票，按照先来先服务的原则</p></blockquote><p>随机选举超时时间：150~300ms （这个时间对于oltp系统来说还是比较长的）</p><blockquote><p><strong>随机选举超时时间的方法来确保很少会发生选票瓜分的情况，就算发生也能很快的解决</strong>。为了阻止选票起初就被瓜分，选举超时时间是从一个固定的区间（例如 150-300 毫秒）随机选择。这样可以把服务器都分散开以至于在大多数情况下只有一个服务器会选举超时；然后他赢得选举并在其他服务器超时之前发送心跳包。同样的机制被用在选票瓜分的情况下。每一个候选人在开始一次选举的时候会重置一个随机的选举超时时间，然后在超时时间内等待投票的结果；这样减少了在新的选举中另外的选票瓜分的可能性</p></blockquote></li></ol></li></ul><p><strong>请求投票（RequestVote）RPC</strong>：</p><p>Request  (arguments)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">term // 候选人的任期号</span><br><span class="line">candidateId // 请求选票的候选人的 ID</span><br><span class="line">lastLogIndex // 候选人的最后日志条目的索引值</span><br><span class="line">lastLogTerm  // 候选人最后日志条目的任期号</span><br></pre></td></tr></table></figure><p>Response  (results)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">term // 当前任期号，以便于候选人去更新自己的任期号</span><br><span class="line">voteGranted// 候选人赢得了此张选票时为真</span><br></pre></td></tr></table></figure><h2 id="日志复制"><a href="#日志复制" class="headerlink" title="日志复制"></a>日志复制</h2><p>leader被选举后，为客户端提供服务</p><p>client如何找到leader的节点：</p><ol><li><p>节点是leader：直接提供服务</p></li><li><p>节点不是leader：节点通过心跳得到leader的id</p></li><li><p>节点无相应：去找另一个节点</p></li></ol><p>leader接收到client的指令后，将指令作为一个新的日志条目，附加到日志中</p><p>一条日志需要具有三个信息：</p><ol><li><p>状态机指令：y&lt;-1</p></li><li><p>任期，leader的term：可以用于检测日志副本的不一致情况，判定节点状态。</p></li><li><p>日志号log index（日志索引）：递增</p></li></ol><p>日志号和任期号才能唯一确定一条日志。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018155529506.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018155529506.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018155529506"></p><p>leader并行发送AppendEntries RPC给follower，follower复制该日志条目，当条目被半数以上的follower复制后，leader就可以在本地执行该指令并把结果给client</p><p>本地指令指令，也就是leader应用日志和状态机，称作<strong>提交</strong>（图中可以提交的日志是7）</p><p>为了保证所有节点的日志都是完整且顺序一致的：</p><ol><li><p>follower缓慢：leader重复尝试重发</p><blockquote><p>如果跟随者崩溃或者运行缓慢，再或者网络丢包，领导人会不断的重复尝试附加日志条目 RPCs （<strong>哪怕已经回复了client</strong>）直到所有的跟随者都最终存储了所有的日志条目</p></blockquote></li><li><p>follower宕机：follower崩溃后恢复，raft的追加条目<strong>一致性检查</strong>生效，保证follower能按照顺序恢复崩溃后的缺失的日志</p><p>一致性检查：leader会在追加条目rpc中放入前一个日志条目的索引和任期号，如果follower在它的日志中找不到前一个日志，那它就会拒绝该日志，leader受到拒绝后，会发送前一个日志条目，直到发送了follower缺失的第一个条目。</p><p><strong>如果两个日志在某一相同索引位置日志条目的任期号相同，那么我们就认为这两个日志从头到该索引位置之间的内容完全一致</strong></p></li><li><p>leader宕机：崩溃的leader可能存在已经复制到了部分follower但是未提交的日志，而新选举出来的leader并不存在这些日志。</p><p>leader会强制follower复制它的日志来解决不一致的问题，这意味着follower中与leader冲突的日志会新leader的条目被覆盖，因为没有提交，所以不影响外部的一致性。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018163043684.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018163043684.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018163043684"></p></li></ol><p>AppendEntries RPC:</p><p>Request  (arguments)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">term // 候选人的任期号</span><br><span class="line">leaderId // 领导人 ID 因此跟随者可以对客户端进行重定向（译者注：跟随者根据领导人 ID 把客户端的请求重定向到领导人，比如有时客户端把请求发给了跟随者而不是领导人）</span><br><span class="line">prevLogIndex // 紧邻新日志条目之前的那个日志条目的索引</span><br><span class="line">prevLogTerm // 紧邻新日志条目之前的那个日志条目的任期</span><br><span class="line">entries[] // 需要被保存的日志条目（被当做心跳使用时，则日志条目内容为空；为了提高效率可能一次性发送多个）</span><br><span class="line">leaderCommit // 领导人的已知已提交的最高的日志条目的索引</span><br></pre></td></tr></table></figure><p>Response  (results)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">term // 当前任期号，以便于候选人去更新自己的任期号</span><br><span class="line">success// 如果跟随者所含有的条目和 prevLogIndex 以及 prevLogTerm 匹配上了，则为 true</span><br></pre></td></tr></table></figure><p>对于follower宕机时的优化：</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018162519179.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018162519179.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018162519179"></p><h2 id="安全性"><a href="#安全性" class="headerlink" title="安全性"></a>安全性</h2><ul><li><p>选举限制</p><p>如果一个follower落后了leader的若干日志，它依旧可能当选leader,在当选后就不会补上缺失的日志部分，因此需要限制保证leader一定包含了之前各任期所有的被提交的日志条目</p><p>在RequestVote RPC中，如果投票者自己的日志比candidate的还新，那他就会拒绝该投票请求</p><ol><li>如果日志任期号不同，任期号大的更新</li><li>如果任期号相同，日志号大的更新</li></ol><p>提交：在AppendEntries中，follower可以通过leaderCommit确定自己应该提交到哪个日志</p></li></ul><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018170626734.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018170626734.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018170626734"></p><p>事实上，在leader提交后，并返回客户端success后，但follower还没提交时，也就是leaderCommit还没给大多数的follower，在这一个心跳内的时间内，leader挂了，这个时候就会出现不一致的情况。</p><p>应用可以设置一个集群提交的概念，在集群中超过半数的节点提交后，才认为集群提交完成（复杂的场景在precolator事务模型）</p><p>leader可以通过AppendEntries RPC中的success判断这个follower是否完成了提交</p><p>新leader是具有老leader的日志的，老日志在新leader中可能还没有提交，新leader会将这个日志复制给所有的follower,但它不会提交这个日志，上图中，日志二会被复制到集群的大多数节点，但它作为一个之前任期内的日志不应该被提交。</p><blockquote><p>图 8：如图的时间序列展示了为什么领导人无法决定对老任期号的日志条目进行提交。在 (a) 中，S1 是领导人，部分的(跟随者)复制了索引位置 2 的日志条目。在 (b) 中，S1 崩溃了，然后 S5 在任期 3 里通过 S3、S4 和自己的选票赢得选举，然后从客户端接收了一条不一样的日志条目放在了索引 2 处。然后到 (c)，S5 又崩溃了；S1 重新启动，选举成功，开始复制日志。在这时，来自任期 2 的那条日志已经被复制到了集群中的大多数机器上，但是还没有被提交。如果 S1 在 (d) 中又崩溃了，S5 可以重新被选举成功（通过来自 S2，S3 和 S4 的选票），然后覆盖了他们在索引 2 处的日志。反之，如果在崩溃之前，S1 把自己主导的新任期里产生的日志条目复制到了大多数机器上，就如 (e) 中那样，那么在后面任期里面这些新的日志条目就会被提交（因为 S5 就不可能选举成功）。 这样在同一时刻就同时保证了，之前的所有老的日志条目就会被提交。</p></blockquote><blockquote><p>为了避免这种情况，<strong>Raft 永远不会通过计算副本数目的方式去提交一个之前任期内的日志条目</strong></p></blockquote><ul><li><p>时间与可用性</p><p>广播时间（broadcastTime） &lt;&lt; 选举超时时间（electionTimeout） &lt;&lt; 平均故障间隔时间（MTBF）</p><blockquote><p>在这个不等式中，广播时间指的是从一个服务器并行的发送 RPCs 给集群中的其他服务器并接收响应的平均时间；选举超时时间就是在 5.2 节中介绍的选举的超时时间限制；然后平均故障间隔时间就是对于一台服务器而言，两次故障之间的平均时间。广播时间必须比选举超时时间小一个量级，这样领导人才能够发送稳定的心跳消息来阻止跟随者开始进入选举状态；通过随机化选举超时时间的方法，这个不等式也使得选票瓜分的情况变得不可能。选举超时时间应该要比平均故障间隔时间小上几个数量级，这样整个系统才能稳定的运行。当领导人崩溃后，整个系统会大约相当于选举超时的时间里不可用；我们希望这种情况在整个系统的运行中很少出现。</p></blockquote></li></ul><h2 id="集群成员变化"><a href="#集群成员变化" class="headerlink" title="集群成员变化"></a>集群成员变化</h2><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018194820342.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018194820342.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018194820342"></p><p>为了让配置修改机制能够安全，那么在转换的过程中不能够存在任何时间点使得两个领导人在同一个任期里同时被选举成功</p><p>任何服务器直接从旧的配置直接转换到新的配置的方案都是不安全的。一次性原子地转换所有服务器是不可能的。</p><p>为了让配置修改机制能够安全，那么在转换的过程中不能够存在任何时间点使得两个领导人在同一个任期里同时被选举成功。：<strong>脑裂问题</strong></p><p>配置采用两阶段的方法，先切换到一个过度的配置，称为<strong>联合一致</strong>（<em>joint consensus</em>）</p><p>第一阶段，leader发起$C_{old,new}$。这时leader崩溃，集群依旧可以按照老配置来选出新leader，新rpc在旧配置中都达到大多数就可以生效</p><p>当达到大多数后，leader提交$C_{old,new}$，集群进入联合一致，这时，新rpc在新旧两个配置中都达到大多数才可以生效</p><p>第二阶段，leader发起$C_{new}$，使集群进入新配置状态。这时，新rpc在新配置中都达到大多数就可以生效。</p><p>假设leader在发起$C_{new}$时崩溃，已经复制了$C_{new}$的节点会按照$C_{new}$进行选举，而没有复制$C_{new}$的节点会按照$C_{old}$或者$C_{old,new}$进行选举，这依旧能保证选举得到的leader至少是复制了$C_{old,new}$的节点，如果是$C_{old,new}$的节点，由于$C_{old,new}$已经提交，它依旧会发起$C_{new}$，使得节点最终达到$C_{new}$的配置</p><p>当缩减节点时，leader崩溃，由于复制了$C_{old,new}$没有复制$C_{new}$的节点必须要在两个配置中都达到大多数才能生效（选举和提交），因此选举得到的leader一定会是复制了$C_{new}$的节点。</p><p>联合一致可以让集群在配置转换的过程中依然响应客户端的请求，但是需要在两种配置中都达到大多数才能生效。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018194842620.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018194842620.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018194842620"></p><blockquote><p>一旦一个服务器将新的配置日志条目增加到它的日志中，他就会用这个配置来做出未来所有的决定（<strong>服务器总是使用最新的配置，无论他是否已经被提交</strong>）。这意味着领导人要使用 C-old,new 的规则来决定日志条目 C-old,new 什么时候需要被提交。如果领导人崩溃了，被选出来的新领导人可能是使用 C-old 配置也可能是 C-old,new 配置，这取决于赢得选举的候选人是否已经接收到了 C-old,new 配置。在任何情况下， C-new 配置在这一时期都不会单方面的做出决定。</p><p>一旦 C-old,new 被提交，那么无论是 C-old 还是 C-new，如果不经过另一个配置的允许都不能单独做出决定，并且<strong>领导人完全特性保证了只有拥有 C-old,new 日志条目的服务器才有可能被选举为领导人</strong>。这个时候，领导人创建一条关于 C-new 配置的日志条目并复制给集群就是安全的了。再者，每个服务器在见到新的配置的时候就会立即生效。当新的配置在 C-new 的规则下被提交，旧的配置就变得无关紧要，同时不使用新的配置的服务器就可以被关闭了。如图 11，C-old 和 C-new 没有任何机会同时做出单方面的决定；这保证了安全性。</p></blockquote><p>这种方案使得不会出现脑裂现象。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018201812966.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018201812966.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018201812966"></p><p>对于第一点，让未完成同步日志的节点不具有投票权，也不参与大多数的计数即可。如何判断</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018202413259.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018202413259.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018202413259"></p><p>这种方法又称为<strong>多节点变更</strong>，实际上边界情况很多，实现起来非常复杂，现在多使用<strong>单节点变更</strong></p><h2 id="日志压缩"><a href="#日志压缩" class="headerlink" title="日志压缩"></a>日志压缩</h2><p>快照是最简单的压缩方法。在快照系统中，整个系统的状态都以快照的形式写入到稳定的持久化存储中，然后到那个时间点之前的日志全部丢弃。</p><p>增量压缩的方法，例如日志清理或者日志结构合并树，都是可行的。这些方法每次只对一小部分数据进行操作，这样就分散了压缩的负载压力。首先，他们先选择一个已经积累的大量已经被删除或者被覆盖对象的区域，然后重写那个区域还活跃的对象，之后释放那个区域。和简单操作整个数据集合的快照相比，需要增加复杂的机制来实现。状态机可以实现 LSM tree 使用和快照相同的接口，但是日志清除方法就需要修改 Raft 了。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018215019467.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018215019467.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018215019467"></p><h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><p><strong>no-op</strong></p><p><img src="https://cdn.ryaoknw.site/picgo/v2-56ab97b584df30b7f8787307f82b5415_r.jpg" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/v2-56ab97b584df30b7f8787307f82b5415_r.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p><strong>在leader刚选举成功的时候，leader首先发送一个no-op log entry。从而保证之前term的log entry提交成功</strong>。并且通过no-op，新当选的leader可快速确认自己的<code>CommitIndex</code>，来保证系统迅速进入可读状态</p><ol><li><p><code>(a)</code>:S1是Term2的leader，选为主后，将no-op LogEntry复制到S1和S2之后crash。</p></li><li><p><code>(b)</code>:S5被S3、S4和S5选为Term3的leader，并只写入一条no-op LogEntry到本地后crash。</p></li><li><p><code>(c)</code>:S1被S1、S2和S3选为Term4的leader。</p></li><li><p>后面有两种可能:</p></li><li><ol><li><code>(c1)</code>:S1作为leader，继续做了以下几件事：<ol><li>写一条no-op LogEntry</li><li>在写no-op的过程中间接提交Term2的no-op，对S5而言，会覆盖Term3的no-op日志。</li><li>提交新的日志4</li><li>最终整个系统达成状态<code>(c2)</code>，所有的节点对日志达成一致</li></ol></li><li><code>(d2)</code>:S1写入一条no-op LogEntry之后就crash了。S5被S3、S4和S5选为Term5的leader。<ol><li>写一条no-op LogEntry</li><li>在no-op提交的过程中间接提交Term3提交的no-op，对S1、S2和S3而言，会覆盖不一致的日志。</li><li>提交新的日志3</li><li>最终整个系统达成状态<code>(d2)</code>，所有节点对日志达成一致。</li></ol></li></ol></li></ol><ul><li><p>引入no-op之前，如博士论文所述，包含value信息的LogEntry有可能被覆盖掉。</p></li><li><p>引入no-op之后，如果当前leader已经开始提交含有value信息的LogEntry，那么它一定将之前的LogEntry全部提交了，就算它crash了：</p><ul><li>系统也会选拥有最新最全日志的candidate为leader，比如上图，S5就不可能像之前一样成为leader</li><li>就算有日志覆盖，覆盖的也是no-op，或者没有复制到多数节点的LogEntry。不会是已经复制到多数节点的包含value的LogEntry。</li></ul></li></ul><p><strong>单一节点变更</strong>（single-server change）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018212550290.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018212550290.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018212550290"></p><p>这种方法保证了一次只能选出新配置或者旧配置的leader,而不会有两个leader,避免了脑裂问题</p><p>实际上这样也会遇到问题，正如上面的安全性问题一样，在边界情况下导致一个节点的已提交的变更日志被覆盖，但使用no-op就可以解决：<strong>新 leader 必须提交一条自己的 term 的 no-op 日志, 才允许接着变更日志</strong>。</p><p><strong>新节点日志同步</strong></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018214129954.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018214129954.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018214129954"></p><p>比如，在第一轮同步数据时，leader的最大数据索引为10，那么第一轮就同步10之前的数据。而在同步第一轮数据的同时，leader还能继续接收新的数据，假设当同步第一轮完毕时，最大数据索引变成了20，那么第二轮将继续同步从10到20的数据。以此类推。</p><p>这个同步的轮次并不能一直持续下去，一般会有一个限制的轮次数量，比如最多同步10轮。</p><p>之后再进行成员变更</p><p><strong>一致性读</strong></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018215405421.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018215405421.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018215405421"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018215418991.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018215418991.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018215418991"></p><p>对于最后一点，由于安全性，leader无法提交之前任期的日志，只能提交自己任期内产生的日志，所以需要加入no-op来提交自己任期的日志。安全性只保证了选举出来的leader具有已提交的所有日志，但是leader可能具有未提交的日志，如果这个日志不属于自己的任期，leader不能去提交它，leader也不能确定哪些日志到底被提交了（比如3），当发送no-op并成功提交no-op后，此时3一定被提交了，leader便可以返回结果给client</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018220117409.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018220117409.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018220117409"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018220948816.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018220948816.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018220948816"></p><p>事实上，分布式系统中，由于时钟偏移，full gc等原因，时钟是不可靠的，所以追求强一致性不建议省略一个rpc的时间。</p><p>对于允许读follower的应用，可以通过readIndex来让follower也能保证线性一致性。</p><p><strong>性能</strong></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018221522701.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018221522701.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018221522701"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20231018221716909.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20231018221716909.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20231018221716909"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Raft共识算法&quot;&gt;&lt;a href=&quot;#Raft共识算法&quot; class=&quot;headerlink&quot; title=&quot;Raft共识算法&quot;&gt;&lt;/a&gt;Raft共识算法&lt;/h1&gt;&lt;p&gt;为了想点好玩的毕设，重温了raft，以及看了个视频&lt;/p&gt;
&lt;h2 id=&quot;复制状态机&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="未分类" scheme="https://blog.ryaoknw.site/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/"/>
    
    
    <category term="分布式" scheme="https://blog.ryaoknw.site/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>言葉・为什么我要吹爆U149・偶像大师U149 第十一话分析</title>
    <link href="https://blog.ryaoknw.site/2023/7/3806e80c5edf/"/>
    <id>https://blog.ryaoknw.site/2023/7/3806e80c5edf/</id>
    <published>2023-07-31T13:30:35.000Z</published>
    <updated>2023-08-01T04:02:51.795Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>ep11的演出能让你在完全不了解前面的剧情的情况下看懂故事，而你只需要知道爱丽丝是u149偶像团的一员就行。</p><p>ep11完全是剧场版水平的节奏把控。</p><h2 id="EP10"><a href="#EP10" class="headerlink" title="EP10"></a>EP10</h2><p>在大家都说出自己的希望时，爱丽丝也举起了手，但是却不知道自己想要什么，陷入了迷茫。由此转入ep11的爱丽丝回。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731175829534.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731175829534.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731175829534"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731175859014.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731175859014.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731175859014"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731175929059.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731175929059.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731175929059"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731175944632.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731175944632.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731175944632"></p><h2 id="EP11"><a href="#EP11" class="headerlink" title="EP11"></a>EP11</h2><p>紧接ep1的分析。</p><p>开篇依旧是爱丽丝的梦境画面，这里的构图与第一话完全相同，有意在进行对比。</p><p>（第一话）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731174712800.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731174712800.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731174712800"></p><p>（第十一话）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731174623436.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731174623436.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731174623436"></p><p>此时的爱丽丝的心境与第一话时有了不同，爱丽丝的眼睛被完全遮住，她陷入了迷茫：“大人和小孩的区别，是什么？”（大人と子供の違いって、なに？）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731174814420.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731174814420.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731174814420"></p><p>爱丽丝认为，<strong>大人是不会像自己现在一样不够成熟的，是不会像自己现在一样陷入迷茫的</strong>。爱丽丝想成为“大人”，想把自己当成一个“大人”，所以她强制自己要足够的坚强，她不会向父母诉说自己的苦衷，这也导致了爱丽丝始终没有向父母说出自己真正的想法。爱丽丝足够的努力，她保持了优秀的成绩，每天努力的练习，但是在如今还是没有和“大人”一样坚强</p><p>第一话中爱丽丝捧起丝带，来到门前，时钟指向12，梦境结束。而在第12话中，爱丽丝一只手放下丝带，梦境中下起雨，然后画面借此切回现实。可以注意到这个构图很像雨伞的构造，由此切向挣着雨伞的爱丽丝，非常自然。这是非常经典的切镜方式（双城之战中全是）。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731175246641.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731175246641.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731175246641"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731175343077.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731175343077.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731175343077"></p><p>然后画面来到大人的酒局上，米内p的“梦”与其他人说的“梦”不是一回事</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731180811219.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731180811219.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731180811219"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731180905941.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731180905941.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731180905941"></p><p>肮脏的大人只是把小偶像们当成商品。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731181032442.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731181032442.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731181032442"></p><p>大人愚弄孩子，无视孩子们的梦想，米内p感到不高兴</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731181129680.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731181129680.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731181129680"></p><p>“那些孩子们的梦想是很认真的”，“我们大人凭什么自视甚高”，“一口一个小孩”，由此点出隐藏的后续一句话——大人と子供の違いって、なに？</p><p><strong>难道成熟的大人，就已经失去了梦想了吗？难道怀揣梦想的人，就无法变得成熟吗？大人和小孩的区别，是什么？</strong></p><p>（我现在才发现它通过标题写在画面中了，这说明我没有过度解读，以及这种方式太妙了）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731181551888.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731181551888.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731181551888"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731181606391.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731181606391.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731181606391"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731181619998.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731181619998.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731181619998"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731181842491.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731181842491.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731181842491"></p><p>后续转入小偶像的场景，大家怀着期待的眼神看着米内p，米内p虽然只能妥协“U149”的称呼，但还是要笑着对小偶像们宣布，这里也是非常细节的神态变化。</p><p><strong>ep10中大家写下的梦想在黑板中被擦去，而U149的字写在了上面，这个“U149”并不属于任何一个人的梦想。</strong></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731182350246.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731182350246.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731182350246"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731182421422.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731182421422.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731182421422"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731182526820.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731182526820.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731182526820"></p><p>被大人利用的不知情的小偶像们，也正是米内p用积极的行动才让小偶像没有在意这个事实。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731182632566.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731182632566.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731182632566"></p><p>这里与第一话的镜头对应，反映爱丽丝的情绪</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731182824264.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731182824264.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731182824264"></p><p>这里同样与第一话对应，第十一话爱丽丝没有开灯，情绪更加糟糕。</p><p>（第一话）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731183616613.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731183616613.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731183616613"></p><p>（第十一话）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731183643774.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731183643774.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731183643774"></p><p>然后画面给到米内p正在纠结于企划书。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731183905533.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731183905533.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731183905533"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731184003895.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731184003895.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731184003895"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731184019153.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731184019153.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731184019153"></p><p>米内p反复的删改文案，孩子们被删去，然后变为了大人。这里米内p还在为“U149”这件事而烦恼，他是从孩子成长为了大人，却没办法为孩子们把事情做好。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731184115129.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731184115129.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731184115129"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731184215796.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731184215796.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731184215796"></p><p>爱丽丝搜索升学相关的事情，镜头给到爱丽丝看向镜中的自己（与第一话对应）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731184522271.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731184522271.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731184522271"></p><p>爱丽丝需要和父母一起商量自己的事情，但是父母的房门紧闭，父母依旧在忙于工作</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731184745984.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731184745984.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731184745984"></p><p>（第十一话）这里与第一话的对比同样是光线由亮变为暗</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731184721287.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731184721287.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731184721287"></p><p>（第一话）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731184644501.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731184644501.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731184644501"></p><p>爱丽丝始终没有勇气去面对父母，镜头给到劳累工作的母亲，母亲关闭表格后，电脑桌面是爱丽丝的照片，父母也非常爱爱丽丝</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731185011106.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731185011106.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731185011106"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731185145560.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731185145560.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731185145560"></p><p>母亲看着爱丽丝的照片微笑，背景中墙上也挂着爱丽丝的照片</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731185158840.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731185158840.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731185158840"></p><p>爱丽丝关上门之前顿了一下，然后关上了门，这里体现爱丽丝的犹豫和逃避（停顿-&gt;犹豫，关上-&gt;逃避），爱丽丝期盼着父母能够主动的关心她</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731185406809.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731185406809.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731185406809"></p><p>随后画面来到训练室，镜头反复在谈论未来的其他成员与一直在训练的爱丽丝之间来回切换，这里有意表现爱丽丝的焦虑</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731185646687.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731185646687.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731185646687"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731185713872.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731185713872.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731185713872"></p><p>随后画面来到米内p和爱丽丝的面谈。不坦率的爱丽丝，和觉得自己不够成熟的米内p</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731185918104.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731185918104.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731185918104"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731185931953.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731185931953.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731185931953"></p><p>（这里的翻译应该是：橘真像个大人啊 橘さんは大人だな）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731190006990.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731190006990.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731190006990"></p><p>爱丽丝下定决心决定和父母谈一谈的点击发送，转场到米内p文案的点击</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731190532065.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731190532065.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731190532065"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731190607047.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731190607047.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731190607047"></p><p>画面在米内p和爱丽丝之间反复切换（交叉剪辑），两件事在同一时间线上进行，最终通过米内p收到爱丽丝的妈妈发来的消息，将双线汇聚到一起。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731190823699.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731190823699.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731190823699"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731190839978.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731190839978.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731190839978"></p><p>再次切到相同的镜头，通过光线表示情绪有所好转，但窗帘遮住面部是情绪始终为负面的一种表现方式。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731191014879.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731191014879.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731191014879"></p><p>同样的给到镜中的爱丽丝，但此时是眼瞳中映出的画面</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731191158164.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731191158164.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731191158164"></p><p>摘下蝴蝶发饰，对应第一话中的戴上发饰。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731191255838.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731191255838.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731191255838"></p><p>（第一话中照镜子然后微笑，戴上发饰）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731191400357.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731191400357.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731191400357"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731191440198.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731191440198.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731191440198"></p><p>爱丽丝进入梦境，同时本话正式抛出疑问：“大人と子供の違いってなに？”</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731200813688.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731200813688.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731200813688"></p><p>此时的爱丽丝给出的回答是：“大人，不会哭”</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731200947991.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731200947991.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731200947991"></p><p>随后与第一话相同，指针指向12，闹钟响起，爱丽丝醒来</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731201032794.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731201032794.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731201032794"></p><p>（这里给到爱丽丝起床的镜头，而不是像第一话一样在镜子中起床的镜头，或许没有实际意义）</p><p><img src="/./pictures/image-20230731201155918.png" class="lazyload" data-srcset="/./pictures/image-20230731201155918.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731201155918"></p><p>为了解答这个问题，动画先来回答下面的问题：“大人是什么？”。这里是从黑屏嵌字到黑屏逐渐透明化而转变为爱丽丝的两位“大人”的画面，非常带感。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731201110129.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731201110129.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731201110129"></p><p>乌云密布，即将下雨，而一直把自己当做“大人”的爱丽丝像个“孩子”一样逃离了面谈，走下台阶。（当然是走下台阶，而不是走上台阶）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731201615823.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731201615823.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731201615823"></p><p>随后进入in fact插入曲演出</p><p>连接现实的门的白线</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731201722920.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731201722920.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731201722920"></p><p>门打开</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731201815999.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731201815999.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731201815999"></p><p>被吸入现实</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731201836688.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731201836688.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731201836688"></p><p>现实世界（没有人了解 真正的我）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731201857219.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731201857219.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731201857219"></p><p>镜头处于远景，把爱丽丝放到画面右侧的一小部分，突出孤身一人</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731201942347.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731201942347.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731201942347"></p><p>爱丽丝的眼中的自己始终是被映出的自己，那真正的自己是什么？</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731202213795.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731202213795.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731202213795"></p><p>透过映像是没有面庞的大人，此时任性的爱丽丝不再作为“大人”</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731202247140.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731202247140.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731202247140"></p><p>由于这个歌曲（in fact）是在动画之前就有的，所以歌词不太能去与剧情做对应，而动画只是尽量的对歌词做了画面的对应，所以我也删去了一些对于画面的过度解读，只是指出一些有设计的地方。</p><p>雨后天晴再展开后续，对应后续情节走向（其实也不用暗示，或许这里只是单纯的雨后天晴）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731202725184.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731202725184.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731202725184"></p><p>爱丽丝来到了第十话中live的天台，哼起了偶像的歌</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731203000940.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731203000940.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731203000940"></p><p>爱丽丝为自己作为“孩子”的任性而道歉</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731203137131.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731203137131.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731203137131"></p><p>此处有很多画面也是给出水面的倒影，而不是直接给出画面（或许只是为了增加画面的层次和视觉效果）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731203608287.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731203608287.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731203608287"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731203632268.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731203632268.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731203632268"></p><p>米内p作为“大人”，表示<strong>大人也会有自己的梦想</strong></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731203703371.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731203703371.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731203703371"></p><p>爱丽丝不再作为“大人”，释放出属于“孩子”的任性，抱怨父母对自己不够关心。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731203900408.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731203900408.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731203900408"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731204218842.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731204218842.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731204218842"></p><p>此时，米内p想到了自己的无能为力，正如爱丽丝的父母一样，他们要忙于工作，没法给到爱丽丝足够的关心，这也是他们作为“大人”的无能为力。<strong>“大人”并不是爱丽丝所认为的那样坚强</strong>。<strong>“大人”也会流泪</strong>。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731204236607.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731204236607.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731204236607"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731204250088.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731204250088.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731204250088"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731204304750.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731204304750.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731204304750"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731204340586.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731204340586.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731204340586"></p><p>此处米内p的眼泪落下，爱丽丝瞳孔映出泪水，梦境中的露水映出爱丽丝</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731204421261.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731204421261.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731204421261"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731204532310.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731204532310.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731204532310"></p><p>爱丽丝向前迈进，一帧黑屏，梦境中爱丽丝站起</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731204600063.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731204600063.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731204600063"></p><p>露水中映出母亲工作的各种画面</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731204759563.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731204759563.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731204759563"></p><p>爱丽丝沿着白线向前追寻，露水中映出“大人”满满的艰辛，<strong>“大人”并没有那么坚强</strong>，大人也是有苦说不出的人</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731204830697.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731204830697.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731204830697"></p><p>在追寻的尽头，她看见了自己。此时，她收获了<strong>答案</strong>。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731204904065.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731204904065.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731204904065"></p><p>米内p询问爱丽丝想要成为什么样的“大人”</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731205247103.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731205247103.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731205247103"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731205259850.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731205259850.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731205259850"></p><p>大人和小孩，到底哪里不同呢？ </p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731205326902.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731205326902.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731205326902"></p><p>此时，画面给到爱丽丝小时的回忆，母亲的脸颊流着泪水，爱丽丝撒娇，母亲擦干泪笑着面对爱丽丝</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731205518245.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731205518245.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731205518245"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731205613082.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731205613082.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731205613082"></p><p>米内p擦干泪，谁说大人不会流泪的</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731205722931.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731205722931.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731205722931"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731205733181.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731205733181.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731205733181"></p><p>爱丽丝看见母亲，第一反应不是愧疚逃避，而是冲向母亲（在ep4中体验蹦极时，害怕时叫出“妈妈”）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731205819777.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731205819777.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731205819777"></p><p>米内p一个人黑灯坐着，望着白板上的u149，心里还是在纠结这个名字。米内p依旧在为自己不够作为一个“大人”一样能把一切都做好而自责</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731210054181.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731210054181.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731210054181"></p><p>随后到了第二天。这里与第一话的处理也完全相同，只是米内p在左边，爱丽丝在右边，两人位置相反。这次该轮到爱丽丝帮助米内p了</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731210132753.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731210132753.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731210132753"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731210209405.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731210209405.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731210209405"></p><p>相同的构图，但是仰望的是米内p，在台阶上的是爱丽丝</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731210338699.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731210338699.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731210338699"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731210359887.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731210359887.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731210359887"></p><p>“叫我爱丽丝就好”，爱丽丝放下了作为“大人”的想法，因为她已经得出了<strong>答案</strong></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731210435852.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731210435852.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731210435852"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731210548751.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731210548751.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731210548751"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731210600968.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731210600968.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731210600968"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731210614284.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731210614284.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731210614284"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731210628187.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731210628187.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731210628187"></p><p>“<strong>孩子和大人都是一样的，我是这么想的</strong>”，这就是爱丽丝的<strong>答案</strong>，这句话也完全消解了米内p的忧虑</p><p>孩子和大人都是一样的，爱丽丝认为不必去让自己作为一个“大人”，只要和大家一起闪耀，一个名字是无所谓的（即“橘”与“爱丽丝”，“U149”与其他更好的名字）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731210802165.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731210802165.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731210802165"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731210844736.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731210844736.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731210844736"></p><p>本话结束。</p><h2 id="后话"><a href="#后话" class="headerlink" title="后话"></a>后话</h2><p>爱丽丝生日快乐！</p><p>这就是学神的含金量！初次看完难以抑制自己的兴奋，这也是为什么我有动力写一个这么长的剧情演出分析。</p><p>简单的剧情，华丽的演出，为什么我喜欢以至于专门写一个分析呢，毕竟我最喜欢的剧场动画是少女歌剧（</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;ep11的演出能让你在完全不了解前面的剧情的情况下看懂故事，而你只需要知道爱丽丝是u149偶像团的一员就行。&lt;/p&gt;
&lt;p&gt;ep11完全是剧</summary>
      
    
    
    
    <category term="动画" scheme="https://blog.ryaoknw.site/categories/%E5%8A%A8%E7%94%BB/"/>
    
    
    <category term="动画" scheme="https://blog.ryaoknw.site/tags/%E5%8A%A8%E7%94%BB/"/>
    
  </entry>
  
  <entry>
    <title>言葉・为什么我要吹爆U149・偶像大师U149 第一话分析</title>
    <link href="https://blog.ryaoknw.site/2023/7/36da2f69d466/"/>
    <id>https://blog.ryaoknw.site/2023/7/36da2f69d466/</id>
    <published>2023-07-31T13:30:00.000Z</published>
    <updated>2023-08-01T04:02:14.825Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>作为偶像动画，一般都会聚焦在偶像团体的故事上，比如团队的组建、联系、演出、日常交流以及各自的矛盾等等，但U149给了大人的非常多的画面，有意的表现大人世界的虚伪，唯利是图，而失去了自己最初的热情等等（但也并没有对此极力的讽刺），这也是与传统偶像动画的不同之处。</p><p>ep1和ep11都是爱丽丝回，在分析ep11前，我想先详细分析ep1。</p><h2 id="EP1"><a href="#EP1" class="headerlink" title="EP1"></a>EP1</h2><p>动画开篇给到爱丽丝梦境的画面，这里的彩带连接大门，然后时间的指针指向12，代表现在的爱丽丝是12岁。这里的时钟有1-20的刻度，对应1-20岁（孩子到大人）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731162407876.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731162407876.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731162407876"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731162446622.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731162446622.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731162446622"></p><p>随后闹钟响起，爱丽丝醒来，这里并没有直接给爱丽丝镜头，而是镜子印出的爱丽丝，后续依旧在房间内依旧只会给到镜子印出的爱丽丝，而不是爱丽丝本身，有意让观众对爱丽丝的神态进行对比。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731162558050.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731162558050.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731162558050"></p><p>爱丽丝同学说“橘的成绩那么好，不用被家长说，真好啊”，而爱丽丝回答“并不是这样的”，这里爱丽丝是在表示自己并不觉得“不用被家长说”这件事真好。因此引起了同学的疑惑，但爱丽丝知道自己和她们说的不是一回事，于是否定</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731163549725.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731163549725.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731163549725"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731163640995.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731163640995.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731163640995"></p><p>爱丽丝离开时被同学询问是否是要去做偶像的工作，爱丽丝犹豫的给出肯定，这里也提前暗示了此时的爱丽丝并不是正式的偶像</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731163957032.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731163957032.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731163957032"></p><p>后续就是一大段大人职场的牢骚话，有对孩子的蔑视，有职场的上下级尊卑关系，有职场的甩锅</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731164222365.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731164222365.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731164222365"></p><p>这里满头大汗的米内p从阴影走到阳光下，非常经典且好用的用光线展现情绪变化的处理。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731164542944.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731164542944.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731164542944"></p><p>因此爱丽丝希望别人叫她“橘”</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731160552561.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731160552561.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731160552561"></p><p>镜头先给到米内p眼中的光，这是对工作的热情，然后转向社长的眼神。社长虽然也是虚伪的大人，给米内p画饼，但是这里可以看出社长也会因此感到愧疚。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731161420274.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731161420274.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731161420274"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731161513202.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731161513202.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731161513202"></p><p>爱丽丝训练完后一路小跑回到了家，但家里没有开灯，这说明爱丽丝的父母工作繁忙。这里镜头给出非常细节的爱丽丝的神情变化，然后再给到了透过鱼缸中的水的爱丽丝的神情，爱丽丝为父母不能陪伴自己而感到失落。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731165058628.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731165058628.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731165058628"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731165145571.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731165145571.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731165145571"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731160959535.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731160959535.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731160959535"></p><p>爱丽丝家里玄关处的镜头通常会给到鱼缸，而不是直接给爱丽丝，这在前面爱丽丝出门时也有体现，但我并没有看出用意。</p><p>但尽管父母经常不能陪伴自己，爱丽丝依然非常尊敬喜爱自己的父母，这里可以体现爱丽丝的懂事。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731161852555.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731161852555.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731161852555"></p><p>以及这里的后续也给到聊天中的“未读消息”，说明父母很忙</p><p>家里墙上全是爱丽丝的照片</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731165305866.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731165305866.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731165305866"></p><p>这里明显的提示监护人没有签名，说明了爱丽丝没有与父母商量过自己出道的事情，而是“在不影响学习就行”的程度上进行偶像活动。这里也能体现爱丽丝的懂事，即了解父母的付出，不想给他们带来更多的担忧。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731165701552.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731165701552.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731165701552"></p><p>爱丽丝来到了新环境，但有点内向，无法融入，所以无所事事，打开窗户又关上。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731165952986.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731165952986.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731165952986"></p><p>米莉亚看出了爱丽丝无法融入，于是引出话题。这里依旧是一个非常细致的神态变化。<del>（米莉亚麻麻！）</del></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731170123040.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731170123040.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731170123040"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731170154897.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731170154897.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731170154897"></p><p>然后晴主动的去问爱丽丝（小偶像们都太温柔了）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731170418475.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731170418475.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731170418475"></p><p>爱丽丝希望制作人靠谱，然后给到米内p下车赶路的镜头。后续米内p赶到，但是迟到了<del>（多么希望她们能指引我）</del></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731171026638.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731171026638.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731171026638"></p><p>爱丽丝觉得米内p态度不好，看不起小孩，于是很生气。然后觉得米内p很不负责，也不成熟，于是要去申请换制作人</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731171219558.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731171219558.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731171219558"></p><p>偶像大师经典报菜名环节，本家动画也有</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731171434960.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731171434960.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731171434960"></p><p>这里是给到米内p和爱丽丝并排，但是两人保持的非常远的距离，体现爱丽丝对米内p的不信任</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731171606916.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731171606916.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731171606916"></p><p>以及后续非常经典的视角偏移</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731171641817.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731171641817.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731171641817"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731171706305.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731171706305.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731171706305"></p><p>在短暂的聊天后，米内p发现自己与爱丽丝有共同的话题，冲到台阶上发表演说，而爱丽丝也因此对米内p产生信任</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731172107062.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731172107062.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731172107062"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731172120051.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731172120051.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731172120051"></p><p>这里完全相同的角度和构图对应了前面米内p眼中的光</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731172213633.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731172213633.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731172213633"></p><p>两人互动表明爱丽丝已经信任米内p</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731172426853.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731172426853.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731172426853"></p><p>然后，请欣赏非常炫酷的结尾部分动画！</p><p>又是经典的从阴影跳向阳光</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731172620511.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731172620511.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731172620511"></p><p>非常成年人的生活</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731173121245.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731173121245.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731173121245"></p><p>从米内p的歌衔接到爱丽丝的歌，表现大家对未来的憧憬。然后爱丽丝闭眼入睡，进入梦境（ED）</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230731173312216.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230731173312216.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230731173312216"></p><p>然后就是无敌神中神的ED，我可以看无数遍（</p><h2 id="后续推荐"><a href="#后续推荐" class="headerlink" title="后续推荐"></a>后续推荐</h2><p>如果你非常喜欢U149，可以去看看B站up主<strong>amuro1985</strong>非常专业的各话分析（目前只到第八话）</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;作为偶像动画，一般都会聚焦在偶像团体的故事上，比如团队的组建、联系、演出、日常交流以及各自的矛盾等等，但U149给了大人的非常多的画面，有意</summary>
      
    
    
    
    <category term="动画" scheme="https://blog.ryaoknw.site/categories/%E5%8A%A8%E7%94%BB/"/>
    
    
    <category term="动画" scheme="https://blog.ryaoknw.site/tags/%E5%8A%A8%E7%94%BB/"/>
    
  </entry>
  
  <entry>
    <title>2023年4月追番锐评</title>
    <link href="https://blog.ryaoknw.site/2023/7/5f5cff851208/"/>
    <id>https://blog.ryaoknw.site/2023/7/5f5cff851208/</id>
    <published>2023-07-30T06:16:50.000Z</published>
    <updated>2023-07-31T13:47:06.649Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>不是那么棒的四月，每周指望着U149活着。</p><p>实在没什么动力也没什么时间写，想着憋出一篇U149 ep11的分析，于是先顺手把4月的流水账记下。</p><h2 id="2023年4月"><a href="#2023年4月" class="headerlink" title="2023年4月"></a>2023年4月</h2><h3 id="天国大魔境"><a href="#天国大魔境" class="headerlink" title="天国大魔境"></a>天国大魔境</h3><p><img src="https://cdn.ryaoknw.site/picgo/20230730141110.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/20230730141110.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>star：8</p><p>或许我应该写一个长篇分析，因为它确实做的很好，但是这不是原创动画，我并没有看过原作，本季也并没有触及主线，实在不好写。动画中有非常多很有意思的设计（比如相对独立的五十岚海负责的第十话中女尊男卑的社会）</p><p>这是整个四月唯一真正精彩真正可以360度来吹的作品。</p><p>末世双线叙事一眼反乌托邦，一看就是要讲严肃叙事的动画。动画第一话就能看出制作水准，真流斩子所有打戏镜头都非常多样，作画质量极高，张数巨多。而在灾难中也不乏两人的日常场景，而且镜头非常多样化（与某霸权高下立判），日常的对话部分非常流畅和沉浸。（<strong>神中神的the异世界轻改<del>(学神限定)</del>也是通过这样的方式来为观众带来沉浸感，这也是它为何获得如此多的好评的重要原因之一</strong>）</p><p>第12话神中神中神。前面一系列的环境和真流的神态描写为斩子的遭遇做足了暗示。结尾部分行云流水的镜头语言，无限高的天花板，成熟到裂开的果实，一个人吃不完的热汤，将燃尽熄灭的蜡烛，手伸向外面的天空，一系列流畅的意识流镜头调动着观众的思考，也将观众的注意力从雷普这种会引起生理厌恶的场景本身引向<strong>对雷普展示的含义的思考</strong>，即自我认知的哲学命题<del>（又是经典的「我是谁，我从哪里来，我要到哪里去」）</del>。</p><p>动画从一开始就在为这个命题的引出做铺垫，各种细节都在给观众突破“差别”的暗示，比如学院中没有男女的差别；灾难后的新生人类的外貌都是圆脸，而旧人类都是有明显差异化的面部特征等等，从各个角度都在为观众淡化「区别」。而学院中更是没有外面的社会中的「区别」，比如同性恋、没有“性”、“男女”、“生育”的概念，美美姬的兽耳，学生们的超能力等等。我是男人，我叫斩子，我原本不是长这样的。当人与人之间的这些差别都在“新世界”中消失时，当你的精神寄托在了另一个肉体中时，当灾难摧毁了社会中的身份和角色，我们是否应该像故事中的旧人类一样去重建它，还是应该像新人类一样以其他的方式活下去？<strong>当身份认同和角色认同不再，那么该如何回答「我是谁」这个问题？</strong></p><p>本季主线基本没有触及，草草收尾了，雷普这种应当作为关键冲突点的展开居然在这里毫无意义，我还期待着斩子会在后续对自己的认知变化作出怎样的反应，没想到真流的一句类似「你就是你」的话就把话题结束了，而漫画也没有完结，我无法得知后续。</p><p>抛开主线不谈，第8话与第12、13话的联系非常出色。美美姬（<strong>福圆美里配音！</strong>）和白的故事在第13话最后的那一幕，将第8话中埋下的伏笔与第12、第13话中的从前故事巧妙地呼应和回收，给我带来了极大的震撼。</p><p>遗憾的是最终得知两个世界不是一个时间线，这种展开很常见很好写，因此对我来说有点无聊。</p><h3 id="我推的孩子"><a href="#我推的孩子" class="headerlink" title="我推的孩子"></a>我推的孩子</h3><p><img src="https://cdn.ryaoknw.site/picgo/20230730141157.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/20230730141157.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>stars：6.5</p><p>第一话的中后段高质量以及最后的展开让我对这个动画有了错误的期待，想看后续如何面对爱死去这件事，主角如何理解爱，如何在这个过程中与自己和解，但实际上只是借着这个噱头展开校园漫画，实在是没劲。</p><p>动画工坊在第一话试图证明自己做萌系以外的动画的实力，但没想到貌似这就是上限了。</p><p>在正式展开本篇剧情时便转为了厕纸演出，同时，我所期待的一些关键性的场景并没有漫画中的表现力，包括拯救赤音，拉memu入伙，以及最终的帽子一指。动画中没有进行修改，而是直接采用漫画中的画面顺序进行呈现，而由于画面的连续性，这些转折点失去了原本在漫画中带来的震撼效果。</p><h3 id="鬼灭之刃-刀匠村篇"><a href="#鬼灭之刃-刀匠村篇" class="headerlink" title="鬼灭之刃 刀匠村篇"></a>鬼灭之刃 刀匠村篇</h3><p><img src="https://cdn.ryaoknw.site/picgo/20230730141424.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/20230730141424.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>stars：5</p><p>炭治郎大帝将要征服二次元！</p><p><strong>!!!前方输出高能，请鬼灭PSTD患者自觉跳过!!!</strong></p><p>鬼灭从来没有演出，镜头极其单调，叙事只知道怼脸，让角色念出一大串的台词，然后请作画们画一段长镜头，于是经费就燃烧了，你也不知道经费烧没烧，但观众说燃烧了就是燃烧了，爆卖3亿还不好？环大陆好评如潮！<del>（我直言期待原神动画）</del>。</p><p>我不知道如何才能把动画做得这么无聊的，ep7看boss登场，然后炭治郎大帝站桩十分钟一堆慢动作来塞心理描写、神态描写，然后把内容念完了开始嘴炮论战。我想知道监督是专业的吗？还是哪个大专捞来的？永远不知道镜头为何物。</p><p>最后我鼓起勇气看看被吹的弥豆子回，炭治郎陷入拯救自己妹妹和杀鬼的艰难抉择中，这种展开一般为表现角色内核的开展点，为后续剧情深入展现角色形象做剧情上的分割点。此时的决策非常值得观众的思考，于是炭治郎选择了杀鬼，并为妹妹的生命感到悲伤，然后，<strong>弥豆子并没有发生什么，从此不畏惧阳光了</strong>。<del>天哪，太厉害了！</del>，但由于原作本身不怎么样，这里我也不细喷了，只能说我写不出这样的东西hhhh。但我也确实没什么文笔，免不了被人叫喊“<strong>你行你上啊</strong>”。</p><p>想了想，不如让我来做下一季的监督吧，我也会做。鬼灭动画只需要1.找花江夏树来念台词说书 2.找梶浦由記老师来编曲 3.需要经费燃烧的时候找阿部望先生来拉刀光。而这大概就能呈现鬼灭动画足够的体验。</p><p><del>好了，爽快。</del></p><h3 id="无神世界的神明活动"><a href="#无神世界的神明活动" class="headerlink" title="无神世界的神明活动"></a>无神世界的神明活动</h3><p><img src="https://cdn.ryaoknw.site/picgo/20230730141436.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/20230730141436.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>stars：5</p><p>用最低的经费做最有想象力的演出！rpgmaker做战斗画面, 简陋页游3d做怪物登场，通过大头演艺，角色怼脸配上低质特效背景来表现燃，还有最经典直接上现实套滤镜画面。稻叶友纪用奇思妙想做出了我从未见过的创意！</p><p><strong>淳皇鬼后放飞自我，直接让广大黑子原地道歉！从不屑到理解，从谩骂到感谢！</strong></p><blockquote><p>你们就当我在发病吧，但是我是真的很喜欢<br>人的观点真的是会随着经历过的事而改变，我现在都还记得当初看完动画时的感受<br>淳皇的调教和鬼后的咆哮真的越听越喜欢，不需要讨论演技，不需要反转<br>所有的答案都在动画里面了<br>前面忘了，后面忘了，但是。<br>世界は残酷だ それでも君を愛すよ<br>なにを犠牲にしても それでも君を守るよ<br>能听到淳皇鬼后的配音作品的是一种幸运，也需要莫大的勇气<br>你们可以说我格局太小，有小礼而无大义，毕竟我本来就没有什么家国情怀，兼济天下的情操，我也不想争论对错的问题<br>动画中我真正在乎的，也确实就那么几个cv</p></blockquote><p>虽然我很喜欢，但实在没法用这种兴奋打上一个高分，因为动画本身不值得一看，我看下去的动力是动画以外的东西。</p><h3 id="机动战士高达-水星的魔女-Season2"><a href="#机动战士高达-水星的魔女-Season2" class="headerlink" title="机动战士高达 水星的魔女 Season2"></a>机动战士高达 水星的魔女 Season2</h3><p><img src="https://cdn.ryaoknw.site/picgo/20230730141503.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/20230730141503.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>star：5</p><p>太经典的烂尾模式。</p><p>在米米要和母亲联手时我就觉得收不住了，只能能看到现在纯属说第一季ep11的百合演出把我拿下了。</p><p>本身故事内容也没有仔细讨论的必要了，<del>难道我要现在还去梳理莉可丽丝的剧情细节吗？</del></p><h3 id="魔法少女毁灭者"><a href="#魔法少女毁灭者" class="headerlink" title="魔法少女毁灭者"></a>魔法少女毁灭者</h3><p><img src="https://cdn.ryaoknw.site/picgo/20230730141520.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/20230730141520.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>stars：3</p><p>开播前非常期待，以及第一话op和ed后依旧非常期待。</p><p>但是它实际上只是制作组的自嗨。</p><p>魔法少女毁灭者最后毁灭了什么？没有毁灭什么，所以它在讽刺吗？或许有这方面的内容，只是我水平不够，看得不仔细，总结不出来。堆砌一堆杂乱的符号却没有任何实际含义，它甚至碰瓷不了秋原叶女仆战争。魔法少女毁灭了我的脑子，或许二创可以有很多有趣的内容，但可惜的是这个动画没有热度。</p><h3 id="世界巨星"><a href="#世界巨星" class="headerlink" title="世界巨星"></a>世界巨星</h3><p><img src="https://cdn.ryaoknw.site/picgo/20230730141537.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/20230730141537.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p><del>stars：5</del></p><p>因为看了pv所以去看了动画，但实在没看完。</p><p>含歌量90%，但无法成为少女歌剧代餐</p><h3 id="偶像大师-灰姑娘女孩-U149"><a href="#偶像大师-灰姑娘女孩-U149" class="headerlink" title="偶像大师 灰姑娘女孩 U149"></a>偶像大师 灰姑娘女孩 U149</h3><p><img src="https://cdn.ryaoknw.site/picgo/20230730144438.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/20230730144438.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>stars: 8</p><p>年轻人的第一部偶像大师！学神的含金量！</p><p>U149 EP11分析正在日程中，尽请期待喵！</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;不是那么棒的四月，每周指望着U149活着。&lt;/p&gt;
&lt;p&gt;实在没什么动力也没什么时间写，想着憋出一篇U149 ep11的分析，于是先顺手把4</summary>
      
    
    
    
    <category term="动画" scheme="https://blog.ryaoknw.site/categories/%E5%8A%A8%E7%94%BB/"/>
    
    
    <category term="动画" scheme="https://blog.ryaoknw.site/tags/%E5%8A%A8%E7%94%BB/"/>
    
  </entry>
  
  <entry>
    <title>彻底禁用独立显卡</title>
    <link href="https://blog.ryaoknw.site/2023/5/522336ae5c77/"/>
    <id>https://blog.ryaoknw.site/2023/5/522336ae5c77/</id>
    <published>2023-05-02T07:02:25.000Z</published>
    <updated>2023-05-02T07:02:47.457Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Manjaro-彻底禁用独立显卡"><a href="#Manjaro-彻底禁用独立显卡" class="headerlink" title="[Manjaro]彻底禁用独立显卡"></a>[Manjaro]彻底禁用独立显卡</h1><h2 id="已知的问题"><a href="#已知的问题" class="headerlink" title="已知的问题"></a>已知的问题</h2><p>我在使用chrome时应用启动非常迅速，但图形界面却出现的非常慢，准确来说，是一个全屏透明占用了整个屏幕，把它最小化（通过点击应用图标等方法）在屏幕上拖动会有重影，重影是buffer未清除，应该是图形（GPU）渲染的问题。</p><p>然而，在firefox上却完全没有这个问题。</p><p>我难以准确描述我遇到的问题，在google上搜不到任何和我相似的情况，只有类似”启动慢“的问题，我尝试关闭了所有硬件加速相关的只要用到GPU的功能，还是无法解决问题。</p><p>尝试换了edge,但依旧是同样的效果，又尝试换了vivaldi, 也是同样的问题，区别就是vivaldi不是透明的而是白屏窗口，可能只是启动实现上的不同。共同点在于，它们都是基于chromium的，于是我又尝试使用chromium，但chromium却没有这个问题，我实在不知道如何排查，我尝试使用debug日志的模式启动chrome、edge，一大堆的日志中除了一些不太重要的warning之外，没有什么不正常的信息。</p><p>chrome启动慢实在影响了我的操作体验。。。而chromium被阉割了同步功能，以及现在的版本下在linux中输入存在问题（fcitx），不过在当前的chrome版本中已经修复，我还是觉得我应该使用chrome。</p><p>事情在我从kde换到awesome wm后有了进展，在某一次开机后我在awesome wm下的chrome彻底打不开了，edge等也是，我</p><p>意识到这样的不同表现来源于我的启动配置，于是我认为应该是我坏掉的独显在暗中作怪。</p><h2 id="彻底禁用独显"><a href="#彻底禁用独显" class="headerlink" title="彻底禁用独显"></a>彻底禁用独显</h2><h3 id="尝试"><a href="#尝试" class="headerlink" title="尝试"></a>尝试</h3><p>manjaro并没有提供类似设备管理器一样的可以直接把显卡禁用的功能，我也没有找到。</p><p>我在网上找到的选择使用集成显卡的方案是通过bumblebee来实现的。</p><p>对于ubuntu,可以使用<code>prime-select</code>命令来选择显卡，在manjaro（arch系）下，可以通过</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mhwd -a pci nonfree 0300</span><br></pre></td></tr></table></figure><p>来安装推荐的显卡驱动，一般双显卡就是<code>video-hybrid-intel-nvidia-prime</code>，但并没有<code>prime-select</code>，arch系采用了不同的方法来处理NVIDIA Optimus技术，可以使用Bumblebee作为Optimus支持的默认解决方案。</p><p>在论坛中得知应该使用bbswitch来代替Bumblebee来做这件事比较好，Bumblebee已经过时了。</p><p>于是尝试一系列操作：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S bbswitch</span><br><span class="line"></span><br><span class="line">sudo nvim /etc/modprobe.d/bbswitch.conf</span><br><span class="line">options bbswitch load_state=0 unload_state=1</span><br><span class="line"></span><br><span class="line">sudo modprobe bbswitch</span><br><span class="line">sudo <span class="built_in">tee</span> /proc/acpi/bbswitch &lt;&lt;&lt; <span class="string">OFF</span></span><br><span class="line"><span class="string">cat /proc/acpi/bbswitch</span></span><br></pre></td></tr></table></figure><p>按道理应该显示OFF,但我这里一直显示ON。得知大概是由于程序占用了nvidia,导致无法禁用。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo fuser -v /dev/nvidia*</span><br><span class="line"></span><br><span class="line">用户     进程号 权限   命令</span><br><span class="line">/dev/nvidiactl:      root      298314 F.... Xorg</span><br></pre></td></tr></table></figure><p>尝试设置xorg使用集显启动。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">cp</span> /etc/X11/xorg.conf /etc/X11/xorg.conf.backup</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">sudo nvim /etc/X11/xorg.conf</span><br><span class="line"></span><br><span class="line">Section <span class="string">&quot;ServerLayout&quot;</span></span><br><span class="line">    Identifier <span class="string">&quot;layout&quot;</span></span><br><span class="line">    Screen 0 <span class="string">&quot;intel&quot;</span></span><br><span class="line">    Inactive <span class="string">&quot;nvidia&quot;</span></span><br><span class="line">EndSection</span><br><span class="line"></span><br><span class="line">Section <span class="string">&quot;Device&quot;</span></span><br><span class="line">    Identifier <span class="string">&quot;intel&quot;</span></span><br><span class="line">    Driver <span class="string">&quot;modesetting&quot;</span></span><br><span class="line">    BusID <span class="string">&quot;PCI:0:2:0&quot;</span></span><br><span class="line">EndSection</span><br><span class="line"></span><br><span class="line">Section <span class="string">&quot;Screen&quot;</span></span><br><span class="line">    Identifier <span class="string">&quot;intel&quot;</span></span><br><span class="line">    Device <span class="string">&quot;intel&quot;</span></span><br><span class="line">EndSection</span><br><span class="line"></span><br><span class="line">Section <span class="string">&quot;Device&quot;</span></span><br><span class="line">    Identifier <span class="string">&quot;nvidia&quot;</span></span><br><span class="line">    Driver <span class="string">&quot;nvidia&quot;</span></span><br><span class="line">    BusID <span class="string">&quot;PCI:1:0:0&quot;</span></span><br><span class="line">    Option <span class="string">&quot;ConstrainCursor&quot;</span> <span class="string">&quot;off&quot;</span></span><br><span class="line">EndSection</span><br><span class="line"></span><br><span class="line">Section <span class="string">&quot;Screen&quot;</span></span><br><span class="line">    Identifier <span class="string">&quot;nvidia&quot;</span></span><br><span class="line">    Device <span class="string">&quot;nvidia&quot;</span></span><br><span class="line">    Option <span class="string">&quot;AllowEmptyInitialConfiguration&quot;</span> <span class="string">&quot;on&quot;</span></span><br><span class="line">    Option <span class="string">&quot;IgnoreDisplayDevices&quot;</span> <span class="string">&quot;CRT&quot;</span></span><br><span class="line">EndSection</span><br></pre></td></tr></table></figure><p>然后重启，依旧无效。</p><p>我无法得知原因，但毕竟是独显坏了，奇奇怪怪的事情确实会发生hhh</p><h3 id="有效的做法"><a href="#有效的做法" class="headerlink" title="有效的做法"></a>有效的做法</h3><p>既然它已经坏了，那么我就只需要把它彻底禁用就好了</p><p>先安装intel集显的驱动，保证我至少有一个能用的驱动可以打开图形界面</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mhwd -i pci video-linux</span><br></pre></td></tr></table></figure><p>然后阻止nvidia模块加载</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo nvim /etc/modprobe.d/blacklist-nvidia.conf</span><br><span class="line"></span><br><span class="line">blacklist nvidia</span><br><span class="line">blacklist nvidia-drm</span><br><span class="line">blacklist nvidia-modeset</span><br><span class="line">blacklist nvidia-uvm</span><br></pre></td></tr></table></figure><p>卸载nvidia相关的驱动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mhwd -r pci video-nvidia</span><br><span class="line">sudo mhwd -r pci video-hybrid-intel-nvidia-prime</span><br></pre></td></tr></table></figure><p>以及残留配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">rm</span> /etc/X11/xorg.conf</span><br></pre></td></tr></table></figure><p>reboot,然后飞快的启动了chrome,真棒。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Manjaro-彻底禁用独立显卡&quot;&gt;&lt;a href=&quot;#Manjaro-彻底禁用独立显卡&quot; class=&quot;headerlink&quot; title=&quot;[Manjaro]彻底禁用独立显卡&quot;&gt;&lt;/a&gt;[Manjaro]彻底禁用独立显卡&lt;/h1&gt;&lt;h2 id=&quot;已知的问题&quot;&gt;</summary>
      
    
    
    
    <category term="未分类" scheme="https://blog.ryaoknw.site/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/"/>
    
    
  </entry>
  
  <entry>
    <title>TOTP和2FA实现</title>
    <link href="https://blog.ryaoknw.site/2023/4/0542e4f627a8/"/>
    <id>https://blog.ryaoknw.site/2023/4/0542e4f627a8/</id>
    <published>2023-04-21T15:17:07.000Z</published>
    <updated>2023-04-21T19:27:27.649Z</updated>
    
    <content type="html"><![CDATA[<h1 id="TOTP和2FA实现"><a href="#TOTP和2FA实现" class="headerlink" title="TOTP和2FA实现"></a>TOTP和2FA实现</h1><p>很多网站的登陆系统都会提供一个开启2FA认证的安全选项，一些对安全性要求较高的还会要求必须使用2FA。</p><p>2FA是啥？二步验证（双因素验证，Two-factor authentication, 2FA）。在检查口令之外，还检查一个<strong>一次性认证码</strong>。典型的二步认证手段包括有：</p><ul><li>短信&#x2F;邮箱验证码</li><li>银行发的密码器</li><li>基于 HOTP&#x2F;TOTP 协议的应用程序</li></ul><p>2FA 中使用的是一次性密码（One Time Password，OTP），也被称作动态密码。一般 OTP 有两种策略：HOTP ( HMAC-based One Time Password) 和 TOTP ( Time-based One-time Password)</p><h2 id="TOTP工作流程"><a href="#TOTP工作流程" class="headerlink" title="TOTP工作流程"></a>TOTP工作流程</h2><p>如果用户选择打开 2FA，网站会生成一个预共享的 secret key。后续的验证码都是从这个 secret key 派生出来的，这个 secret key 应该严格保密，只有服务器和客户应当知晓。</p><p>用户登录时，首先完成传统的第一步认证，然后提供 6 位数字认证码（这个认证码由 secret key 与当前时间计算得出，每 30s 变一次），若与服务器的计算结果一致，则完成认证。</p><p>（由于Google Authenticator界面下我截不了图，偷一下应用市场的）</p><img src="https://cdn.ryaoknw.site/picgo/unnamed.webp" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/unnamed.webp" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" style="zoom:50%;" /><h2 id="TOTP计算原理"><a href="#TOTP计算原理" class="headerlink" title="TOTP计算原理"></a>TOTP计算原理</h2><p>参考<a href="https://datatracker.ietf.org/doc/html/rfc4226">RFC4226</a></p><h3 id="HOTP"><a href="#HOTP" class="headerlink" title="HOTP"></a>HOTP</h3><p>HMAC-based One Time Password，由 RFC 4226 定义。一次性验证码是secret key $K$与计数器$C$的函数，其中 HMAC 过程使用的哈希函数$H$默认是 SHA-1。<br>$$<br>HOTP(K,C) &#x3D; Truncate(HMAC_{H}(K,C))<br>$$<br>HMAC 算法得出的值位数比较多，不方便用户输入，因此需要截断（Truncate）成为一组不太长十进制数。要用六位数，就是$HOTP(K,C) \mod10^6$</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># https://github.com/pyauth/pyotp</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">generate_otp</span>(<span class="params">self, <span class="built_in">input</span>: <span class="built_in">int</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">       <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">       :param input: the HMAC counter value to use as the OTP input.</span></span><br><span class="line"><span class="string">           Usually either the counter, or the computed integer based on the Unix timestamp</span></span><br><span class="line"><span class="string">       &quot;&quot;&quot;</span></span><br><span class="line">       <span class="keyword">if</span> <span class="built_in">input</span> &lt; <span class="number">0</span>:</span><br><span class="line">           <span class="keyword">raise</span> ValueError(<span class="string">&quot;input must be positive integer&quot;</span>)</span><br><span class="line">       hasher = hmac.new(self.byte_secret(), self.int_to_bytestring(<span class="built_in">input</span>), self.digest)</span><br><span class="line">       hmac_hash = <span class="built_in">bytearray</span>(hasher.digest())</span><br><span class="line">       <span class="comment"># 从160位的 SHA-1 结果中，提取出31位</span></span><br><span class="line">       offset = hmac_hash[-<span class="number">1</span>] &amp; <span class="number">0xF</span></span><br><span class="line">       code = (</span><br><span class="line">           (hmac_hash[offset] &amp; <span class="number">0x7F</span>) &lt;&lt; <span class="number">24</span></span><br><span class="line">           | (hmac_hash[offset + <span class="number">1</span>] &amp; <span class="number">0xFF</span>) &lt;&lt; <span class="number">16</span></span><br><span class="line">           | (hmac_hash[offset + <span class="number">2</span>] &amp; <span class="number">0xFF</span>) &lt;&lt; <span class="number">8</span></span><br><span class="line">           | (hmac_hash[offset + <span class="number">3</span>] &amp; <span class="number">0xFF</span>)</span><br><span class="line">       )</span><br><span class="line">       <span class="comment"># 得到digits位的一次性密码</span></span><br><span class="line">       str_code = <span class="built_in">str</span>(<span class="number">10_000_000_000</span> + (code % <span class="number">10</span>**self.digits))</span><br><span class="line">       <span class="keyword">return</span> str_code[-self.digits :]</span><br></pre></td></tr></table></figure><p><strong>工作流程</strong></p><ol><li><p>客户端和服务器各有一个计数器C，并且事先将计数值同步。</p></li><li><p>客户端用K,C计算一次性密码。</p></li><li><p>计算完成之后客户端计数器C计数值加1，验证通过，服务器端将计数值C加1。</p></li></ol><p>如果验证失败或者客户端不小心多进行了一次生成密码操作，那么服务器和客户端之间的计数器C将不再同步，因此需要有一个重新同步（Resynchronization）的机制：</p><p><strong>Resynchronization</strong></p><p>定义一个向前查找的参数s，服务器可以重新计算接下来的s个HOTP值，并将它们与接收到的HOTP客户端进行比较</p><p>计数器同步只需服务器计算下一个HOTP值并确定是否匹配。系统可以要求用户发送一系列（例如C&#x3D;2, 3）的HOTP值以进行重新同步，因为伪造连续的HOTP值比猜测单个HOTP值更难。</p><h3 id="TOTP"><a href="#TOTP" class="headerlink" title="TOTP"></a>TOTP</h3><p>HOTP 与 TOTP 的区别在于：HOTP 是用一个整数 counter 来计算一次性验证码，而 TOTP 是基于当前时间来计算。显然，实现了前者就能实现后者——只需要把当前时间除以 $T$ 向下取整，就能得到一个整数 counter 送进 HOTP 协议里。</p><p>Google Authenticator把$T$设置为了30s.</p><p>由于网络延时，用户输入延迟等因素，可能当服务器端接收到一次性密码时，T的数值已经改变，这样就会导致服务器计算的一次性密码值与用户输入的不同，验证失败。这可以通过同样的思路来解决，服务器计算当前时间片以及前面的n个时间片内的一次性密码值，只要其中有一个与用户输入的密码相同，则验证通过。当然，n不能太大，否则会降低安全性</p><h2 id="服务实现"><a href="#服务实现" class="headerlink" title="服务实现"></a>服务实现</h2><ol><li>服务端随机生成一个secret key，并且把这个密钥保存在数据库中。</li><li>在页面上显示一个二维码，内容是一个URI地址（<code>otpauth://totp/GitHub:LarryLuTW?secret=&#123;secret_key&#125;&amp;issuer=GitHub</code>）</li><li>客户端用某个应用扫描二维码，把secret key保存。</li><li>客户端每30秒使用secret key和时间戳生成一个6位数字的一次性密码</li><li>用户输入这个一次性密码，然后服务端进行验证</li></ol><p><strong>recovery code</strong></p><p>服务端有时会提供一个或一组recovery code，用于在你把手机砸了或者其他故障后能够登陆账户。</p><p>我们可以做一个简单的实现：</p><ul><li><p>随便用某些方法一组唯一且不能伪造的recovery code，将它们存在数据库，并对应用户和用户的secret key</p></li><li><p>用户输入recovery code后，验证recovery code是否对应该用户，验证成功后销毁recovery code和secret key，取消用户的2FA并给用户态（或者把用户跳转到setting并引导重新设置）</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;TOTP和2FA实现&quot;&gt;&lt;a href=&quot;#TOTP和2FA实现&quot; class=&quot;headerlink&quot; title=&quot;TOTP和2FA实现&quot;&gt;&lt;/a&gt;TOTP和2FA实现&lt;/h1&gt;&lt;p&gt;很多网站的登陆系统都会提供一个开启2FA认证的安全选项，一些对安全性要求较高</summary>
      
    
    
    
    <category term="未分类" scheme="https://blog.ryaoknw.site/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/"/>
    
    
  </entry>
  
  <entry>
    <title>媒体资源管理方案</title>
    <link href="https://blog.ryaoknw.site/2023/4/6eb8dc2e76dc/"/>
    <id>https://blog.ryaoknw.site/2023/4/6eb8dc2e76dc/</id>
    <published>2023-04-16T19:18:10.000Z</published>
    <updated>2023-04-17T22:59:59.465Z</updated>
    
    <content type="html"><![CDATA[<h1 id="媒体资源管理方案"><a href="#媒体资源管理方案" class="headerlink" title="媒体资源管理方案"></a>媒体资源管理方案</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><strong>Navidrome实在不好用</strong>，选择了一些媒体管理的工具。</p><p>plex：一键安装的媒体管理工具，安装自动将服务注册到systemd。有免费版，不开源，试了一下还行，但是我不太想用，<del>因为不折腾</del>，因为我不喜欢。</p><p>找到了开源的jellyfin，也部署了，太丑，发现了它的衍生商业版emby，看着舒服多了，决定用它</p><h2 id="emby"><a href="#emby" class="headerlink" title="emby"></a>emby</h2><p>emby有免费版，阉割了很多功能，甚至不能更换主题</p><p>当然，我选择使用开心版！</p><p>由于docker隔离的原因，导入媒体库不是很方便，得先挂进去</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">emby:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">lovechen/embyserver:beta</span> <span class="comment"># 建议使用beta,因为新版本功能多多</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">emby</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8096</span><span class="string">:8096</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8920</span><span class="string">:8920</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">1900</span><span class="string">:1900/udp</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">7359</span><span class="string">:7359/udp</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">UID=1000</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">GID=1000</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">GIDLIST=1000</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">TZ=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./emby:/config</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./data/:/data</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/youmedia:/share/media</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br></pre></td></tr></table></figure><p>再导入我的媒体库</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230417032751533.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230417032751533.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230417032751533"></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230418064258491.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230418064258491.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230418064258491"></p><p>看上去非常棒。</p><h2 id="syncthing-git-lfs"><a href="#syncthing-git-lfs" class="headerlink" title="syncthing+git lfs"></a>syncthing+git lfs</h2><p>用于同步三端的文件，但是手机上的<strong>syncthing</strong>，至少鸿蒙上，如果熄屏或者切屏就会断连，不过也无所谓。</p><p>我需要记录音乐文件的更改，所以使用<strong>git lfs</strong>来做版本管理</p><blockquote><p><strong>git lfs服务器只给1g的流量，所以别用了</strong></p></blockquote><p>首次添加时，如果一次性git add，然后push上去，会文件过大而失败，需要分批来做这件事</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 需要提交的文件夹列表</span></span><br><span class="line">folders=(<span class="string">&quot;Music&quot;</span>)</span><br><span class="line"><span class="comment"># 每次提交的文件数</span></span><br><span class="line">batch_size=10</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> folder <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;folders[@]&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">cd</span> <span class="string">&quot;<span class="variable">$folder</span>&quot;</span></span><br><span class="line">    files=(*)</span><br><span class="line">    num_files=<span class="variable">$&#123;#files[@]&#125;</span></span><br><span class="line">    <span class="keyword">for</span> ((i=0; i&lt;num_files; i+=batch_size))</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        batch_files=(<span class="string">&quot;<span class="variable">$&#123;files[@]:i:batch_size&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> file <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;batch_files[@]&#125;</span>&quot;</span></span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">            git add <span class="string">&quot;<span class="variable">$file</span>&quot;</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        git commit -m <span class="string">&quot;add files&quot;</span></span><br><span class="line">        git push origin master</span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    <span class="built_in">cd</span> ..</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>自己写了一个<a href="https://github.com/RyaoChengfeng/MusicInfoExtractor">MusicInfoExtractor</a>用于解析目录下的音乐文件，然后输出到json，再只提交元信息就好了。</p><h2 id="音乐刮削"><a href="#音乐刮削" class="headerlink" title="音乐刮削"></a>音乐刮削</h2><p>音乐的封面和标题等信息非常重要，而这些都在音乐的元信息里，在不知多久以前在某些神秘的地方下载的无损文件它很可能缺少这些信息，甚至文件名也是一串魔法字符串，这非常的不妙。</p><p>最佳的是使用网易云和qq的智能识别来填充音乐的tag，但是我没有找到任何一个实现了这个功能的工具</p><p>主流的方案是用<strong>MusicBrainz Picard</strong>或者<strong>mp3tag</strong>，但是这一堆galgame里和动画纯音乐专辑里的冷门音乐，实在是不好用。</p><p>找到了musictag：<a href="https://www.cnblogs.com/vinlxc/p/11347744.html">https://www.cnblogs.com/vinlxc/p/11347744.html</a> ，虽然貌似没有开源，但是支持了网易云和qq音乐等匹配，可惜只能在windows上用它</p><p><img src="https://cdn.ryaoknw.site/picgo/QQ20200831224848.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/QQ20200831224848.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><h2 id="番剧"><a href="#番剧" class="headerlink" title="番剧"></a>番剧</h2><p>用<a href="https://github.com/EstrellaXD/Auto_Bangumi">Auto_Bangumi</a>，再加载到emby</p><p>如果想要其他的电影电视剧，使用<a href="https://github.com/Jackett/Jackett">Jackett</a></p><h2 id="音声"><a href="#音声" class="headerlink" title="音声"></a>音声</h2><p><del>音声是好东西</del>，但我不是重度依赖者，所以不太想搭，毕竟真的吃硬盘空间</p><p>如果需要，可以使用kikoeru，十分轻量的音乐流媒体服务器，<psw>最伟大的同**声网站www.XXXX.one正是使用了它</psw></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;媒体资源管理方案&quot;&gt;&lt;a href=&quot;#媒体资源管理方案&quot; class=&quot;headerlink&quot; title=&quot;媒体资源管理方案&quot;&gt;&lt;/a&gt;媒体资源管理方案&lt;/h1&gt;&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    <category term="未分类" scheme="https://blog.ryaoknw.site/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/"/>
    
    
  </entry>
  
  <entry>
    <title>frp配置内网穿透暴露kubernetes集群</title>
    <link href="https://blog.ryaoknw.site/2023/4/82c24833ebd8/"/>
    <id>https://blog.ryaoknw.site/2023/4/82c24833ebd8/</id>
    <published>2023-04-16T19:15:54.000Z</published>
    <updated>2023-04-16T20:13:17.713Z</updated>
    
    <content type="html"><![CDATA[<h1 id="frp配置内网穿透暴露kubernetes集群"><a href="#frp配置内网穿透暴露kubernetes集群" class="headerlink" title="frp配置内网穿透暴露kubernetes集群"></a>frp配置内网穿透暴露kubernetes集群</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>1核2G的服务器太垃圾了，搭了kubernetes，但是各种组件都吃性能，研究了一下内网穿透，尝试让电脑在开机的时候可以用公网ip访问服务，这样就完全没有性能瓶颈了</p><p>折腾了很久。。。对于rancher，helm装完有一大大大大堆的资源被安装下来了，也不知道它的流量是怎么走的，会重定向一次host，导致循环重定向，排查了半天，最终放弃挣扎了，但是正常的服务是可以用的，同时放弃了ingress-nginx,换用了apisix，这一步也折腾了很久</p><h2 id="frp"><a href="#frp" class="headerlink" title="frp"></a>frp</h2><p>server和client都要有</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/fatedier/frp/releases/download/v0.48.0/frp_0.48.0_linux_amd64.tar.gz</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf frp_0.48.0_linux_amd64.tar.gz</span><br></pre></td></tr></table></figure><h2 id="配置server"><a href="#配置server" class="headerlink" title="配置server"></a>配置server</h2><p><code>vim frps.ini</code></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># FRP服务端</span></span><br><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="comment"># frp监听的端口，默认是7000，可以改成其他的</span></span><br><span class="line"><span class="attr">bind_port</span> = <span class="number">7000</span></span><br><span class="line"><span class="comment"># 授权码，请改成更复杂的</span></span><br><span class="line"><span class="attr">token</span> = b3rpf5Gm  <span class="comment"># 这个token之后在客户端会用到</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># frp管理后台端口，请按自己需求更改</span></span><br><span class="line"><span class="attr">dashboard_port</span> = <span class="number">7001</span></span><br><span class="line"><span class="comment"># frp管理后台用户名和密码，请改成自己的</span></span><br><span class="line"><span class="attr">dashboard_user</span> = admin</span><br><span class="line"><span class="attr">dashboard_pwd</span> = admin</span><br><span class="line"><span class="attr">enable_prometheus</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># frp日志配置</span></span><br><span class="line"><span class="attr">log_file</span> = /var/log/frps.log</span><br><span class="line"><span class="attr">log_level</span> = info</span><br><span class="line"><span class="attr">log_max_days</span> = <span class="number">3</span></span><br></pre></td></tr></table></figure><p><strong>添加到systemctl命令组</strong>，保证开机自启动，当然你也可以用docker跑服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> -p /etc/frp</span><br><span class="line"></span><br><span class="line">sudo <span class="built_in">ln</span> -s /root/frp/frps.ini /etc/frp/frps.ini</span><br><span class="line">sudo <span class="built_in">cp</span> frps /usr/bin</span><br></pre></td></tr></table></figure><p><code>vim /usr/lib/systemd/system/frps.service</code></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=The nginx HTTP and reverse proxy server</span><br><span class="line"><span class="attr">After</span>=network.target remote-fs.target nss-lookup.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">Type</span>=simple</span><br><span class="line"><span class="attr">ExecStart</span>=/usr/local/frp/frps -c /usr/local/frp/frps.ini</span><br><span class="line"><span class="attr">KillSignal</span>=SIGQUIT</span><br><span class="line"><span class="attr">TimeoutStopSec</span>=<span class="number">5</span></span><br><span class="line"><span class="attr">KillMode</span>=process</span><br><span class="line"><span class="attr">PrivateTmp</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">StandardOutput</span>=syslog</span><br><span class="line"><span class="attr">StandardError</span>=inherit</span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl <span class="built_in">enable</span> frps</span><br><span class="line">systemctl start frps</span><br></pre></td></tr></table></figure><p>记得打开需要的端口安全组和防火墙</p><h2 id="配置client"><a href="#配置client" class="headerlink" title="配置client"></a>配置client</h2><p><code>vim frpc.ini</code></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="attr">server_addr</span> = &lt;ip&gt;</span><br><span class="line"><span class="attr">server_port</span> = <span class="number">7000</span></span><br><span class="line"><span class="attr">token</span> = b3rpf5Gm</span><br><span class="line"></span><br><span class="line"><span class="section">[ssh]</span></span><br><span class="line"><span class="attr">type</span> = tcp</span><br><span class="line"><span class="attr">local_ip</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">local_port</span> = <span class="number">22</span></span><br><span class="line"><span class="comment"># 这个自定义，之后再ssh连接的时候要用</span></span><br><span class="line"><span class="attr">remote_port</span> = <span class="number">7002</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./frpc -c frpc.ini</span><br></pre></td></tr></table></figure><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo cp -r frp /usr/local/</span><br><span class="line"></span><br><span class="line">sudo vim /usr/lib/systemd/system/frpc.service</span><br></pre></td></tr></table></figure><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=The nginx HTTP and reverse proxy server</span><br><span class="line"><span class="attr">After</span>=network.target remote-fs.target nss-lookup.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">Type</span>=simple</span><br><span class="line"><span class="attr">ExecStart</span>=/usr/local/frp/frpc -c /usr/local/frp/frpc.ini</span><br><span class="line"><span class="attr">KillSignal</span>=SIGQUIT</span><br><span class="line"><span class="attr">TimeoutStopSec</span>=<span class="number">5</span></span><br><span class="line"><span class="attr">KillMode</span>=process</span><br><span class="line"><span class="attr">PrivateTmp</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">StandardOutput</span>=syslog</span><br><span class="line"><span class="attr">StandardError</span>=inherit</span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl <span class="built_in">enable</span> frpc</span><br><span class="line">systemctl start frpc</span><br></pre></td></tr></table></figure><p>配置完后，可以通过ssh来测试是否能登陆自己的机器</p><h2 id="k8s"><a href="#k8s" class="headerlink" title="k8s"></a>k8s</h2><p>配置fpcs，添加</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">vhost_http_port</span> = <span class="number">7080</span></span><br></pre></td></tr></table></figure><p>公网server nginx配置，将请求转发到frp的http端口</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">map</span> <span class="variable">$http_upgrade</span> <span class="variable">$connection_upgrade</span> &#123;</span><br><span class="line">  <span class="attribute">default</span> upgrade;</span><br><span class="line">  &#x27;&#x27;      close;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line"><span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> <span class="regexp">*.k</span>8s.ryaoknw.site k8s.ryaoknw.site;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$host</span><span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl; </span><br><span class="line">    <span class="attribute">server_name</span> <span class="regexp">*.k</span>8s.ryaoknw.site k8s.ryaoknw.site;</span><br><span class="line">    <span class="attribute">ssl_certificate</span> /etc/letsencrypt/live/k8s.ryaoknw.site-<span class="number">0001</span>/fullchain.pem; <span class="comment"># 泛域名证书</span></span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /etc/letsencrypt/live/k8s.ryaoknw.site-<span class="number">0001</span>/privkey.pem;</span><br><span class="line">    <span class="attribute">include</span> /etc/letsencrypt/options-ssl-nginx.conf; </span><br><span class="line">    <span class="attribute">ssl_dhparam</span> /etc/letsencrypt/ssl-dhparams.pem; </span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:7080;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host      <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>; <span class="comment">#配置weboscket</span></span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="variable">$connection_upgrade</span>;<span class="comment">#配置weboscket</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置frpc，<code>frpc.ini</code></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[http]</span></span><br><span class="line"><span class="attr">type</span> = http</span><br><span class="line"><span class="attr">local_ip</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">local_port</span> = <span class="number">80</span></span><br><span class="line"><span class="attr">custom_domains</span> = *.k8s.ryaoknw.site,k8s.ryaoknw.site</span><br><span class="line"><span class="attr">remote_port</span> = <span class="number">7080</span></span><br></pre></td></tr></table></figure><p>内网nginx配置，对应http端口（7080）会被frpc转发到127.0.01:80，nginx代理了80端口，将请求转发到上游node</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">upstream</span> k8s &#123;</span><br><span class="line">  <span class="attribute">server</span> <span class="number">192.168.199.111:80</span>;  <span class="comment"># NodePort </span></span><br><span class="line">  <span class="comment">#server 192.168.199.112:80;</span></span><br><span class="line">  <span class="comment">#server 192.168.199.113:80;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">map</span> <span class="variable">$http_upgrade</span> <span class="variable">$connection_upgrade</span> &#123;</span><br><span class="line">  <span class="attribute">default</span> upgrade;</span><br><span class="line">  &#x27;&#x27;      close;</span><br><span class="line">&#125;</span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  <span class="regexp">*.k</span>8s.ryaoknw.site k8s.ryaoknw.site;</span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">      <span class="attribute">proxy_pass</span> http://k8s;</span><br><span class="line">      <span class="attribute">proxy_set_header</span> Host      <span class="variable">$host</span>;</span><br><span class="line">      <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">  <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">      <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">      <span class="attribute">proxy_set_header</span> Connection <span class="variable">$connection_upgrade</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>至此配置完毕，可以部署服务在本地集群，然后用ingress暴露即可访问</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230417031401586.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230417031401586.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20230417031401586"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;frp配置内网穿透暴露kubernetes集群&quot;&gt;&lt;a href=&quot;#frp配置内网穿透暴露kubernetes集群&quot; class=&quot;headerlink&quot; title=&quot;frp配置内网穿透暴露kubernetes集群&quot;&gt;&lt;/a&gt;frp配置内网穿透暴露kubern</summary>
      
    
    
    
    <category term="kubernetes" scheme="https://blog.ryaoknw.site/categories/kubernetes/"/>
    
    
    <category term="kubernetes" scheme="https://blog.ryaoknw.site/tags/kubernetes/"/>
    
    <category term="frp" scheme="https://blog.ryaoknw.site/tags/frp/"/>
    
  </entry>
  
  <entry>
    <title>笔记同步方案</title>
    <link href="https://blog.ryaoknw.site/2023/4/419637ff8af9/"/>
    <id>https://blog.ryaoknw.site/2023/4/419637ff8af9/</id>
    <published>2023-04-07T13:17:52.000Z</published>
    <updated>2023-04-07T13:19:21.379Z</updated>
    
    <content type="html"><![CDATA[<h1 id="笔记同步方案"><a href="#笔记同步方案" class="headerlink" title="笔记同步方案"></a>笔记同步方案</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>笔记里写了一大堆东西，现在在windows上保存，并把windows的磁盘开机自动挂载到linux上实现双端的同步，但这样在手机上是访问不到笔记的，很不方便，使用服务器搭建一个webdav倒是很方便，但是这个轻量学生机不是很可靠，万一哪天我玩崩了，内容就消失了，还是使用云服务比较靠谱。</p><h2 id="typora-picgo-七牛云"><a href="#typora-picgo-七牛云" class="headerlink" title="typora+picgo+七牛云"></a>typora+picgo+七牛云</h2><p>我只考虑使用typora作为md编辑器，因为它非常顺手，<strong>我的嘉然主题和字体也非常好看</strong>。</p><p>图片上传使用picgo，一开始用的smms图床，smms图床有足够的免费空间，但是不知何时开始国内无法访问了，图床转而用了聚合图床，免费而且快，但某日发现它会把png转成jpg，这导致我的图片从rgba变成了rgb，这非常不合理，于是转用了七牛云。</p><p>七牛云的cdn用https要记流量付费，于是用nginx做一个反代来实现https的图片</p><h2 id="尝试joplin"><a href="#尝试joplin" class="headerlink" title="尝试joplin"></a>尝试joplin</h2><p>了解到joplin可以作为一个开源的笔记同步工具，安装下来试了试，基本的流程就是</p><ul><li>导入笔记</li><li>设置同步，可以同步到onedrive、dropdox等，也可以是任何的webdav</li><li>然后设置外部编辑器为typora</li></ul><p>每次打开joplin，编辑时打开外部编辑器，但编辑完还得关闭，整个流程非常麻烦，体验非常不好。</p><h2 id="坚果云"><a href="#坚果云" class="headerlink" title="坚果云"></a>坚果云</h2><p>有看到用typora+坚果云的方案，也去试了试，坚果云会提供免费的空间，也有提供linux的客户端</p><p>同步的方法就是webdav，和onedrive是一样的</p><p>但同步需要运行它的客户端，我不是很想每次开机都启动一个坚果云客户端，只把它用来同步我的md笔记</p><h2 id="onedrive"><a href="#onedrive" class="headerlink" title="onedrive"></a>onedrive</h2><p>考虑到还是得用webdav，最后还是回到了onedrive，onedrive在windows上同步是非常方便的，但在linux上挂载需要额外的操作</p><h3 id="rclone"><a href="#rclone" class="headerlink" title="rclone"></a>rclone</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://rclone.org/install.sh | sudo bash</span><br></pre></td></tr></table></figure><p>你需要拿到access_token,或者申请一个API key，用于后续配置中的<code>config_token&gt;</code>，没有API key，<code>client_id&gt;</code>和<code>client_secret&gt;</code>为空即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone authorize <span class="string">&quot;onedrive&quot;</span></span><br></pre></td></tr></table></figure><p>然后配置rclone</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone config</span><br></pre></td></tr></table></figure><p>验证：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone lsd &lt;配置的网盘名称&gt;:/</span><br></pre></td></tr></table></figure><p><img src="https://cdn.ryaoknw.site/picgo/image-20230407172742346.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230407172742346.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><h3 id="挂载onedrive"><a href="#挂载onedrive" class="headerlink" title="挂载onedrive"></a>挂载onedrive</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install fuse</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone mount &lt;配置的云盘名称&gt;:&lt;要挂载的云盘目录&gt; &lt;作为挂载点的本地目录&gt; --copy-links --no-gzip-encoding --no-check-certificate --allow-other --allow-non-empty --<span class="built_in">umask</span> 000 --daemon</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone mount onedrive:/ /home/ryao/onedrive --copy-links --no-gzip-encoding --no-check-certificate --allow-other --allow-non-empty --<span class="built_in">umask</span> 000 --daemon</span><br></pre></td></tr></table></figure><p>取消挂载：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo fusermount -qzu &lt;挂载路径&gt;</span><br></pre></td></tr></table></figure><p><strong>开机自启</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span>=<span class="string">&quot; mount onedrive:/ /home/ryao/onedrive --copy-links --no-gzip-encoding --no-check-certificate --allow-other --allow-non-empty --umask 000 --daemon&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt; /etc/systemd/system/rclone.service &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">[Unit]</span></span><br><span class="line"><span class="string">Description=Rclone</span></span><br><span class="line"><span class="string">After=network-online.target</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Service]</span></span><br><span class="line"><span class="string">Type=simple</span></span><br><span class="line"><span class="string">ExecStart=$(command -v rclone) $&#123;command&#125;</span></span><br><span class="line"><span class="string">Restart=on-abort</span></span><br><span class="line"><span class="string">User=root</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Install]</span></span><br><span class="line"><span class="string">WantedBy=default.target</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 开机自启</span><br><span class="line">systemctl enable rclone</span><br><span class="line"># 启动</span><br><span class="line">systemctl start rclone</span><br><span class="line"># 重启</span><br><span class="line">systemctl restart  rclone</span><br><span class="line"># 停止</span><br><span class="line">systemctl status rclone</span><br></pre></td></tr></table></figure><p>终于配置好了，然后发现onedrive的速度简直就是一种折磨，尝试使用了google drive，依旧慢的离谱</p><h2 id="dropbox"><a href="#dropbox" class="headerlink" title="dropbox"></a>dropbox</h2><p><a href="https://www.dropbox.com/install">https://www.dropbox.com/install</a></p><p>放弃了折腾，选择了dropbox。</p><p>不过由于国内连不上的原因，用代理安装后还要再安装Dropbox daemon，但是会connection reset by peer.</p><p>通过下载Dropbox daemon放到根目录就行了。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230407201040417.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230407201040417.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><h2 id="rclone-kodo"><a href="#rclone-kodo" class="headerlink" title="rclone+kodo"></a>rclone+kodo</h2><p>由于众所周知的原因，dropbox不方便访问，所以尽管它很好用，在我这也不好用。</p><p>为什么我不能直接用对象存储来同步呢？难道我访问oss只能用cdn回源？</p><p>在我考虑用rclone来操作dropbox而不是使用它的客户端时，我发现rclone有s3的选项</p><p>配置好就行了，文档：<a href="https://developer.qiniu.com/kodo/12285/docking-rclone">https://developer.qiniu.com/kodo/12285/docking-rclone</a></p><p>rclone是一个强大的工具</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230407205059142.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230407205059142.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>使用<code>rclone sync local-path qiniu:dest-bucket-name/dest-directory-path  </code>进行同步</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230407211058837.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230407211058837.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>对比本地与云<code>rclone check local-path qiniu:dest-bucket-name/dest-directory-path</code></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230407211352268.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230407211352268.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>非常完美</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;笔记同步方案&quot;&gt;&lt;a href=&quot;#笔记同步方案&quot; class=&quot;headerlink&quot; title=&quot;笔记同步方案&quot;&gt;&lt;/a&gt;笔记同步方案&lt;/h1&gt;&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="未分类" scheme="https://blog.ryaoknw.site/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/"/>
    
    
  </entry>
  
  <entry>
    <title>音乐管理方案</title>
    <link href="https://blog.ryaoknw.site/2023/4/704fa143084e/"/>
    <id>https://blog.ryaoknw.site/2023/4/704fa143084e/</id>
    <published>2023-04-06T04:12:44.000Z</published>
    <updated>2023-04-07T13:21:03.780Z</updated>
    
    <content type="html"><![CDATA[<h1 id="音乐管理方案"><a href="#音乐管理方案" class="headerlink" title="音乐管理方案"></a>音乐管理方案</h1><h2 id="Navidrome"><a href="#Navidrome" class="headerlink" title="Navidrome"></a>Navidrome</h2><p>使用Navidrome管理音乐</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20230405171158098.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20230405171158098.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">navidrome:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">deluan/navidrome:latest</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;4533:4533&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">ND_SCANSCHEDULE:</span> <span class="string">1m</span></span><br><span class="line">      <span class="attr">ND_SPOTIFY_ID:</span> <span class="string">4cd036bsq**</span></span><br><span class="line">      <span class="attr">ND_SPOTIFY_SECRET:</span> <span class="string">249ca01a**</span>  </span><br><span class="line">      <span class="attr">ND_LOGLEVEL:</span> <span class="string">info</span></span><br><span class="line">      <span class="attr">ND_SESSIONTIMEOUT:</span> <span class="string">24h</span></span><br><span class="line">      <span class="attr">ND_BASEURL:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;./data:/data&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;./music:/music:ro&quot;</span> <span class="comment"># 冒号左边修改成自己本地的音乐文件夹路径</span></span><br></pre></td></tr></table></figure><h3 id="Spotify同步"><a href="#Spotify同步" class="headerlink" title="Spotify同步"></a>Spotify同步</h3><p>在 Spotify 中创建一个免费帐户，然后按照以下步骤操作</p><p><a href="https://developer.spotify.com/dashboard/applications%E6%B3%A8%E5%86%8C%E5%9C%B0%E5%9D%80%EF%BC%8C%E7%84%B6%E5%90%8E%E5%8D%95%E5%87%BB">https://developer.spotify.com/dashboard/applications注册地址，然后单击</a> Spotify 的开发者仪表板中的CREATE AN APP</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ND_SPOTIFY_ID        Spotify 客户端 ID</span><br><span class="line">ND_SPOTIFY_SECRETSpotify 客户端 Secret</span><br></pre></td></tr></table></figure><h3 id="转码设置"><a href="#转码设置" class="headerlink" title="转码设置"></a>转码设置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">转码设置之所以要转码，是因为无损的文件比较大，一般都有几百M，所以需要进行转码成，便于客户端进行播放</span><br><span class="line">但 Navidrome 出于安全原因，禁用了从 Web 界面更改参数，所以需要先修改 Docker 的环境变量</span><br><span class="line">ND_ENABLETRANSCODINGCONFIG设置为 true 才能支持转码功能</span><br><span class="line">ND_TRANSCODINGCACHESIZE转码缓存的大小。设置 0 为禁用缓存，默认为 100MB</span><br></pre></td></tr></table></figure><h2 id="miniserve"><a href="#miniserve" class="headerlink" title="miniserve"></a>miniserve</h2><p>Navidrome<strong>无法直接上传音乐文件</strong>，需要文件服务器来管理。</p><p>看到中文博客上用miniserve，搭了一个，<strong>但是非常不好用</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">miniserve:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">svenstaro/miniserve:latest</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">navidrome</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;4534:8080&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;./music:/downloads&quot;</span> <span class="comment"># 冒号左边修改成自己本地的音乐文件夹路径</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">&quot;-r -z -u -q -p 8080 -a username:passwd /downloads&quot;</span> <span class="comment"># </span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br></pre></td></tr></table></figure><h2 id="Nextcloud"><a href="#Nextcloud" class="headerlink" title="Nextcloud"></a>Nextcloud</h2><p>在考虑nextcloud、owncloud、seafile，seafile的文件不是直接保存的，而是分块加密保存的，虽然性能强大，但是<strong>不太符合我的需求</strong>。（有时间考虑搭一个seafile）</p><p>nextcloud是非常热门的文件服务方案，功能非常多。</p><p>尝试搭建，但是功能多过，过于臃肿，不太好用，而且php太慢了，1核2G的服务器想用点轻量的东西。</p><h3 id="部署-1"><a href="#部署-1" class="headerlink" title="部署"></a>部署</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./cloud/db:/var/lib/mysql</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_ROOT_PASSWORD=FtLpb2Mwx3Qc4BTJ7bmh</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_PASSWORD=Ks1acs2R2KU5axpbQ7AU</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_DATABASE=nextcloud</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_USER=ryaoknw</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">nextcloud</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">app:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nextcloud</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">4534</span><span class="string">:80</span></span><br><span class="line">    <span class="attr">links:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./cloud/config:/var/www/html/config</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/root/nextcloud:/var/www/html/data</span> <span class="comment"># 这里是映射到外置硬盘，也自行修改</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./cloud/apps:/var/www/html/apps</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">nextcloud</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_PASSWORD=Ks1acs2R2KU5axpbQ7AU</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_DATABASE=nextcloud</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_USER=ryaoknw</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_HOST=db</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">nextcloud:</span></span><br></pre></td></tr></table></figure><h2 id="cloudreve"><a href="#cloudreve" class="headerlink" title="cloudreve"></a>cloudreve</h2><p>找到了cloudreve和alist, alist的侧重不太一样，决定用cloudreve，cloudreve支持webdav，也可以当个网盘用，但是<strong>不是文件原始目录结构</strong>，操，又不能用。</p><h3 id="部署-2"><a href="#部署-2" class="headerlink" title="部署"></a>部署</h3><p>先创建空文件<code>conf.ini</code>、<code>cloudreve.db</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">cloudreve:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">cloudreve</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">cloudreve/cloudreve:latest</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;5212:5212&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./temp_data:/data</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./cloudreve/uploads:/cloudreve/uploads</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./cloudreve/conf.ini:/cloudreve/conf.ini</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./cloudreve/cloudreve.db:/cloudreve/cloudreve.db</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./cloudreve/avatar:/cloudreve/avatar</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">aria2</span></span><br><span class="line">  <span class="attr">aria2:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">aria2</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">p3terx/aria2-pro</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">RPC_SECRET=DGDj6tUgiBMacKZad4zW</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">RPC_PORT=6800</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./aria2/config:/config</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./temp_data:/data</span></span><br></pre></td></tr></table></figure><h2 id="FileBrowser"><a href="#FileBrowser" class="headerlink" title="FileBrowser"></a>FileBrowser</h2><p>文件原始目录结构的文件服务，直接对应服务器文件目录。</p><h3 id="部署-3"><a href="#部署-3" class="headerlink" title="部署"></a>部署</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">filebrowser:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">filebrowser/filebrowser:latest</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">filebrowser</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8089:80&quot;</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">filebrowser</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/home/root:/srv</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./filebrowser.db:/database.db</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./.filebrowser.json:/.filebrowser.json</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/etc/localtime:/etc/localtime:ro</span></span><br><span class="line">    <span class="attr">logging:</span></span><br><span class="line">      <span class="attr">driver:</span> <span class="string">&#x27;json-file&#x27;</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">max-size:</span> <span class="string">&#x27;1m&#x27;</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">filebrowser:</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">touch filebrowser.db</span><br><span class="line">touch .filebrowser.json</span><br></pre></td></tr></table></figure><p>编辑<code>.filebrowser.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">80</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;locale&quot;</span><span class="punctuation">:</span> <span class="string">&quot;zh-cn&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;baseURL&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;log&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stdout&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;database&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/database.db&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;root&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/srv&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;音乐管理方案&quot;&gt;&lt;a href=&quot;#音乐管理方案&quot; class=&quot;headerlink&quot; title=&quot;音乐管理方案&quot;&gt;&lt;/a&gt;音乐管理方案&lt;/h1&gt;&lt;h2 id=&quot;Navidrome&quot;&gt;&lt;a href=&quot;#Navidrome&quot; class=&quot;headerlink</summary>
      
    
    
    
    <category term="未分类" scheme="https://blog.ryaoknw.site/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/"/>
    
    
  </entry>
  
  <entry>
    <title>2023年1月追番锐评</title>
    <link href="https://blog.ryaoknw.site/2023/4/57dcfb3d37eb/"/>
    <id>https://blog.ryaoknw.site/2023/4/57dcfb3d37eb/</id>
    <published>2023-04-02T06:42:08.000Z</published>
    <updated>2023-04-02T07:16:39.111Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>一月的动画实在没有什么意思。。。完全没有详细评价的动力哦。还是看看4月吧。</p><h2 id="2023年1月"><a href="#2023年1月" class="headerlink" title="2023年1月"></a>2023年1月</h2><h3 id="想要成为影之实力者！"><a href="#想要成为影之实力者！" class="headerlink" title="想要成为影之实力者！"></a>想要成为影之实力者！</h3><p><img src="https://lain.bgm.tv/pic/cover/c/39/96/329114_mB55b.jpg" class="lazyload" data-srcset="https://lain.bgm.tv/pic/cover/c/39/96/329114_mB55b.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>stars：6</p><p>20话动画，10月番1月完结，中二转生异世界</p><p>每集ed换个女主来唱，再添一张涩图诚意满满</p><p>动画改编部分也还行，关键把人设和cv整明白了，制作公司和观众之间达成了默契，用着实在不充裕的制作资源，把功夫花在观众想看的地方，成为了每周一乐的厕纸</p><h3 id="别当欧尼酱了！"><a href="#别当欧尼酱了！" class="headerlink" title="别当欧尼酱了！"></a>别当欧尼酱了！</h3><p><img src="https://lain.bgm.tv/pic/cover/c/7e/ca/378862_24TnR.jpg" class="lazyload" data-srcset="https://lain.bgm.tv/pic/cover/c/7e/ca/378862_24TnR.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>stars：6.5</p><p>萌系作画在近年真吃香，看oped时就被震撼到，这作画就是摆明了在炫技吧。</p><p>全篇都保持了极高的制作水准，Studio Bind纯秀技术，被垃圾污染眼睛时看看别酱动手截图简直是享受</p><h3 id="进击的巨人-最终季-完结篇-前篇"><a href="#进击的巨人-最终季-完结篇-前篇" class="headerlink" title="进击的巨人 最终季 完结篇 前篇"></a>进击的巨人 最终季 完结篇 前篇</h3><p><img src="https://lain.bgm.tv/pic/cover/c/4f/33/376739_KMN9x.jpg" class="lazyload" data-srcset="https://lain.bgm.tv/pic/cover/c/4f/33/376739_KMN9x.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>star：8</p><p>剧场版高水准制作，但也没有那么“高水准”</p><p>只有1h还要分成前后篇，只能说MAPPA确实事情比较多</p><h3 id="冰剑的魔术师将要统一世界"><a href="#冰剑的魔术师将要统一世界" class="headerlink" title="冰剑的魔术师将要统一世界"></a>冰剑的魔术师将要统一世界</h3><p><img src="https://lain.bgm.tv/pic/cover/c/f8/95/379687_51Jj6.jpg" class="lazyload" data-srcset="https://lain.bgm.tv/pic/cover/c/f8/95/379687_51Jj6.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>stars：1</p><p>淳皇裕帝将要统一世界</p><p>太乐了，4倍速瞬间乐完，笑得合不拢嘴</p><h3 id="转生公主与天才千金的魔法革命"><a href="#转生公主与天才千金的魔法革命" class="headerlink" title="转生公主与天才千金的魔法革命"></a>转生公主与天才千金的魔法革命</h3><p><img src="https://lain.bgm.tv/pic/cover/c/fd/3c/395714_5EeZx.jpg" class="lazyload" data-srcset="https://lain.bgm.tv/pic/cover/c/fd/3c/395714_5EeZx.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>stars：5</p><p>人设不错，百合好好好</p><p>演出太傻了，重百剧情不带点纠结情愫和扭曲文学看着没意思</p><p>除了yuri之外内容不需要评价</p><h3 id="生而为狗，我很幸福"><a href="#生而为狗，我很幸福" class="headerlink" title="生而为狗，我很幸福"></a>生而为狗，我很幸福</h3><p><img src="https://lain.bgm.tv/pic/cover/c/83/d3/374319_JSG4d.jpg" class="lazyload" data-srcset="https://lain.bgm.tv/pic/cover/c/83/d3/374319_JSG4d.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>stars：4.5</p><p>看无修第一话时：神！</p><p>继续每周看时：好无聊，逆天的劲头一过，同质化的内容完全提不起继续看的兴趣</p><h3 id="魔王学院的不适任者～史上最强的魔王始祖，转生就读子孙们的学校～-Ⅱ"><a href="#魔王学院的不适任者～史上最强的魔王始祖，转生就读子孙们的学校～-Ⅱ" class="headerlink" title="魔王学院的不适任者～史上最强的魔王始祖，转生就读子孙们的学校～ Ⅱ"></a>魔王学院的不适任者～史上最强的魔王始祖，转生就读子孙们的学校～ Ⅱ</h3><p><img src="https://lain.bgm.tv/pic/cover/c/5e/85/330054_86gc8.jpg" class="lazyload" data-srcset="https://lain.bgm.tv/pic/cover/c/5e/85/330054_86gc8.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>star：4</p><p>第一季时好感拉满，大沼心简直是厕纸大师，但在第二季中明显拉垮。</p><p>实在不想听裕帝的答辩声线，剧情质量与第一季也完全不能比</p><p>本来很期待这位“镀金厕纸”，但最后表现地十分遗憾。</p><h2 id="补番"><a href="#补番" class="headerlink" title="补番"></a>补番</h2><p><strong>只涉及近年放送但当季没追、之后才补完的，可能涉及想要特意评价但没时间写长评的。</strong></p><h3 id="擅长捉弄的高木同学-剧场版"><a href="#擅长捉弄的高木同学-剧场版" class="headerlink" title="擅长捉弄的高木同学 剧场版"></a>擅长捉弄的高木同学 剧场版</h3><p><img src="https://lain.bgm.tv/pic/cover/c/fd/00/347888_fBpdB.jpg" class="lazyload" data-srcset="https://lain.bgm.tv/pic/cover/c/fd/00/347888_fBpdB.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>stars：6</p><p>大郎，该吃狗粮了，都什么年代了还在吃传统狗粮？</p><p>我认为高木胜在小剧场的形式和只使用西片视角来表现捉弄的细节和二人心意的精妙演出，但剧场版稀烂的后半段只值得听听音乐。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;一月的动画实在没有什么意思。。。完全没有详细评价的动力哦。还是看看4月吧。&lt;/p&gt;
&lt;h2 id=&quot;2023年1月&quot;&gt;&lt;a href=&quot;#2</summary>
      
    
    
    
    <category term="动画" scheme="https://blog.ryaoknw.site/categories/%E5%8A%A8%E7%94%BB/"/>
    
    
    <category term="动画" scheme="https://blog.ryaoknw.site/tags/%E5%8A%A8%E7%94%BB/"/>
    
  </entry>
  
  <entry>
    <title>k8s(基本概念)</title>
    <link href="https://blog.ryaoknw.site/2023/4/7b74ee081b63/"/>
    <id>https://blog.ryaoknw.site/2023/4/7b74ee081b63/</id>
    <published>2023-04-02T06:36:16.000Z</published>
    <updated>2023-04-16T19:16:57.917Z</updated>
    
    <content type="html"><![CDATA[<h2 id="k8s是啥"><a href="#k8s是啥" class="headerlink" title="k8s是啥"></a>k8s是啥</h2><p>为<strong>容器化</strong>应用提供集群部署和管理的开源工具</p><p>集群由master和node组成</p><p><strong>Kubernetes 组件</strong></p><p><code>kube-apiserver</code> API 服务器，公开了 Kubernetes API<br><code>etcd</code> 键值数据库，可以作为保存 Kubernetes 所有集群数据的后台数据库<br><code>kube-scheduler</code> 调度 Pod 到哪个节点运行<br><code>kube-controller</code> 集群控制器<br><code>cloud-controller</code> 与云服务商交互</p><p><strong>node 组件</strong></p><p><code>Kubelet</code> 负责当前 Node 节点的 Pod 的创建、监控、修改和删除等</p><p><code>Proxy</code> 负责 Service 代理，同时也是软件模式的负载均衡器</p><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p><img src="https://cdn.ryaoknw.site/picgo/image-20221104044635790.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20221104044635790.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><h3 id="pod"><a href="#pod" class="headerlink" title="pod"></a>pod</h3><p>Kubernetes 中创建和管理的、最小的可部署的计算单元。安排在节点上，包含一组容器和卷。同一个Pod里的容器共享同一个网络命名空间，可以使用localhost互相通信。</p><p>一个pod内共享内部的所有资源。</p><h3 id="lable"><a href="#lable" class="headerlink" title="lable"></a>lable</h3><p>Label是attach到Pod的一对键&#x2F;值对，用来传递用户定义的属性。Label Selector。</p><h3 id="replication-controller-RC"><a href="#replication-controller-RC" class="headerlink" title="replication controller(RC)"></a>replication controller(RC)</h3><p>Replication Controller确保任意时间都有指定数量的Pod“副本”在运行。如果为某个Pod创建了Replication Controller并且指定3个副本，它会创建3个Pod，并且持续监控它们。如果某个Pod不响应，那么Replication Controller会替换它，保持总数为3</p><p>（管理pod生命周期）</p><h3 id="service"><a href="#service" class="headerlink" title="service"></a>service</h3><p>每个 Pod 都会被分配一个唯一的 IP, 不过缺点就是这个 IP 会随着 Pod 的销毁而消失。</p><p>一个 Service 可以视为是一组提供相同服务的 Pod 的对外访问接口</p><h2 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a>deploy</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="comment"># 部署名字</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">test-k8s</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">2</span></span><br><span class="line">  <span class="comment"># 用来查找关联的 Pod，所有标签都匹配才行</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">test-k8s</span></span><br><span class="line">  <span class="comment"># 定义 Pod 相关数据</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">test-k8s</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="comment"># 定义容器，可以多个</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span> <span class="comment"># 容器名字</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">nginx:latest</span> <span class="comment"># 镜像</span></span><br><span class="line">          <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p> 单独配置 pod :</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">test-pod</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="comment"># 定义容器，可以多个</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span> <span class="comment"># 容器名字</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">nginx:latest</span> <span class="comment"># 镜像</span></span><br></pre></td></tr></table></figure><h2 id="service-1"><a href="#service-1" class="headerlink" title="service"></a>service</h2><ul><li>Service 通过 label 关联对应的 Pod</li><li>Servcie 生命周期不跟 Pod 绑定，不会因为 Pod 重创改变 IP</li><li>提供了负载均衡功能，自动转发流量到不同 Pod</li><li>可对集群外部提供访问端口</li><li>集群内部可通过服务名字访问</li></ul><p><img src="https://cdn.ryaoknw.site/picgo/image-20221104044644362.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20221104044644362.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">test-k8s</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">test-k8s</span></span><br><span class="line">  <span class="comment"># 默认 ClusterIP 集群内可访问，NodePort 节点可访问，LoadBalancer 负载均衡模式（需要负载均衡器才可用）</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">NodePort</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">8080</span> <span class="comment"># 本 Service 的端口</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">test-k8s</span> <span class="comment"># 必须配置</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">8080</span> <span class="comment"># 容器端口</span></span><br><span class="line">      <span class="comment"># nodePort: 31000 # 节点端口，范围固定 30000 ~ 32767</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">8090</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">test-other</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">8090</span></span><br><span class="line">      <span class="comment"># nodePort: 32000</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="StatefulSet"><a href="#StatefulSet" class="headerlink" title="StatefulSet"></a>StatefulSet</h2><p>StatefulSet 是用来管理有状态的应用，例如数据库。<br>前面我们部署的应用，都是不需要存储数据，不需要记住状态的，可以随意扩充副本，每个副本都是一样的，可替代的。<br>而像数据库、Redis 这类有状态的，则不能随意扩充副本。<br>StatefulSet 会固定每个 Pod 的名字</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">StatefulSet</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">mongodb</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">serviceName:</span> <span class="string">mongodb</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">mongodb</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">mongodb</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">mongo</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">mongo:latest</span></span><br><span class="line">          <span class="comment"># IfNotPresent 仅本地没有镜像时才远程拉，Always 永远都是从远程拉，Never 永远只用本地镜像，本地没有则报错</span></span><br><span class="line">          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">          <span class="attr">volumeMounts:</span>  </span><br><span class="line">              <span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/data/db</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">mongo-data</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">mongo-data</span></span><br><span class="line">          <span class="attr">persistentVolumeClaim:</span></span><br><span class="line">             <span class="attr">claimName:</span> <span class="string">mongodata</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">mongodb</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">mongodb</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span></span><br><span class="line">  <span class="comment"># HeadLess （不分配ip）</span></span><br><span class="line">  <span class="attr">clusterIP:</span> <span class="string">None</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">27017</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">27017</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>Service 的 <code>CLUSTER-IP</code> 是空的，Pod 名字也是固定的。</li><li>Pod 创建和销毁是有序的，创建是顺序的，销毁是逆序的。</li><li>Pod 重建不会改变名字，除了IP，所以不要用IP直连</li></ul><p>如果直接使用 Service 名字连接，会随机转发请求，要连接指定 Pod，可以这样<code>pod-name.service-name</code>，比如<code>mongodb-0.mongodb</code></p><h2 id="ConfigMap-amp-Secret"><a href="#ConfigMap-amp-Secret" class="headerlink" title="ConfigMap &amp; Secret"></a>ConfigMap &amp; Secret</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">mongo-config</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">mongoHost:</span> <span class="string">mongodb-0.mongodb</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.ryaoknw.site/picgo/image-20221030141043781.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20221030141043781.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>密码、TOKEN，我们可以放到 secret 中。（数据需要Base64编码）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">mongo-secret</span></span><br><span class="line"><span class="comment"># Opaque 用户定义的任意数据 https://kubernetes.io/zh/docs/concepts/configuration/secret/#secret-types</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">Opaque</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="comment"># 数据要 base64。https://tools.fun/base64.html</span></span><br><span class="line">  <span class="attr">mongo-username:</span> <span class="string">bW9uZ291c2Vy</span></span><br><span class="line">  <span class="attr">mongo-password:</span> <span class="string">bW9uZ29wYXNz</span></span><br></pre></td></tr></table></figure><blockquote><p>作为环境变量</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">StatefulSet</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">mongodb</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">mongodb</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">mongodb</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">mongo</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">mongo:4.4</span></span><br><span class="line">          <span class="comment"># IfNotPresent 仅本地没有镜像时才远程拉，Always 永远都是从远程拉，Never 永远只用本地镜像，本地没有则报错</span></span><br><span class="line">          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">          <span class="attr">env:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">MONGO_INITDB_ROOT_USERNAME</span></span><br><span class="line">            <span class="attr">valueFrom:</span></span><br><span class="line">              <span class="attr">secretKeyRef:</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">mongo-secret</span></span><br><span class="line">                <span class="attr">key:</span> <span class="string">mongo-username</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">MONGO_INITDB_ROOT_PASSWORD</span></span><br><span class="line">            <span class="attr">valueFrom:</span></span><br><span class="line">              <span class="attr">secretKeyRef:</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">mongo-secret</span></span><br><span class="line">                <span class="attr">key:</span> <span class="string">mongo-password</span></span><br><span class="line">          <span class="comment"># Secret 的所有数据定义为容器的环境变量，Secret 中的键名称为 Pod 中的环境变量名称</span></span><br><span class="line">          <span class="comment"># envFrom:</span></span><br><span class="line">          <span class="comment"># - secretRef:</span></span><br><span class="line">          <span class="comment">#     name: mongo-secret</span></span><br></pre></td></tr></table></figure><p>或者挂载为文件（不展开了）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">mypod</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis</span></span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">foo</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">&quot;/etc/foo&quot;</span></span><br><span class="line">      <span class="attr">readOnly:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">foo</span></span><br><span class="line">    <span class="attr">secret:</span></span><br><span class="line">      <span class="attr">secretName:</span> <span class="string">mysecret</span></span><br></pre></td></tr></table></figure><h2 id="ingress"><a href="#ingress" class="headerlink" title="ingress"></a>ingress</h2><p>Ingress 为外部访问集群提供了一个 <strong>统一</strong> 入口，避免了对外暴露集群端口；<br>功能类似 Nginx，可以根据域名、路径把请求转发到不同的 Service。<br>可以配置 https</p><p><strong>跟 LoadBalancer 有什么区别？</strong><br>LoadBalancer 需要对外暴露端口，不安全；<br>无法根据域名、路径转发流量到不同 Service，多个 Service 则需要开多个 LoadBalancer；<br>功能单一，无法配置 https</p><p>要使用 Ingress，需要一个负载均衡器 + Ingress Controller。</p><p>负载均衡插件，可以安装 <a href="https://metallb.universe.tf/">METALLB</a>。</p><p>NGINX Ingress <a href="https://kubernetes.io/zh-cn/docs/tasks/access-application-cluster/ingress-minikube/">https://kubernetes.io/zh-cn/docs/tasks/access-application-cluster/ingress-minikube/</a></p><p>配置yaml。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Ingress</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">simple-example</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">ingressClassName:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">host:</span> <span class="string">hello-world.info</span></span><br><span class="line">    <span class="attr">http:</span></span><br><span class="line">      <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">/doc</span></span><br><span class="line">        <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">        <span class="attr">backend:</span></span><br><span class="line">          <span class="attr">service:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">service1</span></span><br><span class="line">            <span class="attr">port:</span></span><br><span class="line">              <span class="attr">number:</span> <span class="number">4200</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">/svnbucket</span></span><br><span class="line">        <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">        <span class="attr">backend:</span></span><br><span class="line">          <span class="attr">service:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">service2</span></span><br><span class="line">            <span class="attr">port:</span></span><br><span class="line">              <span class="attr">number:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;k8s是啥&quot;&gt;&lt;a href=&quot;#k8s是啥&quot; class=&quot;headerlink&quot; title=&quot;k8s是啥&quot;&gt;&lt;/a&gt;k8s是啥&lt;/h2&gt;&lt;p&gt;为&lt;strong&gt;容器化&lt;/strong&gt;应用提供集群部署和管理的开源工具&lt;/p&gt;
&lt;p&gt;集群由master和nod</summary>
      
    
    
    
    <category term="kubernetes" scheme="https://blog.ryaoknw.site/categories/kubernetes/"/>
    
    
    <category term="kubernetes" scheme="https://blog.ryaoknw.site/tags/kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>MIT6.824 Lab1</title>
    <link href="https://blog.ryaoknw.site/2023/4/0decddbbfd18/"/>
    <id>https://blog.ryaoknw.site/2023/4/0decddbbfd18/</id>
    <published>2023-04-02T06:34:35.000Z</published>
    <updated>2023-04-02T06:38:39.610Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Lab1"><a href="#Lab1" class="headerlink" title="Lab1"></a>Lab1</h2><h3 id="mapreduce"><a href="#mapreduce" class="headerlink" title="mapreduce"></a>mapreduce</h3><p>lab1需要实现一个mapreduce </p><p>Master和Worker的main例程在<code>main/mrcoordinator.go</code>和<code>main/mrworker.go</code>中，不要改动这些程序。<br>需要在<code>mr/coordinator.go</code>,<code>mr/worker.go</code>和<code>mr/rpc.go</code>中实现自己的代码。</p><p>worker执行map和reduce工作，master用于调度和分配任务，同时维护任务和worker的状态，两者通过rpc调用通信。</p><ul><li>在处理 Map 任务时，需要将中间产物 Key 切分为 <code>nReduce</code> 个 reduce 任务，这个参数是调用 <code>MakeMaster()</code> 函数时指定的！</li><li>第 X 个 Reduce 任务的产物应当命名为：<code>mr-out-X</code>；</li><li>最终输出文件 <code>mr-out-X</code> 应当每行一个输出，并且采用 <code>&quot;%v %v&quot;</code> 格式（和 <code>main/mrsequential.go</code> 一致）；</li><li>当 <code>main/mrmaster.go</code> 调用 <code>mr/master.go</code> 的 <code>Done</code> 函数返回 true 时，其认为所有任务都已完成，将会退出；</li><li>当所有的任务都结束，worker 应当退出；一个简单的实现是：当调用 <code>call</code> rpc 与 master 通信失败时，认为任务结束；不过一个另外一个做法是当任务结束后，master 下发一个 <code>请退出</code> 的任务，交给 worker 去执行</li></ul><p><code>worker.go</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> mr</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;bytes&quot;</span></span><br><span class="line"><span class="string">&quot;encoding/json&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;hash/fnv&quot;</span></span><br><span class="line"><span class="string">&quot;io&quot;</span></span><br><span class="line"><span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line"><span class="string">&quot;log&quot;</span></span><br><span class="line"><span class="string">&quot;net/rpc&quot;</span></span><br><span class="line"><span class="string">&quot;os&quot;</span></span><br><span class="line"><span class="string">&quot;path/filepath&quot;</span></span><br><span class="line"><span class="string">&quot;sync&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Map functions return a slice of KeyValue.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">type</span> KeyValue <span class="keyword">struct</span> &#123;</span><br><span class="line">Key   <span class="type">string</span></span><br><span class="line">Value <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// use ihash(key) % NReduce to choose the reduce</span></span><br><span class="line"><span class="comment">// task number for each KeyValue emitted by Map.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ihash</span><span class="params">(key <span class="type">string</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">h := fnv.New32a()</span><br><span class="line">h.Write([]<span class="type">byte</span>(key))</span><br><span class="line"><span class="keyword">return</span> <span class="type">int</span>(h.Sum32() &amp; <span class="number">0x7fffffff</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// main/mrworker.go calls this function.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Worker</span><span class="params">(mapf <span class="keyword">func</span>(<span class="type">string</span>, <span class="type">string</span>)</span></span> []KeyValue,</span><br><span class="line">reducef <span class="function"><span class="keyword">func</span><span class="params">(<span class="type">string</span>, []<span class="type">string</span>)</span></span> <span class="type">string</span>) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Your worker implementation here.</span></span><br><span class="line">info := doGetInfo()</span><br><span class="line">log.Printf(<span class="string">&quot;Worker: receive coordinator&#x27;s info %v\n&quot;</span>, info)</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">task := doCorrespond()</span><br><span class="line">log.Printf(<span class="string">&quot;Worker: receive coordinator&#x27;s response %v\n&quot;</span>, task)</span><br><span class="line"><span class="keyword">switch</span> task.Type &#123;</span><br><span class="line"><span class="keyword">case</span> MapType:</span><br><span class="line">MapTask(mapf, task.File, info.NReduce, task.Id)</span><br><span class="line"><span class="keyword">case</span> ReduceType:</span><br><span class="line">ReduceTask(reducef, info.NMap, task.Id)</span><br><span class="line"><span class="keyword">case</span> WaitType:</span><br><span class="line">time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line"><span class="keyword">case</span> StopType:</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">MapTask</span><span class="params">(mapF <span class="keyword">func</span>(<span class="type">string</span>, <span class="type">string</span>)</span></span> []KeyValue, filePath <span class="type">string</span>, NReduce <span class="type">int</span>, id <span class="type">int</span>) &#123;</span><br><span class="line">fileName := filePath</span><br><span class="line">file, err := os.Open(fileName)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">&quot;cannot open %v&quot;</span>, fileName)</span><br><span class="line">&#125;</span><br><span class="line">content, err := ioutil.ReadAll(file)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">&quot;cannot read %v&quot;</span>, fileName)</span><br><span class="line">&#125;</span><br><span class="line">file.Close()</span><br><span class="line"></span><br><span class="line">kva := mapF(fileName, <span class="type">string</span>(content))</span><br><span class="line">intermediates := <span class="built_in">make</span>([][]KeyValue, NReduce)</span><br><span class="line"><span class="keyword">for</span> _, kv := <span class="keyword">range</span> kva &#123;</span><br><span class="line">index := ihash(kv.Key) % NReduce</span><br><span class="line">intermediates[index] = <span class="built_in">append</span>(intermediates[index], kv)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line"><span class="keyword">for</span> index, intermediate := <span class="keyword">range</span> intermediates &#123;</span><br><span class="line">wg.Add(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(index <span class="type">int</span>, intermediate []KeyValue)</span></span> &#123;</span><br><span class="line"><span class="keyword">defer</span> wg.Done()</span><br><span class="line">tmpFileName := fmt.Sprintf(<span class="string">&quot;mr-%d-%d&quot;</span>, id, index)</span><br><span class="line"><span class="keyword">var</span> buf bytes.Buffer</span><br><span class="line">enc := json.NewEncoder(&amp;buf)</span><br><span class="line"><span class="keyword">for</span> _, kv := <span class="keyword">range</span> intermediate &#123;</span><br><span class="line">err := enc.Encode(&amp;kv)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">&quot;cannot encode json %v\n&quot;</span>, kv.Key)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">err := WriteFile(tmpFileName, &amp;buf)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">&quot;cannot write file %v, %v\n&quot;</span>, tmpFileName, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;(index, intermediate)</span><br><span class="line">&#125;</span><br><span class="line">wg.Wait()</span><br><span class="line">doReport(id, MapType)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ReduceTask</span><span class="params">(reduceF <span class="keyword">func</span>(<span class="type">string</span>, []<span class="type">string</span>)</span></span> <span class="type">string</span>, NMap <span class="type">int</span>, id <span class="type">int</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> kva []KeyValue</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; NMap; i++ &#123;</span><br><span class="line">filePath := fmt.Sprintf(<span class="string">&quot;mr-%d-%d&quot;</span>, i, id)</span><br><span class="line">file, err := os.Open(filePath)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">&quot;cannot open %v&quot;</span>, filePath)</span><br><span class="line">&#125;</span><br><span class="line">dec := json.NewDecoder(file)</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line"><span class="keyword">var</span> kv KeyValue</span><br><span class="line"><span class="keyword">if</span> err := dec.Decode(&amp;kv); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">kva = <span class="built_in">append</span>(kva, kv)</span><br><span class="line">&#125;</span><br><span class="line">file.Close()</span><br><span class="line">&#125;</span><br><span class="line">results := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>][]<span class="type">string</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, kv := <span class="keyword">range</span> kva &#123;</span><br><span class="line">results[kv.Key] = <span class="built_in">append</span>(results[kv.Key], kv.Value)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> buf bytes.Buffer</span><br><span class="line"><span class="keyword">for</span> key, values := <span class="keyword">range</span> results &#123;</span><br><span class="line">output := reduceF(key, values)</span><br><span class="line">fmt.Fprintf(&amp;buf, <span class="string">&quot;%v %v\n&quot;</span>, key, output)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tmpFileName := fmt.Sprintf(<span class="string">&quot;mr-out-%d&quot;</span>, id)</span><br><span class="line">err := WriteFile(tmpFileName, &amp;buf)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">&quot;cannot write file %v, %v\n&quot;</span>, tmpFileName, err)</span><br><span class="line">&#125;</span><br><span class="line">doReport(id, ReduceType)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// send an RPC request to the coordinator, wait for the response.</span></span><br><span class="line"><span class="comment">// usually returns true.</span></span><br><span class="line"><span class="comment">// returns false if something goes wrong.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">call</span><span class="params">(rpcname <span class="type">string</span>, args <span class="keyword">interface</span>&#123;&#125;, reply <span class="keyword">interface</span>&#123;&#125;)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line"><span class="comment">// c, err := rpc.DialHTTP(&quot;tcp&quot;, &quot;127.0.0.1&quot;+&quot;:1234&quot;)</span></span><br><span class="line">sockname := coordinatorSock()</span><br><span class="line">c, err := rpc.DialHTTP(<span class="string">&quot;unix&quot;</span>, sockname)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(<span class="string">&quot;dialing:&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> c.Close()</span><br><span class="line"></span><br><span class="line">err = c.Call(rpcname, args, reply)</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(err)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doCorrespond</span><span class="params">()</span></span> *CorrespondResponse &#123;</span><br><span class="line">rsp := CorrespondResponse&#123;&#125;</span><br><span class="line">call(<span class="string">&quot;Coordinator.Correspond&quot;</span>, &amp;CorrespondRequest&#123;&#125;, &amp;rsp)</span><br><span class="line"><span class="keyword">return</span> &amp;rsp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doGetInfo</span><span class="params">()</span></span> *InfoResponse &#123;</span><br><span class="line">rsp := InfoResponse&#123;&#125;</span><br><span class="line">call(<span class="string">&quot;Coordinator.Info&quot;</span>, &amp;InfoRequest&#123;&#125;, &amp;rsp)</span><br><span class="line"><span class="keyword">return</span> &amp;rsp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doReport</span><span class="params">(id <span class="type">int</span>, t TaskType)</span></span> &#123;</span><br><span class="line">call(<span class="string">&quot;Coordinator.Report&quot;</span>, &amp;ReportRequest&#123;id, t&#125;, &amp;ReportResponse&#123;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">WriteFile</span><span class="params">(filename <span class="type">string</span>, r io.Reader)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">dir, file := filepath.Split(filename)</span><br><span class="line"><span class="keyword">if</span> dir == <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">dir = <span class="string">&quot;.&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f, err := ioutil.TempFile(dir, file)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;cannot create temp file: %v&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">_ = os.Remove(f.Name())</span><br><span class="line">&#125;</span><br><span class="line">&#125;()</span><br><span class="line"><span class="keyword">defer</span> f.Close()</span><br><span class="line">name := f.Name()</span><br><span class="line"><span class="keyword">if</span> _, err := io.Copy(f, r); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;cannot write data to tempfile %q: %v&quot;</span>, name, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> err := f.Close(); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;can&#x27;t close tempfile %q: %v&quot;</span>, name, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">info, err := os.Stat(filename)</span><br><span class="line"><span class="keyword">if</span> os.IsNotExist(err) &#123;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> err := os.Chmod(name, info.Mode()); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;can&#x27;t set filemode on tempfile %q: %v&quot;</span>, name, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> err := os.Rename(name, filename); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;cannot replace %q with tempfile %q: %v&quot;</span>, filename, name, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>coordinator.go</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> mr</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;log&quot;</span></span><br><span class="line"><span class="string">&quot;net&quot;</span></span><br><span class="line"><span class="string">&quot;net/http&quot;</span></span><br><span class="line"><span class="string">&quot;net/rpc&quot;</span></span><br><span class="line"><span class="string">&quot;os&quot;</span></span><br><span class="line"><span class="string">&quot;sync&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">Timeout = time.Second * <span class="number">10</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> once *sync.Once</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Task <span class="keyword">struct</span> &#123;</span><br><span class="line">File      <span class="type">string</span></span><br><span class="line">Id        <span class="type">int</span></span><br><span class="line">Type      TaskType</span><br><span class="line">Status    TaskStatus</span><br><span class="line">StartTime time.Time</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Coordinator <span class="keyword">struct</span> &#123;</span><br><span class="line">lock sync.Mutex</span><br><span class="line"></span><br><span class="line">Files []<span class="type">string</span></span><br><span class="line"><span class="comment">// Your definitions here.</span></span><br><span class="line">NReduce  <span class="type">int</span></span><br><span class="line">NMap     <span class="type">int</span></span><br><span class="line">Close    <span class="type">bool</span></span><br><span class="line">TaskCh   <span class="keyword">chan</span> CorrespondMsg</span><br><span class="line">Tasks    []Task</span><br><span class="line">doneCh   <span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line">ReportCh <span class="keyword">chan</span> ReportMsg</span><br><span class="line">WorkFlow Flow</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> CorrespondMsg <span class="keyword">struct</span> &#123;</span><br><span class="line">response *CorrespondResponse</span><br><span class="line">ok       <span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ReportMsg <span class="keyword">struct</span> &#123;</span><br><span class="line">request *ReportRequest</span><br><span class="line">ok      <span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Your code here -- RPC handlers for the worker to call.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Coordinator)</span></span> Correspond(request *CorrespondRequest, response *CorrespondResponse) <span class="type">error</span> &#123;</span><br><span class="line">msg := CorrespondMsg&#123;response, <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;)&#125;</span><br><span class="line">c.TaskCh &lt;- msg</span><br><span class="line">&lt;-msg.ok <span class="comment">// wait send task response</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Coordinator)</span></span> Info(request *InfoRequest, response *InfoResponse) <span class="type">error</span> &#123;</span><br><span class="line">response.NMap, response.NReduce, response.Close = c.NMap, c.NReduce, c.Close</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Coordinator)</span></span> Report(request *ReportRequest, response *ReportResponse) <span class="type">error</span> &#123;</span><br><span class="line">msg := ReportMsg&#123;request, <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;)&#125;</span><br><span class="line">c.ReportCh &lt;- msg</span><br><span class="line">&lt;-msg.ok</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Coordinator)</span></span> Scheduler() &#123;</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line"><span class="keyword">switch</span> c.WorkFlow &#123;</span><br><span class="line"><span class="keyword">case</span> OnInit:</span><br><span class="line">c.WorkFlow = OnMap</span><br><span class="line"><span class="keyword">case</span> OnMap:</span><br><span class="line">once.Do(<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">log.Printf(<span class="string">&quot;Coordinator start %v\n&quot;</span>, OnMap)</span><br><span class="line">c.initMap()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"><span class="keyword">case</span> msg := &lt;-c.TaskCh:</span><br><span class="line">c.Assigner(&amp;msg)</span><br><span class="line">log.Printf(<span class="string">&quot;Coordinator: assigned a task %v to worker\n&quot;</span>, msg.response)</span><br><span class="line">msg.ok &lt;- <span class="keyword">struct</span>&#123;&#125;&#123;&#125;</span><br><span class="line"><span class="keyword">case</span> msg := &lt;-c.ReportCh:</span><br><span class="line">log.Printf(<span class="string">&quot;Coordinator: Worker has executed task %v \n&quot;</span>, msg.request)</span><br><span class="line">c.lock.Lock()</span><br><span class="line">c.Tasks[msg.request.Id].Status = Finished</span><br><span class="line">c.lock.Unlock()</span><br><span class="line">msg.ok &lt;- <span class="keyword">struct</span>&#123;&#125;&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">case</span> OnReduce:</span><br><span class="line">once.Do(<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">log.Printf(<span class="string">&quot;Coordinator: %v finished, start %v\n&quot;</span>, OnMap, OnReduce)</span><br><span class="line">c.initReduce()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"><span class="keyword">case</span> msg := &lt;-c.TaskCh:</span><br><span class="line">c.Assigner(&amp;msg)</span><br><span class="line">log.Printf(<span class="string">&quot;Coordinator: assigned a task %v to worker\n&quot;</span>, msg.response)</span><br><span class="line">msg.ok &lt;- <span class="keyword">struct</span>&#123;&#125;&#123;&#125;</span><br><span class="line"><span class="keyword">case</span> msg := &lt;-c.ReportCh:</span><br><span class="line">log.Printf(<span class="string">&quot;Coordinator: Worker has executed task %v\n&quot;</span>, msg.request)</span><br><span class="line">c.lock.Lock()</span><br><span class="line">c.Tasks[msg.request.Id].Status = Finished</span><br><span class="line">c.lock.Unlock()</span><br><span class="line">msg.ok &lt;- <span class="keyword">struct</span>&#123;&#125;&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">case</span> OnComplete:</span><br><span class="line">once.Do(<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">log.Printf(<span class="string">&quot;Coordinator: %v finished\n&quot;</span>, OnReduce)</span><br><span class="line">c.initComplete()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"><span class="keyword">case</span> msg := &lt;-c.TaskCh:</span><br><span class="line">msg.response.Type = StopType</span><br><span class="line">log.Printf(<span class="string">&quot;Coordinator: assigned stop to worker\n&quot;</span>)</span><br><span class="line">msg.ok &lt;- <span class="keyword">struct</span>&#123;&#125;&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Coordinator)</span></span> Assigner(msg *CorrespondMsg) &#123;</span><br><span class="line">c.lock.Lock()</span><br><span class="line"><span class="keyword">defer</span> c.lock.Unlock()</span><br><span class="line"></span><br><span class="line">finish := <span class="literal">true</span></span><br><span class="line">getJob := <span class="literal">false</span></span><br><span class="line"><span class="keyword">for</span> id, task := <span class="keyword">range</span> c.Tasks &#123;</span><br><span class="line"><span class="keyword">switch</span> task.Status &#123;</span><br><span class="line"><span class="keyword">case</span> UnDo:</span><br><span class="line">finish = <span class="literal">false</span></span><br><span class="line">getJob = <span class="literal">true</span></span><br><span class="line">c.Tasks[id].Status = Working</span><br><span class="line">c.Tasks[id].StartTime = time.Now()</span><br><span class="line">msg.response.Id = id</span><br><span class="line"><span class="keyword">switch</span> c.WorkFlow &#123;</span><br><span class="line"><span class="keyword">case</span> OnMap:</span><br><span class="line">msg.response.Type = MapType</span><br><span class="line">msg.response.File = c.Files[id]</span><br><span class="line"><span class="keyword">case</span> OnReduce:</span><br><span class="line">msg.response.Type = ReduceType</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">case</span> Working:</span><br><span class="line">finish = <span class="literal">false</span></span><br><span class="line"><span class="comment">// set timeout</span></span><br><span class="line"><span class="keyword">if</span> time.Now().Sub(task.StartTime) &gt; Timeout &#123;</span><br><span class="line">c.Tasks[id].Status = UnDo</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">case</span> Finished:</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> getJob &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> !getJob &#123;</span><br><span class="line">msg.response.Type = WaitType</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> finish &#123;</span><br><span class="line">c.WorkFlow++</span><br><span class="line">once = <span class="built_in">new</span>(sync.Once)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Coordinator)</span></span> initMap() &#123;</span><br><span class="line">c.WorkFlow = OnMap</span><br><span class="line">c.Tasks = <span class="built_in">make</span>([]Task, <span class="built_in">len</span>(c.Files))</span><br><span class="line"><span class="keyword">for</span> index, file := <span class="keyword">range</span> c.Files &#123;</span><br><span class="line">c.Tasks[index] = Task&#123;</span><br><span class="line">File:   file,</span><br><span class="line">Id:     index,</span><br><span class="line">Status: UnDo,</span><br><span class="line">Type:   MapType,</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Coordinator)</span></span> initReduce() &#123;</span><br><span class="line">c.WorkFlow = OnReduce</span><br><span class="line">c.Tasks = <span class="built_in">make</span>([]Task, c.NReduce)</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; c.NReduce; i++ &#123;</span><br><span class="line">c.Tasks[i] = Task&#123;</span><br><span class="line">Id:     i,</span><br><span class="line">Status: UnDo,</span><br><span class="line">Type:   ReduceType,</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Coordinator)</span></span> initComplete() &#123;</span><br><span class="line">c.WorkFlow = OnComplete</span><br><span class="line">c.doneCh &lt;- <span class="keyword">struct</span>&#123;&#125;&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// start a thread that listens for RPCs from worker.go</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Coordinator)</span></span> server() &#123;</span><br><span class="line">rpc.Register(c)</span><br><span class="line">rpc.HandleHTTP()</span><br><span class="line"><span class="comment">//l, e := net.Listen(&quot;tcp&quot;, &quot;:1234&quot;)</span></span><br><span class="line">sockname := coordinatorSock()</span><br><span class="line">os.Remove(sockname)</span><br><span class="line">l, e := net.Listen(<span class="string">&quot;unix&quot;</span>, sockname)</span><br><span class="line"><span class="keyword">if</span> e != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(<span class="string">&quot;listen error:&quot;</span>, e)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">go</span> http.Serve(l, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// main/mrcoordinator.go calls Done() periodically to find out</span></span><br><span class="line"><span class="comment">// if the entire job has finished.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Coordinator)</span></span> Done() <span class="type">bool</span> &#123;</span><br><span class="line">&lt;-c.doneCh</span><br><span class="line">c.Close = <span class="literal">true</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// create a Coordinator.</span></span><br><span class="line"><span class="comment">// main/mrcoordinator.go calls this function.</span></span><br><span class="line"><span class="comment">// nReduce is the number of reduce tasks to use.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">MakeCoordinator</span><span class="params">(files []<span class="type">string</span>, nReduce <span class="type">int</span>)</span></span> *Coordinator &#123;</span><br><span class="line">c := Coordinator&#123;</span><br><span class="line">Files:    files,</span><br><span class="line">NReduce:  nReduce,</span><br><span class="line">NMap:     <span class="built_in">len</span>(files),</span><br><span class="line">Close:    <span class="literal">false</span>,</span><br><span class="line">doneCh:   <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;, <span class="number">1</span>),</span><br><span class="line">TaskCh:   <span class="built_in">make</span>(<span class="keyword">chan</span> CorrespondMsg),</span><br><span class="line">ReportCh: <span class="built_in">make</span>(<span class="keyword">chan</span> ReportMsg),</span><br><span class="line">WorkFlow: OnInit,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Your code here.</span></span><br><span class="line">once = <span class="built_in">new</span>(sync.Once)</span><br><span class="line">c.server()</span><br><span class="line"><span class="keyword">go</span> c.Scheduler()</span><br><span class="line"><span class="keyword">return</span> &amp;c</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>rpc.go</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> mr</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// RPC definitions.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// remember to capitalize all names.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;strconv&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> TaskType <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Flow <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> TaskStatus <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">WaitType TaskType = <span class="literal">iota</span></span><br><span class="line">MapType</span><br><span class="line">ReduceType</span><br><span class="line">StopType</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(task TaskType)</span></span> String() <span class="type">string</span> &#123;</span><br><span class="line"><span class="keyword">switch</span> task &#123;</span><br><span class="line"><span class="keyword">case</span> MapType:</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;MapType&quot;</span></span><br><span class="line"><span class="keyword">case</span> ReduceType:</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;ReduceType&quot;</span></span><br><span class="line"><span class="keyword">case</span> WaitType:</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;WaitType&quot;</span></span><br><span class="line"><span class="keyword">case</span> StopType:</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;StopType&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">panic</span>(fmt.Sprintf(<span class="string">&quot;unexpected TaskType %d&quot;</span>, task))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line"><span class="comment">// TaskStatus</span></span><br><span class="line">UnDo TaskStatus = <span class="literal">iota</span></span><br><span class="line">Working</span><br><span class="line">Finished</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(status TaskStatus)</span></span> String() <span class="type">string</span> &#123;</span><br><span class="line"><span class="keyword">switch</span> status &#123;</span><br><span class="line"><span class="keyword">case</span> UnDo:</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;UnDo&quot;</span></span><br><span class="line"><span class="keyword">case</span> Working:</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;Working&quot;</span></span><br><span class="line"><span class="keyword">case</span> Finished:</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;Finished&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">panic</span>(fmt.Sprintf(<span class="string">&quot;unexpected TaskStatus %d&quot;</span>, status))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line"><span class="comment">// WorkFlow</span></span><br><span class="line">OnInit Flow = <span class="literal">iota</span></span><br><span class="line">OnMap</span><br><span class="line">OnReduce</span><br><span class="line">OnComplete</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(flow Flow)</span></span> String() <span class="type">string</span> &#123;</span><br><span class="line"><span class="keyword">switch</span> flow &#123;</span><br><span class="line"><span class="keyword">case</span> OnInit:</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;OnInit&quot;</span></span><br><span class="line"><span class="keyword">case</span> OnMap:</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;OnMap&quot;</span></span><br><span class="line"><span class="keyword">case</span> OnReduce:</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;OnReduce&quot;</span></span><br><span class="line"><span class="keyword">case</span> OnComplete:</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;OnComplete&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">panic</span>(fmt.Sprintf(<span class="string">&quot;unexpected WorkFlow %d&quot;</span>, flow))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> CorrespondRequest <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> CorrespondResponse <span class="keyword">struct</span> &#123;</span><br><span class="line">File <span class="type">string</span></span><br><span class="line">Id   <span class="type">int</span></span><br><span class="line">Type TaskType</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> InfoRequest <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> InfoResponse <span class="keyword">struct</span> &#123;</span><br><span class="line">NMap    <span class="type">int</span></span><br><span class="line">NReduce <span class="type">int</span></span><br><span class="line">Close   <span class="type">bool</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ReportRequest <span class="keyword">struct</span> &#123;</span><br><span class="line">Id   <span class="type">int</span></span><br><span class="line">Type TaskType</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ReportResponse <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(response CorrespondResponse)</span></span> String() <span class="type">string</span> &#123;</span><br><span class="line"><span class="keyword">switch</span> response.Type &#123;</span><br><span class="line"><span class="keyword">case</span> MapType:</span><br><span class="line"><span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;&#123;Type:%v,File:%v,Id:%v&#125;&quot;</span>, response.Type, response.File, response.Id)</span><br><span class="line"><span class="keyword">case</span> ReduceType:</span><br><span class="line"><span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;&#123;Type:%v,Id:%v&#125;&quot;</span>, response.Type, response.Id)</span><br><span class="line"><span class="keyword">case</span> WaitType, StopType:</span><br><span class="line"><span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;&#123;Type:%v&#125;&quot;</span>, response.Type)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">panic</span>(fmt.Sprintf(<span class="string">&quot;unexpected Type %d&quot;</span>, response.Type))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(request ReportRequest)</span></span> String() <span class="type">string</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;&#123;Id:%v,Type:%v&#125;&quot;</span>, request.Id, request.Type)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add your RPC definitions here.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Cook up a unique-ish UNIX-domain socket name</span></span><br><span class="line"><span class="comment">// in /var/tmp, for the coordinator.</span></span><br><span class="line"><span class="comment">// Can&#x27;t use the current directory since</span></span><br><span class="line"><span class="comment">// Athena AFS doesn&#x27;t support UNIX-domain sockets.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">coordinatorSock</span><span class="params">()</span></span> <span class="type">string</span> &#123;</span><br><span class="line">s := <span class="string">&quot;/var/tmp/824-mr-&quot;</span></span><br><span class="line">s += strconv.Itoa(os.Getuid())</span><br><span class="line"><span class="keyword">return</span> s</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Lab1&quot;&gt;&lt;a href=&quot;#Lab1&quot; class=&quot;headerlink&quot; title=&quot;Lab1&quot;&gt;&lt;/a&gt;Lab1&lt;/h2&gt;&lt;h3 id=&quot;mapreduce&quot;&gt;&lt;a href=&quot;#mapreduce&quot; class=&quot;headerlink&quot; title=</summary>
      
    
    
    
    <category term="Lab" scheme="https://blog.ryaoknw.site/categories/Lab/"/>
    
    
    <category term="MIT6.824" scheme="https://blog.ryaoknw.site/tags/MIT6-824/"/>
    
  </entry>
  
  <entry>
    <title>CS144 Lab2</title>
    <link href="https://blog.ryaoknw.site/2023/4/356cea6e7c3a/"/>
    <id>https://blog.ryaoknw.site/2023/4/356cea6e7c3a/</id>
    <published>2023-04-02T06:27:30.000Z</published>
    <updated>2023-04-02T07:38:22.136Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Lab2"><a href="#Lab2" class="headerlink" title="Lab2"></a>Lab2</h2><h3 id="wrapping-int32"><a href="#wrapping-int32" class="headerlink" title="wrapping_int32"></a>wrapping_int32</h3><p>实现序列号、绝对序列号与流索引间的转换。</p><p>出现cmake报错为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CMake Error: The following variables are used in this project, but they are set to NOTFOUND.</span><br><span class="line">Please set them or make sure they are set and tested correctly in the CMake files:</span><br><span class="line">LIBPCAP</span><br><span class="line">    linked by target &quot;tcp_parser&quot; in directory /home/kangyu/sponge/testslinked by target &quot;tcp_parser&quot; in directory /home/ryao/Projects/cppProjects/CS144Labs/tests</span><br></pre></td></tr></table></figure><p>需要安装<code>libpcap-dev</code>库来解决. <code>apt install libpcap-dev</code></p><p>文段中指出了三种序列的关系，其中stream indices就是在lab1中的序列。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20221117141326664.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20221117141326664.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p><img src="https://cdn.ryaoknw.site/picgo/image-20221117141427341.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20221117141427341.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>照着写就行了</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">WrappingInt32 <span class="title">wrap</span><span class="params">(<span class="type">uint64_t</span> n, WrappingInt32 isn)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//    uint64_t m = (1ll &lt;&lt; 32);</span></span><br><span class="line">    <span class="comment">//    uint32_t num = (n + isn.raw_value()) % m;</span></span><br><span class="line">    <span class="comment">//    return WrappingInt32&#123;num&#125;;</span></span><br><span class="line">    <span class="keyword">return</span> WrappingInt32&#123;isn.<span class="built_in">raw_value</span>() + <span class="built_in">static_cast</span>&lt;<span class="type">uint32_t</span>&gt;(n)&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//! Transform a WrappingInt32 into an &quot;absolute&quot; 64-bit sequence number (zero-indexed)</span></span><br><span class="line"><span class="comment">//! \param n The relative sequence number</span></span><br><span class="line"><span class="comment">//! \param isn The initial sequence number</span></span><br><span class="line"><span class="comment">//! \param checkpoint A recent absolute 64-bit sequence number</span></span><br><span class="line"><span class="comment">//! \returns the 64-bit sequence number that wraps to `n` and is closest to `checkpoint`</span></span><br><span class="line"><span class="comment">//!</span></span><br><span class="line"><span class="comment">//! \note Each of the two streams of the TCP connection has its own ISN. One stream</span></span><br><span class="line"><span class="comment">//! runs from the local TCPSender to the remote TCPReceiver and has one ISN,</span></span><br><span class="line"><span class="comment">//! and the other stream runs from the remote TCPSender to the local TCPReceiver and</span></span><br><span class="line"><span class="comment">//! has a different ISN.</span></span><br><span class="line"><span class="function"><span class="type">uint64_t</span> <span class="title">unwrap</span><span class="params">(WrappingInt32 n, WrappingInt32 isn, <span class="type">uint64_t</span> checkpoint)</span> </span>&#123;</span><br><span class="line">    <span class="type">uint32_t</span> offset = n.<span class="built_in">raw_value</span>() - isn.<span class="built_in">raw_value</span>();</span><br><span class="line">    <span class="type">uint64_t</span> t = (checkpoint &amp; <span class="number">0xFFFFFFFF00000000</span>) + offset;</span><br><span class="line">    <span class="type">uint64_t</span> ret = t;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">abs</span>(<span class="built_in">int64_t</span>(t + (<span class="number">1ul</span> &lt;&lt; <span class="number">32</span>) - checkpoint)) &lt; <span class="built_in">abs</span>(<span class="built_in">int64_t</span>(t - checkpoint))) &#123;</span><br><span class="line">        ret = t + (<span class="number">1ul</span> &lt;&lt; <span class="number">32</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (t &gt;= (<span class="number">1ul</span> &lt;&lt; <span class="number">32</span>) &amp;&amp; <span class="built_in">abs</span>(<span class="built_in">int64_t</span>(t - (<span class="number">1ul</span> &lt;&lt; <span class="number">32</span>) - checkpoint)) &lt; <span class="built_in">abs</span>(<span class="built_in">int64_t</span>(ret - checkpoint))) &#123;</span><br><span class="line">        ret = t - (<span class="number">1ul</span> &lt;&lt; <span class="number">32</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>用 <code>ctest -R wrap</code> 进行测试</p><h3 id="tcp-receiver"><a href="#tcp-receiver" class="headerlink" title="tcp_receiver"></a>tcp_receiver</h3><p>实现tcp的接收端。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20221119213414108.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20221119213414108.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>要求为：</p><blockquote><p>In the rest of this lab, you’ll be implementing the TCPReceiver. It will (1) receive segments from its peer, (2) reassemble the ByteStream using your StreamReassembler, and calculate the (3) acknowledgment number (ackno) and (4) the window size.</p></blockquote><p>需要实现<code>segment_received(const TCPSegment &amp;seg)</code>、<code>ackno()</code>、<code>window_size()</code>，具体的要求在文档(<a href="https://cs144.github.io/assignments/lab2.pdf)%E9%87%8C%E5%86%99%E7%9A%84%E5%BE%88%E6%B8%85%E6%A5%9A%E3%80%82">https://cs144.github.io/assignments/lab2.pdf)里写的很清楚。</a></p><p>总体还是很简单的。</p><p>需要注意的有：</p><ol><li><code>ackno()</code>: 对于SYN FIN 是需要单独占两个位置的 如果SYN出现了 需要+1 如果FIN也出现了 就需要再+1</li></ol><p><code>tcp_receiver.hh</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TCPReceiver</span> &#123;</span><br><span class="line">    <span class="comment">//! Our data structure for re-assembling bytes.</span></span><br><span class="line">    StreamReassembler _reassembler;</span><br><span class="line">    <span class="type">uint64_t</span> _abs_seqno;</span><br><span class="line">    WrappingInt32 _isn;</span><br><span class="line">    <span class="type">bool</span> _syn_flag;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//! The maximum number of bytes we&#x27;ll store.</span></span><br><span class="line">    <span class="type">size_t</span> _capacity;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//! \brief Construct a TCP receiver</span></span><br><span class="line">    <span class="comment">//!</span></span><br><span class="line">    <span class="comment">//! \param capacity the maximum number of bytes that the receiver will</span></span><br><span class="line">    <span class="comment">//!                 store in its buffers at any give time.</span></span><br><span class="line">    <span class="built_in">TCPReceiver</span>(<span class="type">const</span> <span class="type">size_t</span> capacity)</span><br><span class="line">        : _reassembler(capacity)</span><br><span class="line">        , _abs_seqno(<span class="number">0</span>)</span><br><span class="line">        , _isn(<span class="number">0</span>)</span><br><span class="line">        , _syn_flag(<span class="literal">false</span>)</span><br><span class="line">        , _capacity(capacity) &#123;&#125;</span><br></pre></td></tr></table></figure><p><code>tcp_receiver.cc</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">TCPReceiver::segment_received</span><span class="params">(<span class="type">const</span> TCPSegment &amp;seg)</span> </span>&#123;</span><br><span class="line">    <span class="type">const</span> TCPHeader &amp;header = seg.<span class="built_in">header</span>();</span><br><span class="line">    <span class="comment">// 判断是否是 SYN 包</span></span><br><span class="line">    <span class="keyword">if</span> (header.syn) &#123;</span><br><span class="line">        _isn = header.seqno;</span><br><span class="line">        _syn_flag = <span class="literal">true</span>;</span><br><span class="line">        _abs_seqno = <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!_syn_flag) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    _abs_seqno = <span class="built_in">unwrap</span>(header.seqno, _isn, _abs_seqno);</span><br><span class="line">    <span class="comment">// 判断是否是 FIN 包</span></span><br><span class="line">    <span class="type">bool</span> _fin_flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (header.fin) &#123;</span><br><span class="line">        _fin_flag = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">uint64_t</span> stream_index = _abs_seqno - <span class="number">1</span> + header.syn;</span><br><span class="line">    _reassembler.<span class="built_in">push_substring</span>(seg.<span class="built_in">payload</span>().<span class="built_in">copy</span>(), stream_index, _fin_flag);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">optional&lt;WrappingInt32&gt; <span class="title">TCPReceiver::ackno</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 判断是否是在 LISTEN 状态</span></span><br><span class="line">    <span class="keyword">if</span> (!_syn_flag)</span><br><span class="line">        <span class="keyword">return</span> std::<span class="literal">nullopt</span>;</span><br><span class="line">    <span class="comment">// 如果不在 LISTEN 状态，则 ackno 还需要加上一个 SYN 标志的长度</span></span><br><span class="line">    <span class="type">uint64_t</span> abs_ack_no = _reassembler.<span class="built_in">stream_out</span>().<span class="built_in">bytes_written</span>() + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// 如果当前处于 FIN_RECV 状态，则还需要加上 FIN 标志长度</span></span><br><span class="line">    <span class="keyword">if</span> (_reassembler.<span class="built_in">stream_out</span>().<span class="built_in">input_ended</span>()) &#123;</span><br><span class="line">        ++abs_ack_no;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">wrap</span>(abs_ack_no, <span class="built_in">WrappingInt32</span>(_isn));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">TCPReceiver::window_size</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> _capacity - _reassembler.<span class="built_in">stream_out</span>().<span class="built_in">buffer_size</span>(); &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Lab2&quot;&gt;&lt;a href=&quot;#Lab2&quot; class=&quot;headerlink&quot; title=&quot;Lab2&quot;&gt;&lt;/a&gt;Lab2&lt;/h2&gt;&lt;h3 id=&quot;wrapping-int32&quot;&gt;&lt;a href=&quot;#wrapping-int32&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="Lab" scheme="https://blog.ryaoknw.site/categories/Lab/"/>
    
    
    <category term="CS144" scheme="https://blog.ryaoknw.site/tags/CS144/"/>
    
  </entry>
  
  <entry>
    <title>CS144 Lab1</title>
    <link href="https://blog.ryaoknw.site/2023/4/f440e1660a5f/"/>
    <id>https://blog.ryaoknw.site/2023/4/f440e1660a5f/</id>
    <published>2023-04-02T06:25:30.000Z</published>
    <updated>2023-04-02T07:38:05.799Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Lab1"><a href="#Lab1" class="headerlink" title="Lab1"></a>Lab1</h2><h3 id="stream-reassembler"><a href="#stream-reassembler" class="headerlink" title="stream_reassembler"></a>stream_reassembler</h3><p>实现一个流重组器，一个将字节流的字串或者小段按照正确顺序来拼接回连续字节流的模块。</p><p>要求：</p><ol><li>接收子串（由一串字节和大数据流中该串的第一个字节的索引组成），并提供一个<code>ByteStream</code>，其中所有的数据都被正确排序</li><li>注意考虑bytestream写满了的情况，以及reassembler满了的情况</li><li>注意边界等号</li></ol><p><img src="https://cdn.ryaoknw.site/picgo/image-20221116144212736.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20221116144212736.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p><code>void StreamReassembler::push_substring(const string &amp;data, const size_t index, const bool eof)</code>会接收一个子串，用_output.write()将串整理后写入，同时bytestream中可能同时调用了read()，此时会改变边界。</p><p>维护一个buffer list保证buffer不重叠，当data越界时需要裁剪。同时在write、插入buffer list时维护3个边界。</p><p>一开始我的想法是维护一个buffer的map，在插入新buffer时找到左侧已有的buffer判断是否重叠，如果重叠则合并两个buffer串，做相同的操作直到右侧（<code>index+data.size()</code>），同时还要维护整个map的capacity，并做裁剪。这样写出来的逻辑非常复杂。最后面向测试编程实在过不了所有测例，在最后折磨了一天后决定重写。</p><p>其实可以直接用capacity申请一个buffer的列表。没有字符的部分相当于字符<code>\0</code>，在插入子串时只需要计算出start和end的index，然后将buffer表的这一段覆盖即可，这样做就只需要维护unread，unassembled和unacceptable三个边界即可。在理解上和实现上都简化了太多！</p><blockquote><p>tips:实在调不对代码时可以尝试检查前面lab的代码是不是真的写对了，比如把别人的代码copy过来如果还是过不了test。。。不然就会想我一样调了一天都调不对</p></blockquote><p><code>stream_reassembler.hh</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StreamReassembler</span> &#123;</span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">// Your code here -- add private members as necessary.</span></span><br><span class="line">    std::deque&lt;string&gt; _buffer;</span><br><span class="line">    std::deque&lt;<span class="type">bool</span>&gt; _flag;</span><br><span class="line">    <span class="type">bool</span> _is_eof = <span class="literal">false</span>;</span><br><span class="line">    <span class="type">size_t</span> _eof_idx = <span class="number">0</span>;</span><br><span class="line">    <span class="type">size_t</span> _unassembled_bytes_size = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    ByteStream _output;  <span class="comment">//!&lt; The reassembled in-order byte stream</span></span><br><span class="line">    <span class="type">size_t</span> _capacity;    <span class="comment">//!&lt; The maximum number of bytes</span></span><br><span class="line">    </span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p><code>stream_reassembler.cc</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">StreamReassembler::<span class="built_in">StreamReassembler</span>(<span class="type">const</span> <span class="type">size_t</span> capacity)</span><br><span class="line">    : _buffer(capacity, <span class="string">&quot;&quot;</span>), _flag(capacity, <span class="literal">false</span>), _output(capacity), _capacity(capacity) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//! \details This function accepts a substring (aka a segment) of bytes,</span></span><br><span class="line"><span class="comment">//! possibly out-of-order, from the logical stream, and assembles any newly</span></span><br><span class="line"><span class="comment">//! contiguous substrings and writes them into the output stream in order.</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">StreamReassembler::push_substring</span><span class="params">(<span class="type">const</span> string &amp;data, <span class="type">const</span> <span class="type">size_t</span> index, <span class="type">const</span> <span class="type">bool</span> eof)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// size_t _first_unread = _start_index + _output.bytes_read();</span></span><br><span class="line">    <span class="type">size_t</span> _first_unassembled = _output.<span class="built_in">bytes_written</span>();</span><br><span class="line">    <span class="type">size_t</span> _first_unaccept = _first_unassembled + _capacity;</span><br><span class="line">    <span class="keyword">if</span> (index &gt;= _first_unaccept || index + data.<span class="built_in">length</span>() &lt; _first_unassembled) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 裁剪字符串开始和结尾的index</span></span><br><span class="line">    <span class="type">size_t</span> begin_index = index;</span><br><span class="line">    <span class="type">size_t</span> end_index = index + data.<span class="built_in">length</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (begin_index &lt; _first_unassembled) &#123;</span><br><span class="line">        begin_index = _first_unassembled;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (end_index &gt;= _first_unaccept) &#123;</span><br><span class="line">        end_index = _first_unaccept;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 元素入队</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = begin_index; i &lt; end_index; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!_flag[i - _first_unassembled]) &#123;</span><br><span class="line">            _buffer[i - _first_unassembled] = data[i - index];</span><br><span class="line">            _unassembled_bytes_size++;</span><br><span class="line">            _flag[i - _first_unassembled] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    string wait_str;</span><br><span class="line">    <span class="keyword">while</span> (_flag.<span class="built_in">front</span>()) &#123;</span><br><span class="line">        wait_str += _buffer.<span class="built_in">front</span>();</span><br><span class="line">        _buffer.<span class="built_in">pop_front</span>();</span><br><span class="line">        _flag.<span class="built_in">pop_front</span>();</span><br><span class="line">        <span class="comment">// 为了保持队列容量不变需要在后面添加空元素占位</span></span><br><span class="line">        _buffer.<span class="built_in">emplace_back</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        _flag.<span class="built_in">emplace_back</span>(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (wait_str.<span class="built_in">length</span>() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">stream_out</span>().<span class="built_in">write</span>(wait_str);</span><br><span class="line">        _unassembled_bytes_size -= wait_str.<span class="built_in">length</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (eof) &#123;</span><br><span class="line">        _is_eof = <span class="literal">true</span>;</span><br><span class="line">        _eof_idx = end_index;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (_is_eof &amp;&amp; _eof_idx == _output.<span class="built_in">bytes_written</span>()) &#123;</span><br><span class="line">        _output.<span class="built_in">end_input</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Lab1&quot;&gt;&lt;a href=&quot;#Lab1&quot; class=&quot;headerlink&quot; title=&quot;Lab1&quot;&gt;&lt;/a&gt;Lab1&lt;/h2&gt;&lt;h3 id=&quot;stream-reassembler&quot;&gt;&lt;a href=&quot;#stream-reassembler&quot; class=&quot;</summary>
      
    
    
    
    <category term="Lab" scheme="https://blog.ryaoknw.site/categories/Lab/"/>
    
    
    <category term="CS144" scheme="https://blog.ryaoknw.site/tags/CS144/"/>
    
  </entry>
  
  <entry>
    <title>CS144 Lab0</title>
    <link href="https://blog.ryaoknw.site/2023/4/c97217e90828/"/>
    <id>https://blog.ryaoknw.site/2023/4/c97217e90828/</id>
    <published>2023-04-02T06:24:30.000Z</published>
    <updated>2023-04-02T07:37:55.450Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>cs144的lab文档非常详细，非常详细，详细到每一个都有10几页的大小，像一个仓库的readme，<del>以至于菜狗花大量时间读机翻却没看明白到底要干些什么，这也导致在开始lab0时根本不清楚自己要干些什么</del>。无论如何，这是一个很值得写完的lab。</p><p><img src="https://cdn.ryaoknw.site/picgo/image-20221116140320977.png" class="lazyload" data-srcset="https://cdn.ryaoknw.site/picgo/image-20221116140320977.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><h2 id="Lab0"><a href="#Lab0" class="headerlink" title="Lab0"></a>Lab0</h2><h3 id="webget"><a href="#webget" class="headerlink" title="webget"></a>webget</h3><p>在<code>webget.cc</code>实现一个webget，实现访问外部网页。</p><p>需要使用<code>TCPSocket</code>和<code>Address</code>类</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">get_URL</span><span class="params">(<span class="type">const</span> string &amp;host, <span class="type">const</span> string &amp;path)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Your code here.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// You will need to connect to the &quot;http&quot; service on</span></span><br><span class="line">    <span class="comment">// the computer whose name is in the &quot;host&quot; string,</span></span><br><span class="line">    <span class="comment">// then request the URL path given in the &quot;path&quot; string.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Then you&#x27;ll need to print out everything the server sends back,</span></span><br><span class="line">    <span class="comment">// (not just one call to read() -- everything) until you reach</span></span><br><span class="line">    <span class="comment">// the &quot;eof&quot; (end of file).</span></span><br><span class="line">    <span class="function">Address <span class="title">addr</span><span class="params">(host, <span class="string">&quot;http&quot;</span>)</span></span>;</span><br><span class="line">    TCPSocket st;</span><br><span class="line">    st.<span class="built_in">connect</span>(addr);</span><br><span class="line">    st.<span class="built_in">write</span>(<span class="string">&quot;GET &quot;</span> + path + <span class="string">&quot; HTTP/1.1\r\n&quot;</span>);</span><br><span class="line">    st.<span class="built_in">write</span>(<span class="string">&quot;HOST: &quot;</span> + host + <span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">    st.<span class="built_in">write</span>(<span class="string">&quot;Connection: close\r\n&quot;</span>);</span><br><span class="line">    st.<span class="built_in">write</span>(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span>(!st.<span class="built_in">eof</span>()) &#123;</span><br><span class="line">        cout &lt;&lt; st.<span class="built_in">read</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    st.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">    cerr &lt;&lt; <span class="string">&quot;Function called: get_URL(&quot;</span> &lt;&lt; host &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; path &lt;&lt; <span class="string">&quot;).\n&quot;</span>;</span><br><span class="line">    cerr &lt;&lt; <span class="string">&quot;Warning: get_URL() has not been implemented yet.\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="byte-stream"><a href="#byte-stream" class="headerlink" title="byte_stream"></a>byte_stream</h3><p>需要实现一个可靠byte流。</p><p>大致需求：</p><ol><li><p>需要限制缓冲区长度，在缓冲区未满时才能写入缓冲区</p></li><li><p>字节流可以无限长</p></li><li><p>它是单线程的，不用考虑并发</p></li></ol><p>无非就是维护一个bytestream数据结构。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ByteStream</span> &#123;</span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">    std::string _buffer;</span><br><span class="line">    <span class="type">size_t</span> _capacity = <span class="number">0</span>;</span><br><span class="line">    <span class="type">size_t</span> _read_count = <span class="number">0</span>;</span><br><span class="line">    <span class="type">size_t</span> _write_count = <span class="number">0</span>;</span><br><span class="line">    <span class="type">bool</span> _input_end_flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="type">bool</span> _error = <span class="literal">false</span>;  <span class="comment">//!&lt; Flag indicating that the stream suffered an error.</span></span><br><span class="line">    </span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p><code>byte_stream.cc</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">ByteStream::<span class="built_in">ByteStream</span>(<span class="type">const</span> <span class="type">size_t</span> capacity) : _buffer(), _capacity(capacity) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">ByteStream::write</span><span class="params">(<span class="type">const</span> string &amp;data)</span> </span>&#123;</span><br><span class="line">    <span class="type">size_t</span> cc = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; data.<span class="built_in">size</span>() &amp;&amp; <span class="built_in">remaining_capacity</span>() &gt; <span class="number">0</span>; ++i, ++_write_count, ++cc)</span><br><span class="line">        _buffer.<span class="built_in">push_back</span>(data[i]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//! \param[in] len bytes will be copied from the output side of the buffer</span></span><br><span class="line"><span class="function">string <span class="title">ByteStream::peek_output</span><span class="params">(<span class="type">const</span> <span class="type">size_t</span> len)</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> _buffer.<span class="built_in">substr</span>(<span class="number">0</span>, len); &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//! \param[in] len bytes will be removed from the output side of the buffer</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ByteStream::pop_output</span><span class="params">(<span class="type">const</span> <span class="type">size_t</span> len)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (len &gt;= <span class="built_in">buffer_size</span>()) &#123;</span><br><span class="line">        _read_count += <span class="built_in">buffer_size</span>();</span><br><span class="line">        _buffer.<span class="built_in">clear</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        _read_count += len;</span><br><span class="line">        _buffer.<span class="built_in">erase</span>(<span class="number">0</span>, len);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//! Read (i.e., copy and then pop) the next &quot;len&quot; bytes of the stream</span></span><br><span class="line"><span class="comment">//! \param[in] len bytes will be popped and returned</span></span><br><span class="line"><span class="comment">//! \returns a string</span></span><br><span class="line"><span class="function">std::string <span class="title">ByteStream::read</span><span class="params">(<span class="type">const</span> <span class="type">size_t</span> len)</span> </span>&#123;</span><br><span class="line">    string data = <span class="keyword">this</span>-&gt;<span class="built_in">peek_output</span>(len);</span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">pop_output</span>(len);</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ByteStream::end_input</span><span class="params">()</span> </span>&#123; _input_end_flag = <span class="literal">true</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">ByteStream::input_ended</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> _input_end_flag; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">ByteStream::buffer_size</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> _buffer.<span class="built_in">size</span>(); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">ByteStream::buffer_empty</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> _buffer.<span class="built_in">size</span>() == <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">ByteStream::eof</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">buffer_empty</span>() &amp;&amp; <span class="built_in">input_ended</span>(); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">ByteStream::bytes_written</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> _write_count; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">ByteStream::bytes_read</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> _read_count; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">ByteStream::remaining_capacity</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> _capacity - _buffer.<span class="built_in">size</span>(); &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;cs144的lab文档非常详细，非常详细，详细到每一个都有10几页的大小，像一个仓库的readme，&lt;del&gt;以至于菜狗花大量时间读机翻却没</summary>
      
    
    
    
    <category term="Lab" scheme="https://blog.ryaoknw.site/categories/Lab/"/>
    
    
    <category term="CS144" scheme="https://blog.ryaoknw.site/tags/CS144/"/>
    
  </entry>
  
  <entry>
    <title>向这狗娘养的世界</title>
    <link href="https://blog.ryaoknw.site/2023/2/7e899c277a7b/"/>
    <id>https://blog.ryaoknw.site/2023/2/7e899c277a7b/</id>
    <published>2023-02-26T08:56:50.000Z</published>
    <updated>2024-02-08T13:53:30.961Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉，您输入的密码错误，请检查后重新输入。" data-whm="抱歉, 当前文章不能被校验, 不过您还是可以看看解密后的内容。">  <script id="hbeData" type="hbeData" data-hmacdigest="39ce0f8b21e96ea40c0cb52170ce267f0fd947b0477bbf9466b5c73b45dba0b1">688c91111db14f9d3aa396aa4128ccffdacdbe782570004c361f8b69f19568aeeeadaff6c616a36466967f4aa1a0a0541960d207ab8a56812ebfb99e843497742848826da20fefa43941c2853ce072323a7e60b2c9559d04c588a7552a5530ee3889a60a36503823ec713f283d04817a3b749f04c92a972c7e7a8dcfb81a4a6a7172b07c75c599cd90020bb7fb7aa784302b8a8e8af36df4e97cf259725f0758d3aefe0dc89bc726a1b0ff4cdf3f4faa30c4fd392b2491865d5e85402cefa43acd170a42cc49d67ba4747a931bca1fdb7b41e1731dd443c1e18e273648c845686c1fb0fbb325f8320097076347b7a41c8d88e424a5e2f637e5c2e370a77ad436840fb61fe7d2203e9047f9382477e81e3cfcc84dfd6bf096152c61a8231d130cfd6f96181d3a75460696d9156ba828d1955f881e42f33967a2a6d94cf8885ab396726c4e5dc14a112d2b5ba8b155a4dbac73f874e8d5e0b3ad3773f60f4fd4b99c0ead70780d146b0ad8815c648b967b92a5000f281b5ffeed6e9b12a79c27dc9fda1403c9c8e1d079eca4d241da2d7be8903947522f48497bc459b88fa8236848ff547d43d99c4b0bf7f7c663cbd50373651f7e438107a465eb9c4a356038c218de855385d207d9850236266a54b88c04e51f15e3c7563757cba571879de170fccd457b6dd4bf3fd0010798a07f6490dea2ec367ab9053ac9902417bd067d9d7e7fe1ea82e7e77f752d94d85b770eccba06bbd9398099a8ada08e449f90ff8d95a85e3fdef0dab66f4540033c7325c93b600fb46896fb8df6ffe02af3b99cd34ba1f104201f1ac2bc534590a74cba0063bd94e60ec64df3b4548f9805c97aab4bb75a62323fc38de12699db59ab79cca48574d457b66cdec08bcb5604a30150acf2713bcc44e11f90f850c5285735ab46a1b645098ff8acc96780abc2a8d68d07293724fcef0ab0d85dd3384997f898d0e426f1d73d2214f4bf7870fccd8fa5b60a57ab69b2227a39c668f9fec735ab82e2e8f5cd890097cc4c8961c61366017e0c60a313c4fff6477894e9bbb8729beb84f604dea2d9b88a1920dcde8b0cf89169b456459edf54a65d8e3a4472cc894781d686bf54d95f8e67385be8e7003b846a04217609aec65d6dc6fe8b232b97fddd4f6ea1a4a671ecf89e79d9ec7982cacb142a6b1e918349d780de7ee82dbebd0278a6c6a08b379f1149fee6f7d2fd5838d2199eae2eac771278fb872f3dc04edc0884f3fe1efa84dea2f630631a1aa20ee552d2795872b17498a9191f257e5accf64f12d10f1d7076978e84b2b120d457e3a43adba8f6a21e5db6f65de89a8f9aade32400cfcc860ea6cb1deb7eb613cd843c878e495e0a168ee7d06610a950cdd38eb774051ba709c6c4bcae1b1d0a5ee2cad40713b608c65dd6bd5f01a6a26ab016b60e80e3a88a2bc770fdc1d9a19d03957e449f6b2aeb8860dd5e4bfd41759a9f361c11c9bbb6254bdabe60fae78025c17fa8e477f0ca0468f04f41092052d6c574176d3b57217144ce9126ff727b89ed8b27c4f5e2f133b3c3a168b671a4bb23b2544e47082dfc30db6d094de5cbf574aba8308e0d99a834e589126b1e56f9b282c28b330bb883af10bd511a9de5f8cbe275aced1a36e8d94d4b7f95c922956ab3f7a3ad5fe5b25412130028f1e3c72d9796de840514c322fd44e34327af30ffd35791256c4dfe4773b16a577e48365cc74fae7eccb62091cee796b9bd7829f40184270de27ba5c8b3574375b9effc0c52d25e906276aba95bfaff8c4f52ab90006f256155b3057ef208742fe0ba82967ce35abca9265a056b58176a7d15e5c079dbe4a5137a69f9d0c7f281af7835490a0bd8329590e9635c92c96dc0dcb494e7d12c4ebb60abbe173ed67488b7fee843ff486e5283242c57e1cfb67370ff1e78779621c5b12d8a3519c7b6b0a7cf703add8f23ad043062df6a744968f91aaa99dc1ba055367a975d3083c75b18fa356cfc5824651ecd029fb9271be62e647d5e0a4e889889d5c88d56e1c925176f70d4441930d76e5962a711f5b8caffb641f208a417a0867a07fcd7d8ec88aabc655c7dad853bbabd7f457ad51007c885ed7bd4baa5d07d993a98fc819d6bfb1642491d4ae15b23073940880ca86100a6ab58c475e7d15500ae38a2539cfb947d422270fe69ae743e0961c2f395be4eed3f093b45aa32e66b6bdc895280fbd43998f80dd9d0e7e9e6f59dc3e981d09ff13a86d10b3b83509d392cf3e1200403c334179d9c8282fc27e7af0ae3324deb2432e5998921b7bdb269281635dd16c3f999f0adabd9825554c97417f99151813e6cb7d66df2ffbb0bcd6794214717997f527c619dc3e0bb0ba038f5a84551b6d567f81fe40c74b42d32b55b8a5249e7f614f61633257167dbd79e529bb829907f9b0296b322fcc90d65a2ed16c7686be1f4888175a694b59ebbf772b3cf251323bf616fb4de01d288a3d83a225d035cbcca3e43097ba1d9dd70a645043db3c46240381a01015f1c97895fc0d35c670d76be4ac94203fd7d444d36b0d58a37bb0405a1ae4ea71f8c49b0a24dbea7039e599bc2a49cb8c68f97ddf127ddc4fef182fa6523894904793fdfee30ded8602daf2d626b08acf1ab59152395591623509e29fb65bbbe94885a14c806f4f1f086ffb0aa6cffa5b7c519968bd18fde006778ff869cbd85f33a1457fd308d36e1b09419c1c22cd0c096f0cd4425612efedb5d0cfc887b4c4c581fc0bb1d37940508b14e3f1ea3c1842349574cef8d8562e1759908ec98bcdeaa580b9663ff0b8c3d1377520da1e35ac1fcd01233ff791c3ef885ccc87b19e1750a7640fbc6a47031e288121ce69efb5de9e1ea98c2fbf624973c9f9fe151b81ed69f5316b3c6630ecf402e0446927cfe5d6b6c7c35b5addf209b9b7941bab060e10bc89478bc47614771fe05be045b4511934209e8313a802f7e958c074445b8177988f087b11dce647494c75704e984225491ed95bee058eba1107e826b07b30c6b5df342290467b020c081e56d20e948d5ebcb285f33773d29fa22de001a44c280752bf418cade93cdc3c46cb6035e3f6c910d3b9fd789807e68669d5a9836b32215e5dfeb67e2d1952d1ea1997f798397360d8cdebf2455ecd6aa94d0ca82bac22ddaaf568f14734dc617e7544a15e82fe3d9af94a66d9f5663d73bdb1f2f58ae3b50fffe5228fdb9408b1e869c486385aed1fb4f0afe75b647280cd6d2563efcd4defbfc14e87ef2593e1a3f1c1d8e69622a15d044b68234095557979f29cd7b7b6e8ac16c203cfede481a98034f4802c18c89ef06deaa120af9d88aa099b71563f96e6b62ee6887b3be5749a0b07f4c262aa781918f676383655b2e91bf63ec3c0bf0a13cb2bcfbb4aa3ef89b528939ac70f19f5ecfc363fd015ba916afbba0e4301c5cd92de6fbfe204ec22740cd095e643788d53aabd40f5ebcbfa6f2344038d9ce109b5e87be46015acc7dedbe3fc38c3909c222e8f7e38f7bc4ead9eee60c9df7baecc5ac58d17c909759bac6eccd2970736aa57012a5d3e9d377d3dfd4fd28910d147c2d1e487650caf9dfe162706b6a49a8bf866371918bcc7408d3040df3041eadc3030c8e37f36e1e4145d81da75e6aba6391e675e2a1821b7d58838cf5fe53ec30c3e13346a9affa506d88125df93a9b78affae751dfa74f7c668ee8cac51d4fd913a702314ecd0b19927ec697ae0f241699d433d4cd67d1753aa40014152d3c636aed752d13b31b538034ca4a98a46539da0085e6d0dc52768b3cad183a0001e6477e226590969d6b75936c2a6aeedea51d4e9243d642f311bc75d57321bdf197e9aa6a0a92ea6293edb1de8b734facce373d339cbbb9a33aae119e2838b1123944487b2828ce8ccc9435cdaca33f95ae6dccfd29f17b7dfd0c5e8660afafd688ecbadd2b78752b38e125c85401caec0f7372767f1f96f20cc52efb4d2c6413ce594a14d50cc71df755ceaef7bed9ebdf6293d9dfa9c7ffc8ef1903c6c12147d0f8368fdf5ff876e0b18d0e75a1d803b7d8f26dd49eba0059f394bdb7e07d3ef5d6d490e6ee7d307459a0206e39233589950b476b195ba31c5d3b47d7dbc4f56b10d19124ce5348ebb47fa7c482560a2231f4dbb077667a2a376adedf030bb3e85745e9a4b202d0995f03aab0b38b217e77cf3f11030b2dad42f10301209fcc217548a4529a151257037117450405b32f2dcc32232d9b7944dac72ae090db254134107c032258167080e555df52dcf39a15c4639ebbf4f3688a391409695f39dda4ceb2141330b771b881fb9fd48d81efd659bbc5bcced5a360083e09e625a6b2bee797e3b867ce21740462782e4482f5dd36e4ebc49f5dafae9374f18f943331d9d8837353771c5a448f8cd85969a1e2021982f2bdfc19fd56c6f49fe4088d49fe57bf8440faa88e83ca41f8db39a1fa267aac69c4e163e3fe2bbc3aaa06852cde374fb9a01134d47203f782b033e1dcd575c06cda55d739b1f5d22038a17a5f00b25e4ad5c0521b2e9eb7f4436cb0c7b441233c69c8e40af3f692e937666b1577d1c3b3dc367c8a694d5ee79d6c04a2b545a909a1c27609d110209d0c27be029cc6e0d0141147339ddeed6579d81c15205cbb88f64e313c03580157a2abe76f64be2af24749c964158f4aa33592b37e7b719b47cccf5f56426775102bd2c8464ebc17871d20c0c7a4a5be68c4b68b116a9f566bb7491d5a4b8783aa66c5ca88b1b4e0865c4de42345a0e08fe62e166863b8caece8575449ee2c5f61e0b98b99b06233762d5cef9b999b322b7f081f6f9670c9ad23b5f6f9143c4d1d9c5c221e7b7abcaaaf2e39d95b117887c85e38982238c57d49f01decaab6659c060a697fbed221d7cc8391444cfda0ed491e5e4cb20beabe7cc3e74fcada5148ed4726157ae41c3fcc6b3d19ff830a6f613e64e6306d8684168994dda1026ebec21122d72e2e7a100d5a16bc75a9ea12afa062f6a5bdf13045235effba5c048cde334d5b15aba0b570060b857e338db8374162eaf55de3cd9693541355a3d2811c09cc2af2c8439754ddb870a6b738c02f1045be89fbc1651b32218485b109919156377f24584025c16b77d81ac2e17a230dff4860bfb962cdfa93528bcd4c38a6a17d2275a1d662d71c3fae4ef1e92f26e2904664fb8c3bfa16c55a30d767150e3c9541893b793aeec379cac1f3da29f90ee548f4a0d6027e98d2ebd102c5e42d0bba1de46c5acfe8397be29f00cc88a85181486074b85813b3776d8a600f5870c5a08b34d36dc159533091097356e4645f43f78691bb8edc8f7823381bea0b3071882c4c84c276c639009cfd3f2a486248e57b2f7596ffb856f2148790a71f1c30aaabc204d1e3b4310f86559d5efd50ac591f388097c1a3a3763032a4404b68c0c7a798e415542cc3012dc70836ed5e0e9be174ddaf2ebed57e108e9cb2adb2bd604899cfbf9172e5353008c47f5a28606e0d7aa1cb87e0b3426d08b7f255e88c6666b324ea7853825b054c9ca3ed7681170a5cf8a76c0ff509efb2283c582fb877fd232cf5ef522cd01ecc9475ea6d853271badc708be7b60aca30886c6a48086f32a24b881153eec6a443b87863ef017614198fb302d816ad5d374fe11dc4b882e95968e58582faf0354f90d9996f0cf52b5cec03a6c8d710b57ed0cbb153fe9b546e74bcb5b3c76049142dd428d44e4db76052d766d18fb8f895795c7a25e5b89de9bea3eb231574bd40ddac22416154d981b856e47760b3e1f0f326f834177deace521ababef6f54320d8fb4bd4099f4248377ba6224d36a93f023defef3373f33322e6af1f79cec0f87fb5cf1340aa2509c719b4a63a85e0b62ae7066f915fc08b049697889e208b28c2df9187d2cdd87c9c1e696ff8d873c0c0e1eed1d2063825c6ee09c9eb09b8316d541e4d55d638f201a55fcab094a1e273914cb6531fcb2546631a977c4c0aebdcf90182667c76b113718a2e2eabd4eea03e01d2398f77ac68d0d3f3e0a55993813d74916e283f58252b09bbe5f10bd0287fba03054228a0013d145d9577f77009f02dec8dd53cbedbb8870af62e52c04aad8ae7c5a30d055e9df31b6930b4949578e209983d67d982126999019e58ddec9507ba567acecfac4ee8672680f6f9522bcd1d443cf80fdff62edddc8b17d32485662534257d6d952268932af29fba7e9bc46a9f4ba3f60434544c06a2d7e04a12b054a04febce8b361a26f02a4ddde7171d86d0b6f0689584834859d18106181e7d65d6d065865bfee6a141319b8a34582a6c7602139bc0103f931de99ae94729b0a23fa7facd0e032033dc6f0d77cb6c70c48946b59f2bd81fbcaab62bc27395c6b7dc9b44e1c652f963eae3b93df412b6d1c2e456fc1cf8f524eb94bdb5c2a3da15d662a90c72c5e4690764a0751a8ee227c849585697ec04dee202537671992af6a8e957e97bfb4d8526e645f5d28b1651e8aead14bede03cd28a6bc86415a4e3959cd2e63b7a73a55fc5026db86b365359a90ce2752781104fee6f29edc40776d7d2a8a414781dc05fde9588b6dd10b34792313e420994474e93ddfce6b46730d98fc6efb9a1a4ab8cd2beebbb7fc9300f722a06bdd2ad65232926acf0b400c7a16a29d0ce193754c57a1432f9b26dd83977d4da598d14fe1fc5813022779fb4461453cbdf1bc643b82d08729c8b01b8197f06e94f9ad9398542a827b4f2ce6d06f505d8911c392c3f79247dd51d750ba6493c75fb6aa9fdcd817cac1ddc75febe6a107475a83356d11c87c2ce94f6542126e3447c57cf70ca6f6b369c18dffc4710054f3aef4c0879214c26326515f061955ea64c9fef7df2dba609c9dd4c4070450c809f371c6540484c38dd0a6401e342e1858abd42b5f63ca228f5fc066137e3b4d914773bcdbac7cebd9bb0815d9e1ddb2d4f576adfda90000222a89c5557df2bbb11119e0de063a5fd6691cad3f062cea55551a80b7b27056f869017fa7b2026ade8fd921e50bbbf8a2d30fd3206deb9d4caf71eaa3cb8643b51133abc16ec4192f40cffe08c3633dc26d01cfb34e2531f470e702451774f60cee78a5b5ae116e30139ff3c3d9cb9a3bed794de78c35ae85515bbb7e6064c4f6d856b35ba186f62d114a83cad903edc3e7767614acce40fc575d8ce9a7e59d35d35215bd056fdeca0294c798a62089f9e90809e87fd938f37bf605722fdb5da754a6f389ec6eb61b32c7a82bac06738abb20828aa06507d44c5498339e82b85f37456629103e43eabc23dd987f0b0c228427b9ac4b73149f12f47b847104cfb93226cf867c6ba008cdcba8548355806c7bbca1c8994ece7f1776be7dcd1857d5feb2f0a89af007d11a90809d2f3e728df0aa4d790122d89dcd4f3422bf302289fa177741d6c36839128112599d25ecbaa9cc592aa939e83d9ac3d137b8125504b769aab272f8c70fa465be5eeccb5f27685eb23ae116cc919311d6869998aacff6cb28a2506d1ad4f4e0b18197608bbc86cde923bef36121d1ee89b98bbeb82ab2a34440036ac888bce404c12c0c66c593e9e651d9df3ffaed571bd1d6a4f8b93f0436b382ab8ec0dbc4664f772f3c23275347f1f8a8f683a7757461e2732035cd46aee5b1b258aff33a77406f5aeac613eac9ecb750338be917535d1bfbb5a2891259caaf8f8c8d908161ccdd9f42076ec6b2a400a06a6aeab949d06a177951d23f62e5ef959224dc54265924d654c6cb9d01081da95c52e33030c64fb1c3319acafe40917703fa567bd51a41245c26833ed997949178923259d43a0c9c9fee60874b6a79407a009e8a9d8beab6ef6c0ab6d58c0c2b19fa2f48fb16902b529628e388e7fbf2a503e637091f02601c7b4d5ed4a3b42a492dd8ae8ba2e7eeb32d7fd8e8c98e9a2daa8e8630c51aa7bb454ee67d23ef7aeebdc299477d383524cf7fc9cba294cea6941570c6921074ef0f6754b9518fe59179535ab8b19cd19ed04cb09e541f9344e29233f92bf2ad15fcd90aa06e1efddee7d6e084cedf1ef5bf8a6657b0de0458448ef8424fe2b1bdd2d4b35798fc6fe7d909253c8057deda207f61eef1ae9b90a6b7bae49ebb1223f265c494985a58ca5822c9c9fdd76d05e08c5f96149f6012fd0e1d35158ff6376e5b9d0200e8f4d22001e21043f40b61041385265993464b747514ceb4cec87956e62cd0e4c35dae337af3eea27b2b23f167371c877c9e6da66eddb4ae1e71d57de6b7324066b59f8936137e1931efb4e36b554d69ea4ac026b8e0bf5906dcdbe179abe9aa0a0ccb3a0ed7e5746d2474157838551ebfa9b74c29b2daf93487f775e2f039f98628630d0dc996cc9bd55b18f7558b95a9f2a1dd41bcf90488c7b2af65b6b6bb96607b712357cad65f7c2e68dfaaafdba783547cbd9e2121894da6c2ae9ab00a8736bc281e0700ef796ff0d1e61134c800e01ee76e73cebb7f2b1f5323ade3fb58c6fb12aebd7a28235cdea7bde0320f6cda252be07bac82a364e0bdd0e6e44405d8b88d12dbc7b0761b27a1cf844e76f096748eb7079623013a6be01ecb089bf2031fe22a631fea08bf2531aa6f945441cc6526841292cdb7de665a10f548d2652fa776191f8608b2ef70a6df6227b48704f4b73798b1441043f265e32f46ca6196deedb704fe5b5e968c90d2cac6ca78f72c907eba8898715c0cbebad5b7309782452ae8e7a9fd1843d82cede3edfca33b181a3051d01fbfbf537d3c2c2a9384a726a7030851384fe775ac8cae67f24e0d9d0c95f1f17b224005b637cbd6ff9ea5afc21064fb442f78483f2a80a64cf3a1556bf0a34aed96d044c2a90587b97b867ca665e224b538ce7deee038efa1f32d3f4b7f515d203a714b755336f73c3a7281be007ed7c52fce0c433f55cbc4bb064b36fb5bdbf4ee9d3a9f9a617086aa1fa17908500497c84305ba3fd01ae2d1786f7ab36eba844b3d4ca92d8ac7416df4bf9b75a4de5eeb4b90b5506f4ce3ef7d0727186fdf376342abd91536f1ad69afddec95e690ee85cfb19d3a72eda97dd567ac5a6c093efa470677aa338baa9afb158cd62c2cc4481422dd2918779a3de27b3ecae79aafe31565fc9aaf6e2f2092ae745e0068a84913bfe14e013fae92f7fe8b9a913cb61e7cb7b35faa22d54567b2a38e194e4c44cab9afca9ea1fb5ebb351cef914c0436dec442e5e8d3997a0bbe5c53722a766ab583298909b623697ac1435cc2480c882a145d155ff2dfafa20ed5e8ac80e9eb9f06a7dd05eb90981b0fec34034c7fbc08d7ee68619f5af46c08ccfb2310d28c554f3be67d604a75398f70859407703ed9f1446d4cb0e05b3c85005e195dab9326a36c8fa2eb11fe1fc9d06bdf49cd58198987f2a1a2976df32456470dc4f31cea7dc5946bfc9c08538bbce79792335e9ed1cc893a717474fdac4848dab0a8a64b012f0b64cca87f722826de454b70476bc1afaa96f1eedf3167a54bb91b2731539bd9d08d6247ce153be740e30546784dacd2e4489d41bcfcb0111b182091b1f867fb200ebccdac1e9566d32639949cca1e6a812621ef13849d71dce806fbc4f4907bb3983705ab28558501848d7bd5501bab0ae28d28141a20a976d2fad4b87a459b735d2ff9aa5d51c66261c10982572d040c29a8e2a67493a4d1cee897fa77415b49f39d4a0bb3e94c803097aca352296201d556894b622415694527cebc597740e3ecfb6e07715d878eba30be5c643731beabb486b6e9930fface787b04e0c5170a66a015e75bfeec254b4ed75f020e70b2fc69373c3afece49e1cfb80ed8e9fbb20e380d411c279d50dd83b3db79758e61359478316cf420cc45932464cc41e927c69860c8b02f45df3685f2202929555b1e9b0f6312a43aafa55233ed052e261d7a07fbaf031bd75f2451a84cbe9aec54432ccfd41492d2161600c1d765b6f095a87a3598a7681779c2924e6de6d1279afa10fc6bc2e56057e1af85c728218b07b89a8e988b0f8b4d75b4fa9c7b14ba179532ac46d2a41c0a52dd0bf268ed8f50e882fd4533c528271a77c04ba15c6405804f66e18cfcaf3b72ecabb266a7fa8ec01b1c5bfee446fa0279c0b544e5f66c8a3e2f8b0dae8f305365cff3599e55fe4992187599a01a5edb4001b9ac207664cdd9fdf975610c9aad447f03ee964b2650a00ba0efcdec7e6e0dbd0e938433c8c1032da6984ef07a229cbbfb3bd5e75f7dbb5250e1ebfe3cc0cda2e343d3490b4a0d89160193c6741fdea4a0e8f16d6c633173aca2f2b196306ba3783c2e52e2f2cd852322c66fa3a39e1f8e64d288303201680a3ba178a170c904a66cc649093bf553f81a8a15f5160e2077d2b82ac190e36ae589310d3d454e70d8c8fdfd86a3b8148c8e95770559b8ccf55fc0f57dc9843b69f7c2bc017e3362f9f84961ce2e9bc511d5099a0026b478c86f12d6c2524e0824b81bce458e312b35ab6fb1f4003015aa1c4ee7a79d749312af9bcf2decae83d654a59b54306da0a98c24d2c98528edafb556819ce926e0ad87a128395096f26de546e8b739087f7298bd8dada0cbc28dd30270a7cd25fa5b5d1d4017b7de76e3953e8218ab4b1d276d3b5bcc69f9d8cd718eeead66601609ad643d592b7c4c062e0dfae780eefeadff41f04c5ac273e2d35e60f3f7f6beff6f18ecb8e5a96c18d48a56478b7caf43f1e3c9d30ca1633ea8353c23f8ebd5efcda34268b11454d2917a32e73183e2cf9d8dcb06cc315780181e5de0eaed8d9559a6e15409f7ba2a47f124b4654d359b4c7a1883ee67189a50fd02b6b0850055f22e39bb226d9da4d2a0cde87c6bfa4512ad6663fa859bfb7e15c5fab347636d4a8cf4b28e23c246cbde73a41fa783b4acc333ad868b1032de6f33fcfc092707b09c9403cec8663d8e86d89d48098c08a7cf9e0514d33c97b9a18b0d99c9276e2586e6a66b4ed9bb73f75a65eb9d391b59dcdba5feb14fffc6e2c4adc7ad1191c032b0127ff12f59f6a293d2ce67e52a8333a93dad45c87e330da1d8a811c6d489dabd73583adca1462fb2b5643f3d6372e8932c350db2eb162ab5414685bb10b63e7ddb7b81e94b298fb35d33bcdceb516b33a0038df9e23c6595d9aa37fbb77a142485160167edac7f19a1ae24004529a0ef892c4f0cd0a317b44355272f22731b85f663de2aaa2ac81d83857d703e30310a712e60b221c88d61ae4d38da54649047b2a256a857b46330b58860bc1bfeda7e692281d4558a7168567ab091236e712f7da72e542f464054ce77dd560b215a65e2a46df1be0647c11343ec09954ec16b0d6a8f77f1b7db096c77e2fe51524310f733c546f8302e994c208d55d22c461a59e474a99fb589e792aaadb8a54802d1ae10eaf6fb98d49e1dac928dbf7da7b906ed36948b90f449470670e4628b61b5344d01722c51f67ec2b394f2d61d9e74195708c96743f6862de858e380fa7b95032a185b7a7c4b3de4b7923f61acff26d8e0ff2ec3cd517fb7ecf7a815492f6d372beaa11e8a46ab86672c296a245a60072307115bdc7745242d9dfbbff0f848c942c854c9fec58462153b696a13a745017359d8ad618acbad2a35bbbfedacc62b7b9d47ce4e1bb4455a1a2ab78d665a3008dc6c39b1f862620e1386aa998492e6d4fa73a6e6a87aca757f0a10dbe442c31c77cdebc965f000909c861f8616d4391b53665e6d0da666a7411bde831cf02ff3733775a6f0b131b81deb355c30621379060a1bc08990c94025aba8030894b7c957e9c52608367759b00601ca1645506eae109058f9fa3b2d4f7a6e060bafa2d63351494eb5e58f9051d4d95b1ab64bfaf4d4f694a1452169f7ad626bd274d6974a4cc95f025bb25638bd512460bd72c064262b24556826ae9f5abf9aa250519f0d33445045383036aed9b97f69791badabdf704d95ad332dc2a2b5d9cea06e4ba770c25310be8e7aa61e5d60a152278af8038c34eac0cfef61d47413889c8935643fc6442edd2786b50fd111b110f58038872a0963243e0e69311e73ce1487fd56e3b69258ab269fcd3a7b4b9c570622d5702684d667c82035eaf80f346e53e6f34699758a4074249b0e1f457fcac41f0c270b9ba0a14f451b12e667870f05a19dc9e918d95ac99fdc33ddcf7a1953cbf2cb3b2190ffa164b6a79e93b23f59b33af94306bc9dbac0a17e9c09d2df7834afe0a179926fed517bd58bc999615babaeb16adeb157223638b72437aaa576f76321d82676e8ce916873f3736e3d0989a60a46590fb7cfd7172642a568da75ab97fa14d9efe2cc92c0ec340187a00227caf6699865e07206d0c15f10e0a7d19f7e3cee177fcddfc96aef6548c78e3ce122e8c07dcc15d3f784f1e1c6f63dceacf02505e23e11010f5b9ac76477ae844a490766b5b6a1043a11171a2cff1df22774f85560f585e120a38321d3953c6d28ef8e9921d6556443738284db2bf3e3c00b64c7f6cc4f71e12ddec35b6b59b91df72f8ab1d6359bb536c4094b774f204a80fb97b5466b1b09b67b66762fcb617233bf84eb9b313f1d5c94dba2b5f2194d1bf27146e965c6d696104631c4974e1b2226e295ad5f4f6f37cf44d95f827e931f3846ae134802ca0aa0793a19c770e90062eed099f0ac8694130420014f293811cf7ca48783e5ef3d3a5d5b9036f3a2938b62afa1c37fe76bd69427c12e141bbd3804b593b74d13ccd5efcb86a98daed9f164013dfc28691c1094a8318232157b0f7e78c7c20f2125cda64168ae735b168cf76d4f0811cfb4f49be75e505757d59464853732c9e032aff0a5c583eb1f64601228a56744d4c1241ccd5bcfc52d3ad6ac8e851fc1f085c0cedde44a9b50729a4a85a732c1b6858766c73735d42e1fbbcde3cabc2bb9284e30b4a91cdc6e441b5853c44e7394f220ffb5133586a7d5a198e6b2dcbfcbae1c08212eaefb4f2088038172fd00b5fd340709f52af14c251fa40365209da1d037a1e0ef72da7c0fcd550d6f561a86000c803b7dc7cabea4ac63f67c92a063e924bdf0e8c9816e79539c690b22a6d6aca42331377244019313cb8cdf78818be630aa7dd27bd7323e0f41b2aa1615f2666dc6882a97b48022381bb74d919c1c0fa9c2e613b3718c9265f0e875fd9fbad3ec0f0603d9d349f37c52ad811492725712316a8a5fd623e5d1e008af8bf2a2af78deba043ea7a2f257bae662573d900748e018c1c885247472afb7aed8fcef353b2a8e8a80993a966aeff3a71ee51d5b10fc11e0e0464e78bf4c18e765c6aa006a23ba52ecfc73d43d872b81beaf7b2372a75830f57408b9b42c974c0dbe85f862ca6a92d2ae8abc6b79724ab9fc374f2dd49aca497f65cc0714498b4267405cc22c4ad0e8fc9af5e0266777379935e55c2abab3bb85cdf5a7802a5f725c61a0e0fc789f6bc08494fda4c88d9401327a2aa19c837bd6be5caa5a4d02344fe262db40cfef859ac07ae8cffce6856614ded230f996f3ee79361ccdc4b6f244bc9ab92450cd79be786fe7c472843d4b01ece3f1668d9fec8e4f717dffb57da425187410dff1d28088f7a399f8bd03c3a3c28eb110aa18300ac5574b81688bc122a4917e1765a9929b5771681bcb0b5f8fbc04feb6ea91cf914a57b713cafd61b5c2da9a43267712ed559ef665a87b11a8035ff8ba0bec87473948bd2ab42f291b561a79e45f61433bcf75d61123876018d59f8840d181a2fc3d94cbbae1dd2da8323586ffec0b2f8cfb040808827768d782ad7d2447357333703df6c8597dbf18fb0a0d7c0e08d084164ea97f0451b4df34cf924b3feb43e3b91f6f43137294c67c6a44c42ea9c607c158d22332f9907fc137a9411529287300140eb8031ff010fabd8e1750b6cfee6ef5ed978a99eced6aeef12a8a405146cb676d47d139a6ba24ed09f2d37f23b647cc803cf0a3d577881873ca555bbf90b472674638897b7ab62300bba763557b35ac8b7335de8e51b3f31cf3b473f907d8a06f087084517e6287be07bdc730b3feef3f783adcb5c7ccbd03ae80266de722ba67642e2be40cddd7473ba922088ff4842d39097a0eccdc88aefd6680a11361790448826e4f1ed77594764cc23bcbd1fcafd6fe5fc945122a850bdfb506a428fe159852a3377f9eb27fe561e6bd829d5b8e7b51c820999172513a458b628aa691096e31ec93060f950ae7889782488090016680b94241b72642535ef43b6411088628cd6550b669698bab1e2724eaa0c05f5f30edb59133fbfd5cf177310cc37223a83067d723f077b01a58761523fa2114fbc2c91bd2b16aa13ef2c36a422e0a03d4d136bd5e80541df63b59b021a327a11bd5f6bce228f36ce7392170445edf0e12f20f362ad1f796796dbf6d461e3bbcba01add942aebd38ff4b30a4bb860c76e2f8ad5acf668f84244265833c2d381f9024f99270650421ab5e62558d28ef385524b2d82fd6ccb814fb0a10840cbc9d642db78fc0aafad0ff734e97d9652f8ed2e655641c76b6e5298f3a237f001e5c60efb604946326452518ff93797b72d8057ab685b9764d0c150e1f039ef83adb3bc0f5f0f14ef4b65cfce374a1e78984c606004b9cb14f720dfebef012cbf4197807713a16d9d585c29160ea69f16addfe8a8f280ca5cb408eb8baef88449c6653ea12a6bebc7da4b2a141f34e4ae0d03e96debc1a1bd27cce07c180f49f60e5adf2e43305a2946318e823412b821c9491e716b186993adad392b75080f1f53dba050c3598fe551c734d626ac9d63a271b45d109b9ba507aa72a5e81ef4288b0c9930e1a70ef555e8a4eb7b4411903888d537028f673430c4ecc8b2932b75e4b1527a1b4a625d52a7f5f3e4b50fd9b01f412b5a6935d76e07184bee4b36a9cc4abadbd384059c011fdeb7ee2871e24b4838a0b3b6f9c12c655777d51ff9fc6fc368c1873fde4a2d4b0f05e00399e47a96e03c75bce2d6c93392375056f85317c08df52699edd86f8fdc5cbfa339343e0be3b247c391f4dd2265763afe8416659f02e599b742384daeb619d0884aa409836784a1fdeca59c89153e58dc0a425f72c0aa09caa69ebbbce225e3075e7c9caee08fd773ba70f944233cb3e61b26d53f4ea4fef0fc79c6b26c25db81bc26c52de1c66f316ebdd9bae4265a4fcb018ab5da576ad4a7fb7f5b7749f4f3a7f91f2452506db3bff6114e10345d7059264dad54b8987aa79d508d1967b4d3b84ba375f93035de369163511adfdee3632d88c7858835fce3d64fb57ed3e22a6a3461365036d9aebe887c5956a7efb328998c9c403920d898302e2e36efeefacd2ac0b78c4098f3f8d2e2902bf67f56211ef1d2b41cf64aa57bd6023f1f4b846497ec05a1451eb9a320d7f26d46d68abc9396f8314c0aa7cc333f1758fc35a5f9e687e6c85d349809e76d719bf25557ed66d2f2490a1660f919bb206c275d230073ddfb88164ab6e2b5e16a0dd1c9307b26396d8cbe69def4e99d72534cae8661b746b97235d150476f20114364a4b01cbbe1668b5ac564331bc942794c635d7b70686cc4888ccd03a7ee1923a2028c2b86ea507f97e7a13ab87657ea96b27f3bf6c096c73abf5c55974b1adf0a2f21805b4db92c8c64151ac63898ed5df1f5953b6f7cf6b0cc9d6e702b1b927036f88eb0a03de6acf15317e08eaeadea6c0906c9b0f0b632fb0fd9889823f20e0bf4a615da0de35ce8191d4a26a6346ca9fef9ca2fae6ded3ae8863de91df04437343996e5d5229db2e01701ea51947e21133f1e95fb2162ef77e344310bccc91c0622c9bd594224427c5bb392448fd46f85f85a8f3774d22244a54f96ed3c15f68671f846471884ab9f07eab60c24bd3cabbd56d14336adb711e08f152ca01e0745d71dba7a1cbffaf4034f0884c32e55b8ed5c6d5954d28f0eabe96e13239514e284d2e629527a8c11da3e25b6783d853080a725f7598a78ebe2d3db746e7bddb152ebab81e12ccb1f50f047438eb82c41896ded29d8fe7773816177f6a8d73b8479d1ef03dc3ec7a98801808f6850975b59d8754411d2716c2e0205b9f437cbc64197f4dd393ea542609e22837b850ec79bcdd3bea36bac61723c803d384ea61e7359b82d2071f5f6877e4807489c37b74169aebfd0a1806dd93e2f625d491ecd53de329344521d960956cdbdee946cbef05b05f3a63f62ad56f8488fc78f991354fc3f2664cc8464a7eb3d4eda6af001f6d243647350f0155c263fd76c82bdfa8b69fd7e8fb6e2c80f857210b63d9936643b8fa1a58976d8d40ba0500265ef2e46384495f44a9d0c36695fdff16b732c51434a4b0cb63c4653d6ed239a71a095d54c5d19034474c414d6da57d1b1c6f7ec8757bf24bbda894c1a8dca3e80db02a2bf3285f0b15a14a8d0d84bcd4aacd3533dfcf72a0a8817790b90df5ad7033ea099387f934a2a3d3183b31e53c8c61320317e81fcd8803c2a644893534188700c27ccde1f55dd437b988f72bc9bd3d0ba2346c1c031d72d2383048af58287884d32f7d30e86497c10695a5546d111eb5616e54181a4cc56ddf1af1240c996055e9597e567f6c18a2e2a2f85fcd93fb9e66b33832736165182b54d3b3f86a177dab3a1f16847566d6249ccbeacf85301e4a4fa7c08768f5f3f047c9d3aa36254e420206071c8fa7c6d46ee653ff848ff3f7eb6622a1f94d7f91807c2d523f9335eefe0a6ff691f7c6c094caa734f3ccb1d3a5324f5f5ac2cfb82b70740b944fc462c068dc388ec9316a07a2606f6cf1fd9da11bfedd0f4e4acbbfb9e709db1b4cffa575fbb702c83ea0c88f91ae88858da002beb3150b9f32a91fba41f597290d802a83e286ce03c56a8902023ee353dbfc6d22b173e590ccda21d4242992b3c784d25f31bfe51ba37915a1a554c6d3eeda98d0614f3d9dd04d96604d6ed9986bdb7c19d51194e8a09692cd2503dadd82c80f3c040cfc612196ca6f920d7c44fb4abc3784ba27d7fd3226e5f4bc888904393a8307c5674ea780389c673f21f3de17b6e853cfa3f98486e535b2bdc595263c2a79655b62870e30263c7858f3552694c291ff6bbd19435f520540f07be1fc43cb24b18e805d8515a862a422acfd3687527956f8c0dce34873a3d2b4a3c0d309923a065d35878c26910e3879d5569ce19f70881e592f1197e1e05a5d91aca4762e194fcac171f7c363add253ca2beae3ce987062f21e9b29bd0598474ea70cbcdb503c6a9f3c770c7e55550442022ebfac2a1d6eaf95e962d57735fd0618be47b1ae0a539f8fb5fbe512a26d698a95378adab95b9d32a080a195a3850c536ee833238525b493a160bbc8947411a99bc53d6aa463e3ea17d2e8a542206319e1c801bca28c68c493d8616e34294214b5eaab8fa8fbaf1fc8948ab8d2f1bc76507fe8f142d5f626793254ca4ab86ce96052cfebb41cf39b8e9515144d0a24e8df83f11ea7059db2efbe8f12e9db1218ac7a6c5c2b0bb3b17ff6ee634532d03567105ec071c5093c1fbabcf6c9c56ca0c8d227ec2ad34734a64956ac80ad8285e1d987d3423afc0311fb89c532b2685aab43429689c544ca04baec72360b2c16b62833cbbd6301343b19a4aa5d3d83798fbfb4dea24f9c24476b934724fe2323568b6db9d5b55fbf32133612efe709fbd733d3132be506a23fea13f2a450bba1543a4af8c6d6b7b6710e9850aa80cca464748274d23866a37548659b1e07cd55739cd6d01388ebcd620723b857cd55d7f222ca6c92cd7fb90f736ebad293bad82a28f9ffc0445295459cf511f76dd347dcfb9cba7dbaca1b28bca63d61b12c13a166ef56de725429abc60d27815c73ab62175b67f930da05c30e56c9236d03e41235eea860f06c15e4f2ce96ed18c1c6c196a8cfeef415fdc8f206edc0214f33dfbe72016596bc2f1979c0cc3043defc7d6d45ba060ad21b694a3ec6736a4acc65be833aa37e186a2d09800e0531c6e121a5bc49155045a40dfb3a28be30cf9366600465b01b17aaca15f0e183053d5bcdc4539a775c5402af5de45d6db989cf8ee0a90ad830a84a03e3d4ca52c9591135bce4b083749b1de1263434c42220fab74ac660c5f315d41b588645dd3bec726f84c1be6077edaa2f312d7dce9b57a1d7a3f1b999a713c4c1bb260c824723722e0cfbee4a15dad1b036d87f32d1b69ef566cf5f910c6851d95e616acd8c119916ba6c27b5d3b5aa418b98398173a0b309e907b3977f84c67901b4b7471e5d4d39a11f2f36ddea8fc3b8bd2f6646cf9eda3a4482537558af591f0b2cdb643248f450af0ac0cb03d7ddfa02b68eba4db1c6640f940a30752afba82dd231081ba59fd1755e3939da9cf61726412b7f40d61724d8cdebbe0447fbbea9d7364edea91929c7f9fde038588035e04f6599e065e747df661512b69889ccf3639f3b972802ef1199002709bb0633209099af53c7952706ca52b1e0b1f3ea4989ca16f78762f10f452df2e3f96fe91349111631ae6d7466afabd4567b0b3e25c1c2159fe01fe835217d2853a7643a3831d60272db419d7949d4b26a1c4ded717461176ebe0428ec4a521e41744933462fb97b0f9ee32a135e14a45a06670dec1ff01c2503a890c036</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Password is required.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">[ENCRYPTED]今日、海を見た。もう怖くない。</summary>
    
    
    
    <category term="未分类" scheme="https://blog.ryaoknw.site/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/"/>
    
    
    <category term="杂谈" scheme="https://blog.ryaoknw.site/tags/%E6%9D%82%E8%B0%88/"/>
    
    <category term="private" scheme="https://blog.ryaoknw.site/tags/private/"/>
    
  </entry>
  
  <entry>
    <title>2022年10月追番锐评·兼年度动画排名</title>
    <link href="https://blog.ryaoknw.site/2023/1/72c99cd69d60/"/>
    <id>https://blog.ryaoknw.site/2023/1/72c99cd69d60/</id>
    <published>2023-01-24T11:50:14.000Z</published>
    <updated>2023-04-02T06:44:06.894Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>懒得写但又总是想写，<del>于是便随便水水罢</del></p><p>本来还打算单独以一篇「看动画破放了怎么办·尬黑·孤独摇滚」来作为评价的，但是懒，以及感觉怎么写也无法准确表达自己的想法，<del>于是也随便水水罢</del></p><h2 id="2022年10月"><a href="#2022年10月" class="headerlink" title="2022年10月"></a>2022年10月</h2><h3 id="电锯人"><a href="#电锯人" class="headerlink" title="电锯人"></a>电锯人</h3><p><img src="https://lain.bgm.tv/pic/cover/c/26/b4/321885_92uzU.jpg" class="lazyload" data-srcset="https://lain.bgm.tv/pic/cover/c/26/b4/321885_92uzU.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>stars：7</p><p>中山龙拿着电锯人ip的红利追求所谓的“电影感”，最后做出来的东西实在不太符合期望。</p><p>可笑的是吹的几话都不是龙哥监督的。</p><p>作画水准实在不敢恭维，一堆异样的走路摆动幅度，极其粗糙的长镜头运镜，是否搞错了真实系作画是个啥？更不用提各种谜之演出，战斗节奏说停就停，还有一段意义不明却占了几分钟的清晨生活特写。</p><p>期待龙哥的后续发挥，但他实在不适合来做电锯人。</p><h3 id="秋叶原冥途战争"><a href="#秋叶原冥途战争" class="headerlink" title="秋叶原冥途战争"></a>秋叶原冥途战争</h3><p><img src="https://lain.bgm.tv/pic/cover/c/da/3d/389450_BbZ4n.jpg" class="lazyload" data-srcset="https://lain.bgm.tv/pic/cover/c/da/3d/389450_BbZ4n.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>stars：6.5</p><p>PA原创动画</p><p>套着女仆皮的日本黑帮故事，全篇充斥昭和味。</p><p>在看完前几集后，黑道女仆的噱头意味已经淡去后，本番本质上是对黑道元素的利用，用极其荒诞的展开以及一堆女仆元素来展现黑道题材中的对于无意义无结果的认真与坚持。在荒诞背后透露出悲剧，而只要将这层荒诞稍微减弱，悲剧色彩就被无限的放大。</p><p>本番剧情的展开十分严谨和自洽，在每个荒诞和反常识的展开背后，都有前文的伏笔作为呼应。</p><p>动画逻辑的核心是对「女仆」职业所抱有的“认真”和“大义”，这种坚持与大幅度流血与牺牲形成极大反差，体现出「无意义」，全篇都在以一种荒诞的形式来讲述背后的严肃内涵。</p><p>但要说内涵，实际上除了从9&#x2F;10话开始的正剧，到最后岚子被杀，我只能认为这是一个“形式”大于“内容”的作品，就和上季度的孔明一样。</p><p>不过就总体而言，这个原创还是给了我不少乐子和惊喜，极力夸张的演出风格与其背后的荒诞为作品增色不少。</p><p>我极力反对那些在看完噱头图一乐后就抛下一个“逆天”，而在热情退却后写下一句”无聊“作为口水话来评价这个番，它其实是制作组的一次用心的，充满诚意的「单推」</p><h3 id="机动战士高达-水星的魔女"><a href="#机动战士高达-水星的魔女" class="headerlink" title="机动战士高达 水星的魔女"></a>机动战士高达 水星的魔女</h3><p><img src="https://lain.bgm.tv/pic/cover/c/f1/fd/349441_uND33.jpg" class="lazyload" data-srcset="https://lain.bgm.tv/pic/cover/c/f1/fd/349441_uND33.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>stars：7</p><p><del>大河内将重新定义高达！</del></p><p>大河内携手高达ip，将其打造为现代的，符合当下主流审美的高达味。本作抛弃了高达一贯坚持的宏大叙事，从校园、百合双女主以及融入其中的各种要素来讲「后退只能选择其一，前进兼得两者」的主题（当然，虽然还有一半没出，但是专业的动漫高手是不对其抱有乐观预期的）</p><p>值得一提的是ep11长达4分钟的调情演出真的太精彩了</p><p>总之还行（至少我认为整体比电锯人好看）</p><h3 id="恋爱FLOPS"><a href="#恋爱FLOPS" class="headerlink" title="恋爱FLOPS"></a>恋爱FLOPS</h3><p><img src="https://lain.bgm.tv/pic/cover/c/ac/ba/375735_AR8Al.jpg" class="lazyload" data-srcset="https://lain.bgm.tv/pic/cover/c/ac/ba/375735_AR8Al.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>stars：6</p><p>以故意典为卖点来消解因为典带来的烂俗感觉，脚本安本享，著有石头门混沌子等作，是5pb、mages的脚本家。</p><p>由于脚本我可熟了，后面开始“神展开”的时候也没抱有太大期待，从前面的水准就能看出不太能期待，以及对5pb等作一贯神展开背后没什么严谨逻辑支撑的了解，最后失去了典要素为卖点后，本作也就没什么意思了。</p><p>附科学妄想经典番茄酱：</p><img src="https://s2.loli.net/2022/11/24/JqvRzINy2fSjFCA.jpg" class="lazyload" data-srcset="https://s2.loli.net/2022/11/24/JqvRzINy2fSjFCA.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img" style="zoom: 33%;" /><h3 id="孤独摇滚！"><a href="#孤独摇滚！" class="headerlink" title="孤独摇滚！"></a>孤独摇滚！</h3><p><img src="https://lain.bgm.tv/pic/cover/c/e2/e7/328609_2EHLJ.jpg" class="lazyload" data-srcset="https://lain.bgm.tv/pic/cover/c/e2/e7/328609_2EHLJ.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>stars：8</p><p>值得逐帧去看的萌豚动画，制作水平太高了，动作细节设计的太好，改编的部分也精致有创意。</p><p>太厉害以至于我唯一能想到的尬黑只能是原作自身水平，我将化身成为cloverworks厨，这是今年给我最大惊喜的动画，它甚至只是芳文社漫改。</p><p>演出形式又新又整活，以至于你能很容易的制造各种题材的二创。</p><p>制作团队厨力拉满，以至于作画演出水准足以让平凡内容焕发新生，喜多厨头子けろりら天天在twitter高强度摸喜多。</p><p>这样的高质量制作暴打10月顶级ip电锯人，本来7月pv出来后，我只是因为有长谷川育美<del>（明羽杏子）</del>才去关注的。</p><p>那么介于我对这样一个动画的喜爱，在看完第12话后我不得不去关注它的缺陷，这也是为什么要「看动画破放了怎么办·尬黑·孤独摇滚」</p><p>我对结尾充满了失望，它不具有任何冲击性，我所设想的有那么多人的帮助，并不是说要改变社恐，而是至少可以去展现波奇的心境转变，而不是依旧因为简单的理由（譬如最直接的我喜欢音乐）去对待摇滚，这不是君に朝が降る。在bocchi the rock优秀的背后，不可否认它对于主角的形象转变的刻画是非常乏力的，不可否认的是不管怎么解读，这一整季的成长性是欠缺的。作为一个动画刹帝利，在我的观点里，波奇的所谓「社恐」不过是一种标签化的展示，一种夸张的舞台表演，一种将笑点合理化的说辞而已。因此在最后我将尬黑为：「毫无深刻主题可言」「对社恐与他人的相处方式表现失真（对平民与上层阶级关系表现失真）」「缺乏主线连贯性」，这一点更适用与另一个评分高得离谱的动画「辉夜第三季」，只不过在那里更看不到什么批评之声。</p><h3 id="契约之吻"><a href="#契约之吻" class="headerlink" title="契约之吻"></a>契约之吻</h3><p><img src="https://lain.bgm.tv/pic/cover/c/25/cd/375817_O7LGk.jpg" class="lazyload" data-srcset="https://lain.bgm.tv/pic/cover/c/25/cd/375817_O7LGk.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>stars：7.5</p><p>A1的7月原创，本来是准备专门出一篇来谈谈丸户史明的风格以及其脚本设计的高明，但是感觉能力不足以写的专业全面点，于是作罢。</p><p>典型输出角色类型的番，实际上剧情不行，但我太爱了，star+1。</p><p>追番体验远大于补番体验的动画，每一集都有新乐子，要去深究，剧情其实漏洞百出，各种作画和演出问题也可以单独切出来批斗批斗，为什么有这种好的观感，得益于前几话的提纯，以及丸户脚本抓住人心的水平。</p><p>cv会泽纱弥的声音可太好听了，表现力拉满的同时还带有涩气，1月的生而为狗的表现也很好，这种cv可以期待一手同人音声以及套马甲进军里界（简直是至福）</p><h2 id="年度动画top"><a href="#年度动画top" class="headerlink" title="年度动画top"></a>年度动画top</h2><p>仅评价8分以上作品。</p><h3 id="1-Cyberpunk-Edgerunners"><a href="#1-Cyberpunk-Edgerunners" class="headerlink" title="1. Cyberpunk: Edgerunners"></a>1. Cyberpunk: Edgerunners</h3><p>极高的水准，trigger拉来众元老，用行动告诉了业界依旧可以有着20年前的高水平。</p><p>啥时候养老院khara也来一个原创（</p><h3 id="2-メイドインアビス-烈日の黄金郷"><a href="#2-メイドインアビス-烈日の黄金郷" class="headerlink" title="2. メイドインアビス 烈日の黄金郷"></a>2. メイドインアビス 烈日の黄金郷</h3><p>双线叙事编排精巧，跨越时代的冒险被深渊的罗盘所联系。</p><p>深渊是工具，将一切现代价值解构，将人从「有机」转为「无机」，“天地不仁，以万物为刍狗”，在深渊中，人变为了最原始的生命形态，在此，「一切垃圾都能变成黄金」。</p><p>通俗意义上的生命不具有「价值」，愿望获得形体，意志化为肉身。</p><blockquote><p>痛みと痛み取り替えよう<br>糧にするんだ　落花のかけら<br>すべて傷ついて僕は象ってく　形になる<br>目覚めの先で<br>行こう　ずっと　響かせよう</p></blockquote><h3 id="3-ぼっち・ざ・ろっく！"><a href="#3-ぼっち・ざ・ろっく！" class="headerlink" title="3. ぼっち・ざ・ろっく！"></a>3. ぼっち・ざ・ろっく！</h3><p>在进击的巨人与孤独摇滚中纠结，由于在写这个的时候笔者已经玩过muv-luv了，对巨人剧本有着相当量的不满。以及笔者向来对厨力和用心有着情感倾向，于是决定还是给孤独摇滚吧。</p><h3 id="4-進撃の巨人-The-Final-Season-Part-2"><a href="#4-進撃の巨人-The-Final-Season-Part-2" class="headerlink" title="4. 進撃の巨人 The Final Season Part.2"></a>4. 進撃の巨人 The Final Season Part.2</h3><p>mappa尽力了，而wit还在用古桥一浩x间谍过家家这种答辩摆烂</p><h3 id="5-かぐや様は告らせたい-ウルトラロマンティック"><a href="#5-かぐや様は告らせたい-ウルトラロマンティック" class="headerlink" title="5. かぐや様は告らせたい-ウルトラロマンティック-"></a>5. かぐや様は告らせたい-ウルトラロマンティック-</h3><p>演出大好，4月最佳</p><h3 id="6-からかい上手の高木さん③"><a href="#6-からかい上手の高木さん③" class="headerlink" title="6. からかい上手の高木さん③"></a>6. からかい上手の高木さん③</h3><p>只要细节和铺垫做到位了，即使是普普通通的展开也完全可以在制作工业化的时代做到乱杀，单集亮眼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;懒得写但又总是想写，&lt;del&gt;于是便随便水水罢&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;本来还打算单独以一篇「看动画破放了怎么办·尬黑·孤独摇滚」来作为评</summary>
      
    
    
    
    <category term="动画" scheme="https://blog.ryaoknw.site/categories/%E5%8A%A8%E7%94%BB/"/>
    
    
    <category term="动画" scheme="https://blog.ryaoknw.site/tags/%E5%8A%A8%E7%94%BB/"/>
    
  </entry>
  
  <entry>
    <title>通过手机USB或者蓝牙共享网络</title>
    <link href="https://blog.ryaoknw.site/2022/10/ac2b91736516/"/>
    <id>https://blog.ryaoknw.site/2022/10/ac2b91736516/</id>
    <published>2022-10-05T14:22:47.000Z</published>
    <updated>2022-10-05T14:38:17.332Z</updated>
    
    <content type="html"><![CDATA[<p>才知道能这样。。。简单记录</p><h2 id="USB"><a href="#USB" class="headerlink" title="USB"></a>USB</h2><ul><li><p>手机打开“USB共享网络”</p></li><li><p>连接数据线</p></li><li><p><code>ip addr</code> 或者 <code>ifconfig</code> 查看是否有新增网络接口，如 <code>usb0</code>，<code>dhclient usb0</code> 分配IP地址即可。</p></li></ul><p>不出意外会在有线网络处连接上手机网络</p><h2 id="蓝牙"><a href="#蓝牙" class="headerlink" title="蓝牙"></a>蓝牙</h2><ul><li>手机配对系统蓝牙</li><li>手机打开“蓝牙共享网络”</li><li>在网络处连接即可</li></ul><p>成功时网络配置里长这样：</p><p><img src="https://s2.loli.net/2022/10/05/3ZSRhWsUozHNlTk.png" class="lazyload" data-srcset="https://s2.loli.net/2022/10/05/3ZSRhWsUozHNlTk.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20221005223718112"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;才知道能这样。。。简单记录&lt;/p&gt;
&lt;h2 id=&quot;USB&quot;&gt;&lt;a href=&quot;#USB&quot; class=&quot;headerlink&quot; title=&quot;USB&quot;&gt;&lt;/a&gt;USB&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;手机打开“USB共享网络”&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;连接数据线</summary>
      
    
    
    
    <category term="未分类" scheme="https://blog.ryaoknw.site/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/"/>
    
    
  </entry>
  
</feed>
